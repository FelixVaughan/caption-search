(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{AccountChannel:()=>Se,AccountItemSection:()=>Ee,AccountItemSectionHeader:()=>Ce,AccountSectionList:()=>Ae,AddBannerToLiveChatCommand:()=>fl,AddChatItemAction:()=>yl,AddLiveChatTickerItemAction:()=>_l,Alert:()=>nt,AlertWithButton:()=>at,AnalyticsMainAppKeyMetrics:()=>ti,AnalyticsRoot:()=>ii,AnalyticsShortsCarouselCard:()=>ni,AnalyticsVideo:()=>ai,AnalyticsVodCarouselCard:()=>li,AnchoredSection:()=>Jf,AppendContinuationItemsAction:()=>Pe,AudioOnlyPlayability:()=>k,AuthorCommentBadge:()=>As,AutomixPreviewVideo:()=>mi,BackstageImage:()=>vi,BackstagePost:()=>Ti,BackstagePostThread:()=>Ii,BrowseFeedActions:()=>Ei,BrowserMediaSession:()=>Ai,Button:()=>R,C4TabbedHeader:()=>Wi,CallToActionButton:()=>Hi,Card:()=>Gi,CardCollection:()=>Y,CarouselHeader:()=>Ki,CarouselItem:()=>zi,CarouselLockup:()=>ne,Channel:()=>Qi,ChannelAboutFullMetadata:()=>Zi,ChannelAgeGate:()=>es,ChannelFeaturedContent:()=>ss,ChannelHeaderLinks:()=>Oi,ChannelHeaderLinksView:()=>Ni,ChannelMetadata:()=>os,ChannelMobileHeader:()=>rs,ChannelOptions:()=>cs,ChannelSubMenu:()=>ds,ChannelThumbnailWithLink:()=>ps,ChannelVideoPlayer:()=>fs,Chapter:()=>ys,ChildVideo:()=>_s,ChipCloud:()=>Ss,ChipCloudChip:()=>ws,CollaboratorInfoCardContent:()=>Cs,CollageHeroImage:()=>ks,Comment:()=>ao,CommentActionButtons:()=>xi,CommentDialog:()=>ho,CommentReplies:()=>po,CommentReplyDialog:()=>Ps,CommentSimplebox:()=>So,CommentThread:()=>ko,CommentsEntryPointHeader:()=>_o,CommentsEntryPointTeaser:()=>yo,CommentsHeader:()=>wo,CommentsSimplebox:()=>fo,CompactChannel:()=>Ro,CompactLink:()=>Mo,CompactMix:()=>Uo,CompactMovie:()=>Wo,CompactPlaylist:()=>Ho,CompactStation:()=>Go,CompactVideo:()=>ie,ConfirmDialog:()=>Ko,ContentPreviewImageView:()=>zo,ContinuationItem:()=>lt,ConversationBar:()=>Zo,CopyLink:()=>ea,CreatePlaylistDialog:()=>N,CreatorHeart:()=>bi,CtaGoToCreatorStudio:()=>hi,DataModelSection:()=>Je,DecoratedPlayerBar:()=>ha,DefaultPromoPanel:()=>ua,DidYouMean:()=>ma,DimChatItemAction:()=>wl,DownloadButton:()=>va,Dropdown:()=>O,DropdownItem:()=>M,DynamicTextView:()=>ga,Element:()=>xa,EmergencyOnebox:()=>Ta,EmojiPicker:()=>lo,EmojiPickerCategory:()=>Ia,EmojiPickerCategoryButton:()=>Ea,EmojiPickerUpsellCategory:()=>Aa,EndScreenPlaylist:()=>Da,EndScreenVideo:()=>La,Endscreen:()=>q,EndscreenElement:()=>Pa,EngagementPanelSectionList:()=>ve,EngagementPanelTitleHeader:()=>ht,ExpandableMetadata:()=>Pt,ExpandableTab:()=>Va,ExpandableVideoDescriptionBody:()=>Tt,ExpandedShelfContents:()=>ja,Factoid:()=>$t,FancyDismissibleDialog:()=>Fa,FeedFilterChipBar:()=>$a,FeedTabbedHeader:()=>Ya,GameCard:()=>Et,GameDetails:()=>qa,Grid:()=>Xa,GridChannel:()=>Ja,GridHeader:()=>tr,GridMix:()=>ir,GridMovie:()=>nr,GridPlaylist:()=>ar,GridShow:()=>ur,GridVideo:()=>mr,GuideCollapsibleEntry:()=>gr,GuideCollapsibleSectionEntry:()=>br,GuideDownloadsEntry:()=>xr,GuideEntry:()=>vr,GuideSection:()=>Tr,GuideSubscriptionsSection:()=>Ir,HashtagHeader:()=>Er,HashtagTile:()=>Ar,HeatMarker:()=>sa,Heatmap:()=>oa,HeroPlaylistThumbnail:()=>Pr,HighlightsCarousel:()=>Nr,HistorySuggestion:()=>Ur,HorizontalCardList:()=>Ft,HorizontalList:()=>At,HorizontalMovieList:()=>Wr,IconLink:()=>Hr,IncludingResultsFor:()=>Gr,InfoPanelContainer:()=>zr,InfoPanelContent:()=>Kr,InfoRow:()=>te,InteractiveTabbedHeader:()=>Qr,ItemSection:()=>ol,ItemSectionHeader:()=>Zr,ItemSectionTab:()=>el,ItemSectionTabbedHeader:()=>sl,KidsCategoriesHeader:()=>iv,KidsCategoryTab:()=>tv,KidsHomeScreen:()=>nv,LikeButton:()=>rl,LiveChat:()=>cl,LiveChatActionPanel:()=>Jl,LiveChatAuthorBadge:()=>Pc,LiveChatAutoModMessage:()=>Sl,LiveChatBanner:()=>pl,LiveChatBannerHeader:()=>dl,LiveChatBannerPoll:()=>Cl,LiveChatDialog:()=>Dc,LiveChatHeader:()=>Lc,LiveChatItemList:()=>Vc,LiveChatMembershipItem:()=>kl,LiveChatMessageInput:()=>jc,LiveChatPaidMessage:()=>Rl,LiveChatPaidSticker:()=>Ml,LiveChatParticipant:()=>Fc,LiveChatParticipantsList:()=>$c,LiveChatPlaceholderItem:()=>Ol,LiveChatProductItem:()=>Nl,LiveChatRestrictedParticipation:()=>Bl,LiveChatTextMessage:()=>jl,LiveChatTickerPaidMessageItem:()=>Fl,LiveChatTickerPaidStickerItem:()=>$l,LiveChatTickerSponsorItem:()=>Yl,LiveChatViewerEngagementMessage:()=>ql,MacroMarkersInfoItem:()=>mt,MacroMarkersList:()=>gt,MacroMarkersListItem:()=>vt,MarkChatItemAsDeletedAction:()=>tc,MarkChatItemsByAuthorAsDeletedAction:()=>ic,Menu:()=>ut,MenuNavigationItem:()=>Yc,MenuPopup:()=>Xc,MenuServiceItem:()=>qc,MenuServiceItemDownload:()=>Jc,MerchandiseItem:()=>hh,MerchandiseShelf:()=>uh,Message:()=>Qo,MetadataBadge:()=>Dt,MetadataRow:()=>mh,MetadataRowContainer:()=>vh,MetadataRowHeader:()=>gh,MetadataScreen:()=>bh,MicroformatData:()=>xh,Mix:()=>Th,Movie:()=>Ih,MovingThumbnail:()=>Eh,MultiMarkersPlayerBar:()=>la,MultiPageMenu:()=>th,MultiPageMenuNotificationSection:()=>ih,MusicCardShelf:()=>jh,MusicCardShelfHeaderBasic:()=>Ah,MusicCarouselShelf:()=>pd,MusicCarouselShelfBasicHeader:()=>Fh,MusicDescriptionShelf:()=>fd,MusicDetailHeader:()=>yd,MusicDownloadStateBadge:()=>_d,MusicEditablePlaylistDetailHeader:()=>wd,MusicElementHeader:()=>Sd,MusicHeader:()=>Cd,MusicImmersiveHeader:()=>kd,MusicInlineBadge:()=>Ph,MusicItemThumbnailOverlay:()=>Lh,MusicLargeCardItemCarousel:()=>Md,MusicMenuItemDivider:()=>nh,MusicMultiRowListItem:()=>$h,MusicMultiSelectMenu:()=>ah,MusicMultiSelectMenuItem:()=>ge,MusicNavigationButton:()=>Yh,MusicPlayButton:()=>Dh,MusicPlaylistShelf:()=>Od,MusicQueue:()=>Wd,MusicResponsiveListItem:()=>cd,MusicResponsiveListItemFixedColumn:()=>qh,MusicResponsiveListItemFlexColumn:()=>Xh,MusicShelf:()=>Hd,MusicSideAlignedItem:()=>Gd,MusicSortFilterButton:()=>Kd,MusicTastebuilderShelf:()=>Qd,MusicTastebuilderShelfThumbnail:()=>zd,MusicThumbnail:()=>Vh,MusicTwoRowItem:()=>dd,MusicVisualHeader:()=>Zd,NavigationEndpoint:()=>U,Notification:()=>eu,OpenPopupAction:()=>B,PageHeader:()=>ou,PageHeaderView:()=>su,PageIntroduction:()=>ru,PdgCommentChip:()=>Ds,PlayerAnnotationsExpanded:()=>X,PlayerCaptionsTracklist:()=>J,PlayerErrorMessage:()=>cu,PlayerLegacyDesktopYpcOffer:()=>du,PlayerLegacyDesktopYpcTrailer:()=>fu,PlayerLiveStoryboardSpec:()=>tt,PlayerMicroformat:()=>yu,PlayerOverlay:()=>Su,PlayerOverlayAutoplay:()=>_u,PlayerStoryboardSpec:()=>it,Playlist:()=>Bo,PlaylistCustomThumbnail:()=>Oo,PlaylistHeader:()=>Cu,PlaylistInfoCardContent:()=>ku,PlaylistMetadata:()=>Ru,PlaylistPanel:()=>Ud,PlaylistPanelVideo:()=>Nd,PlaylistPanelVideoWrapper:()=>Bd,PlaylistSidebar:()=>Mu,PlaylistSidebarPrimaryInfo:()=>Ou,PlaylistSidebarSecondaryInfo:()=>Nu,PlaylistVideo:()=>Bu,PlaylistVideoList:()=>Uu,PlaylistVideoThumbnail:()=>No,Poll:()=>Wu,PollHeader:()=>Xl,Post:()=>Hu,PostMultiImage:()=>Gu,ProductList:()=>bt,ProductListHeader:()=>Ku,ProductListItem:()=>zu,ProfileColumn:()=>Qu,ProfileColumnStats:()=>Zu,ProfileColumnStatsEntry:()=>ep,ProfileColumnUserInfo:()=>sp,Quiz:()=>op,RecognitionShelf:()=>rp,ReelItem:()=>cp,ReelShelf:()=>dp,RelatedChipCloud:()=>pp,RemoveBannerForLiveChatCommand:()=>nc,RemoveChatItemAction:()=>ac,RemoveChatItemByAuthorAction:()=>lc,ReplaceChatItemAction:()=>hc,ReplayChatItemAction:()=>uc,RichGrid:()=>fp,RichItem:()=>yp,RichListHeader:()=>_p,RichMetadata:()=>wp,RichMetadataRow:()=>Sp,RichSection:()=>Cp,RichShelf:()=>kp,SearchBox:()=>Rp,SearchFilter:()=>Mp,SearchFilterGroup:()=>Op,SearchFilterOptionsDialog:()=>Np,SearchHeader:()=>Bp,SearchRefinementCard:()=>It,SearchSubMenu:()=>Up,SearchSuggestion:()=>Br,SearchSuggestionsSection:()=>Wp,SecondarySearchContainer:()=>Hp,SectionList:()=>xt,SegmentedLikeDislikeButton:()=>Gp,SettingBoolean:()=>Kp,SettingsCheckbox:()=>zp,SettingsOptions:()=>Zp,SettingsSidebar:()=>em,SettingsSwitch:()=>Qp,SharedPost:()=>sm,Shelf:()=>om,ShowCustomThumbnail:()=>lr,ShowLiveChatActionPanelAction:()=>mc,ShowLiveChatDialogAction:()=>vc,ShowLiveChatTooltipCommand:()=>gc,ShowingResultsFor:()=>rm,SimpleCardContent:()=>cm,SimpleCardTeaser:()=>dm,SimpleMenuHeader:()=>lh,SimpleTextSection:()=>pm,SingleActionEmergencySupport:()=>fm,SingleColumnBrowseResults:()=>_m,SingleColumnMusicWatchNextResults:()=>wm,SingleHeroImage:()=>Sm,SlimOwner:()=>Cm,SlimVideoMetadata:()=>km,SortFilterSubMenu:()=>De,SponsorCommentBadge:()=>Ls,StatRow:()=>ui,StructuredDescriptionContent:()=>me,StructuredDescriptionPlaylistLockup:()=>he,SubFeedOption:()=>Rm,SubFeedSelector:()=>Mm,SubscribeButton:()=>Ui,SubscriptionNotificationToggleButton:()=>Bi,Tab:()=>ym,Tabbed:()=>Om,TabbedSearchResults:()=>Nm,TextHeader:()=>Bm,ThumbnailLandscapePortrait:()=>Um,ThumbnailOverlayBottomPanel:()=>hr,ThumbnailOverlayEndorsement:()=>Wm,ThumbnailOverlayHoverText:()=>Hm,ThumbnailOverlayInlineUnplayable:()=>Gm,ThumbnailOverlayLoadingPreview:()=>Km,ThumbnailOverlayNowPlaying:()=>zm,ThumbnailOverlayPinking:()=>Qm,ThumbnailOverlayPlaybackStatus:()=>Zm,ThumbnailOverlayResumePlayback:()=>ef,ThumbnailOverlaySidePanel:()=>nf,ThumbnailOverlayTimeStatus:()=>Lt,ThumbnailOverlayToggleButton:()=>af,TimedMarkerDecoration:()=>lf,TitleAndButtonListHeader:()=>hf,ToggleButton:()=>gi,ToggleMenuServiceItem:()=>uf,Tooltip:()=>mf,TopicChannelDetails:()=>vf,Transcript:()=>qe,TranscriptFooter:()=>Le,TranscriptSearchBox:()=>Ve,TranscriptSearchPanel:()=>Ye,TranscriptSectionHeader:()=>je,TranscriptSegment:()=>Fe,TranscriptSegmentList:()=>$e,TwoColumnBrowseResults:()=>gf,TwoColumnSearchResults:()=>bf,TwoColumnWatchNextResults:()=>Tf,UniversalWatchCard:()=>If,UpdateDateTextAction:()=>bc,UpdateDescriptionAction:()=>xc,UpdateEngagementPanelAction:()=>Xe,UpdateLiveChatPollAction:()=>Tc,UpdateTitleAction:()=>Ic,UpdateToggleButtonTextAction:()=>Ec,UpdateViewershipAction:()=>Ac,UploadTimeFactoid:()=>Yt,UpsellDialog:()=>Ef,VerticalList:()=>Af,VerticalWatchCardList:()=>Pf,Video:()=>Vt,VideoCard:()=>jt,VideoDescriptionCourseSection:()=>ue,VideoDescriptionHeader:()=>Xt,VideoDescriptionInfocardsSection:()=>Jt,VideoDescriptionMusicSection:()=>ae,VideoDescriptionTranscriptSection:()=>le,VideoInfoCardContent:()=>Df,VideoOwner:()=>Lf,VideoPrimaryInfo:()=>Vf,VideoSecondaryInfo:()=>jf,ViewCountFactoid:()=>qt,WatchCardCompactVideo:()=>Ff,WatchCardHeroVideo:()=>$f,WatchCardRichHeader:()=>Yf,WatchCardSectionSequence:()=>qf,WatchNextEndScreen:()=>wu,WatchNextTabbedResults:()=>Xf,YpcTrailer:()=>pu});var i={};t.r(i),t.d(i,{addRuntimeParser:()=>Gv,applyMutations:()=>iy,getDynamicParsers:()=>Yv,getParserByName:()=>Hv,hasParser:()=>$v,parse:()=>Xv,parseActions:()=>ty,parseArray:()=>zv,parseC:()=>Qv,parseFormats:()=>ey,parseItem:()=>qv,parseLC:()=>Jv,parseRR:()=>Zv,parseResponse:()=>Kv,sanitizeClassName:()=>Fv,setParserErrorHandler:()=>Bv,shouldIgnore:()=>Wv});var s,n,o,a,r,l,c,h={};function d(t,e,i,s){return new(i||(i=Promise))((function(n,o){function a(t){try{l(s.next(t))}catch(t){o(t)}}function r(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,r)}l((s=s.apply(t,e||[])).next())}))}function u(t){return this instanceof u?(this.v=t,this):new u(t)}function p(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(i){e[i]=t[i]&&function(e){return new Promise((function(s,n){!function(t,e,i,s){Promise.resolve(s).then((function(e){t({value:e,done:i})}),e)}(s,n,(e=t[i](e)).done,e.value)}))}}}function m(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)}function f(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i}t.r(h),t.d(h,{ArrayExpression:()=>Ob,ArrowFunctionExpression:()=>Nb,AssignmentExpression:()=>Lb,BinaryExpression:()=>Bb,BlockStatement:()=>Vb,BreakStatement:()=>Ub,CallExpression:()=>Hb,ConditionalExpression:()=>Gb,ContinueStatement:()=>Yb,ExpressionStatement:()=>Kb,ForOfStatement:()=>qb,ForStatement:()=>zb,FunctionDeclaration:()=>Xb,FunctionExpression:()=>Qb,Identifier:()=>Jb,IfStatement:()=>Zb,Literal:()=>tw,LogicalExpression:()=>ew,MemberExpression:()=>iw,NewExpression:()=>sw,ObjectExpression:()=>nw,Property:()=>hw,ReturnStatement:()=>dw,SequenceExpression:()=>uw,SwitchCase:()=>pw,SwitchStatement:()=>mw,ThisExpression:()=>fw,ThrowStatement:()=>vw,TryStatement:()=>yw,UnaryExpression:()=>gw,UpdateExpression:()=>_w,VariableDeclaration:()=>bw,WhileStatement:()=>ww}),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const v=Symbol("ObservedArray.isObserved");class y{constructor(){s.add(this),this.type=this.constructor.type}is(...t){return t.some((t=>m(this,s,"m",n).call(this,t)))}as(...t){if(!this.is(...t))throw new vb(`Cannot cast ${this.type} to one of ${t.map((t=>t.type)).join(", ")}`);return this}hasKey(t){return Reflect.has(this,t)}key(t){if(!this.hasKey(t))throw new vb(`Missing key ${t}`);return new g(this[t])}}s=new WeakSet,n=function(t){return this.type===t.type},y.type="YTNode";class g{constructor(t){o.add(this),a.set(this,void 0),f(this,a,t,"f")}get typeof(){return typeof m(this,a,"f")}string(){return m(this,o,"m",l).call(this,"string")}isString(){return m(this,o,"m",r).call(this,"string")}number(){return m(this,o,"m",l).call(this,"number")}isNumber(){return m(this,o,"m",r).call(this,"number")}bigint(){return m(this,o,"m",l).call(this,"bigint")}isBigint(){return m(this,o,"m",r).call(this,"bigint")}boolean(){return m(this,o,"m",l).call(this,"boolean")}isBoolean(){return m(this,o,"m",r).call(this,"boolean")}symbol(){return m(this,o,"m",l).call(this,"symbol")}isSymbol(){return m(this,o,"m",r).call(this,"symbol")}undefined(){return m(this,o,"m",l).call(this,"undefined")}isUndefined(){return m(this,o,"m",r).call(this,"undefined")}null(){if(null!==m(this,a,"f"))throw new TypeError("Expected null, got "+typeof m(this,a,"f"));return m(this,a,"f")}isNull(){return null===m(this,a,"f")}object(){return m(this,o,"m",l).call(this,"object")}isObject(){return m(this,o,"m",r).call(this,"object")}function(){return m(this,o,"m",l).call(this,"function")}isFunction(){return m(this,o,"m",r).call(this,"function")}array(){if(!Array.isArray(m(this,a,"f")))throw new TypeError("Expected array, got "+typeof m(this,a,"f"));return m(this,a,"f")}arrayOfMaybe(){const t=[];return new Proxy(this.array(),{get:(e,i)=>Reflect.has(t,i)?Reflect.get(e,i):new g(Reflect.get(e,i))})}isArray(){return Array.isArray(m(this,a,"f"))}node(){if(!(m(this,a,"f")instanceof y))throw new TypeError(`Expected YTNode, got ${m(this,a,"f").constructor.name}`);return m(this,a,"f")}isNode(){return m(this,a,"f")instanceof y}nodeOfType(...t){return this.node().as(...t)}isNodeOfType(...t){return this.isNode()&&this.node().is(...t)}observed(){if(!this.isObserved())throw new TypeError("Expected ObservedArray, got "+typeof m(this,a,"f"));return m(this,a,"f")}isObserved(){var t;return null===(t=m(this,a,"f"))||void 0===t?void 0:t[v]}parsed(){if(!(m(this,a,"f")instanceof _))throw new TypeError("Expected SuperParsedResult, got "+typeof m(this,a,"f"));return m(this,a,"f")}isParsed(){return m(this,a,"f")instanceof _}any(){return console.warn("This call is not meant to be used outside of debugging. Please use the specific type getter instead."),m(this,a,"f")}instanceof(t){if(!this.isInstanceof(t))throw new TypeError(`Expected instance of ${t.name}, got ${m(this,a,"f").constructor.name}`);return m(this,a,"f")}isInstanceof(t){return m(this,a,"f")instanceof t}}a=new WeakMap,o=new WeakSet,r=function(t){return typeof m(this,a,"f")===t},l=function(t){if(!m(this,o,"m",r).call(this,t))throw new TypeError(`Expected ${t}, got ${this.typeof}`);return m(this,a,"f")};class _{constructor(t){c.set(this,void 0),f(this,c,t,"f")}get is_null(){return null===m(this,c,"f")}get is_array(){return!this.is_null&&Array.isArray(m(this,c,"f"))}get is_node(){return!this.is_array}array(){if(!this.is_array)throw new TypeError("Expected an array, got a node");return m(this,c,"f")}item(){if(!this.is_node)throw new TypeError("Expected a node, got an array");return m(this,c,"f")}}function b(t){return new Proxy(t,{get:(t,e)=>"get"==e?(e,i)=>t.find(((s,n)=>{const o=xb(e,s);return o&&i&&t.splice(n,1),o})):e==v||("getAll"==e?(e,i)=>t.filter(((s,n)=>{const o=xb(e,s);return o&&i&&t.splice(n,1),o})):"matchCondition"==e?e=>t.find((t=>e(t))):"filterType"==e?(...e)=>b(t.filter((t=>!!t.is(...e)))):"firstOfType"==e?(...e)=>t.find((t=>!!t.is(...e))):"first"==e?()=>t[0]:"as"==e?(...e)=>b(t.map((t=>{if(t.is(...e))return t;throw new vb(`Expected node of any type ${e.map((t=>t.type)).join(", ")}, got ${t.type}`)}))):"remove"==e?e=>t.splice(e,1):Reflect.get(t,e))})}c=new WeakMap;class w extends Map{getType(...t){return b((t=t.flat()).flatMap((t=>this.get(t.type)||[])))}}const x=Object.freeze({YT_BASE:"https://www.youtube.com",YT_MUSIC_BASE:"https://music.youtube.com",YT_SUGGESTIONS:"https://suggestqueries.google.com/complete/",YT_UPLOAD:"https://upload.youtube.com/",API:Object.freeze({BASE:"https://youtubei.googleapis.com",PRODUCTION_1:"https://www.youtube.com/youtubei/",PRODUCTION_2:"https://youtubei.googleapis.com/youtubei/",STAGING:"https://green-youtubei.sandbox.googleapis.com/youtubei/",RELEASE:"https://release-youtubei.sandbox.googleapis.com/youtubei/",TEST:"https://test-youtubei.sandbox.googleapis.com/youtubei/",CAMI:"http://cami-youtubei.sandbox.googleapis.com/youtubei/",UYTFE:"https://uytfe.sandbox.google.com/youtubei/"})}),S=Object.freeze({SCOPE:"http://gdata.youtube.com https://www.googleapis.com/auth/youtube-paid-content",GRANT_TYPE:"http://oauth.net/grant_type/device/1.0",MODEL_NAME:"ytlr::",HEADERS:Object.freeze({accept:"*/*",origin:"https://www.youtube.com","user-agent":"Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version","content-type":"application/json",referer:"https://www.youtube.com/tv","accept-language":"en-US"}),REGEX:Object.freeze({AUTH_SCRIPT:/<script id="base-js" src="(.*?)" nonce=".*?"><\/script>/,CLIENT_IDENTITY:/var .+?={clientId:"(?<client_id>.+?)",.+?:"(?<client_secret>.+?)".+?}/})}),T=Object.freeze({iOS:{NAME:"iOS",VERSION:"18.06.35",USER_AGENT:"com.google.ios.youtube/18.06.35 (iPhone; CPU iPhone OS 14_4 like Mac OS X; en_US)",DEVICE_MODEL:"iPhone10,6"},WEB:{NAME:"WEB",VERSION:"2.20230622.06.00",API_KEY:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",API_VERSION:"v1",STATIC_VISITOR_ID:"6zpwvWUNAco"},WEB_KIDS:{NAME:"WEB_KIDS",VERSION:"2.20230111.00.00"},YTMUSIC:{NAME:"WEB_REMIX",VERSION:"1.20211213.00.00"},ANDROID:{NAME:"ANDROID",VERSION:"18.06.35",SDK_VERSION:"29",USER_AGENT:"com.google.android.youtube/18.06.35 (Linux; U; Android 10; US)"},YTSTUDIO_ANDROID:{NAME:"ANDROID_CREATOR",VERSION:"22.43.101"},YTMUSIC_ANDROID:{NAME:"ANDROID_MUSIC",VERSION:"5.34.51"},TV_EMBEDDED:{NAME:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",VERSION:"2.0"}}),C=Object.freeze({accept:"*/*",origin:"https://www.youtube.com",referer:"https://www.youtube.com",DNT:"?1"});Object.freeze({accept:"*/*","accept-encoding":"gzip, deflate","content-type":"application/json"});class I extends y{constructor(t){super(),this.audio_only_availability=t.audioOnlyAvailability}}I.type="AudioOnlyPlayability";const k=I;class E extends y{constructor(t){super(),Reflect.has(t,"text")&&(this.text=new $(t.text).toString()),Reflect.has(t,"accessibility")&&Reflect.has(t.accessibility,"label")&&(this.label=t.accessibility.label),Reflect.has(t,"tooltip")&&(this.tooltip=t.tooltip),Reflect.has(t,"icon")&&Reflect.has(t.icon,"iconType")&&(this.icon_type=t.icon.iconType),Reflect.has(t,"isDisabled")&&(this.is_disabled=t.isDisabled),this.endpoint=new U(t.navigationEndpoint||t.serviceEndpoint||t.command)}}E.type="Button";const R=E;class A extends y{constructor(t){var e;super(),this.label=new $(t.label).toString(),this.selected=!!t.isSelected,Reflect.has(t,"int32Value")?this.value=t.int32Value:t.stringValue&&(this.value=t.stringValue),Reflect.has(t,"onSelectCommand")&&(this.endpoint=new U(t.onSelectCommand)),Reflect.has(t,"icon")&&(this.icon_type=null===(e=t.icon)||void 0===e?void 0:e.iconType),Reflect.has(t,"descriptionText")&&(this.description=new $(t.descriptionText))}}A.type="DropdownItem";const M=A;class P extends y{constructor(t){super(),this.label=t.label||"",this.entries=lb.parseArray(t.entries,M)}}P.type="Dropdown";const O=P;class D extends y{constructor(t){super(),this.title=new $(t.dialogTitle).toString(),this.title_placeholder=t.titlePlaceholder||"",this.privacy_option=lb.parseItem(t.privacyOption,O),this.create_button=lb.parseItem(t.cancelButton,R),this.cancel_button=lb.parseItem(t.cancelButton,R)}}D.type="CreatePlaylistDialog";const N=D;class L extends y{constructor(t){super(),this.popup=lb.parseItem(t.popup),this.popup_type=t.popupType}}L.type="OpenPopupAction";const B=L;class V extends y{constructor(t){var e,i,s,n,o,a,r,l;super(),Reflect.has(t||{},"innertubeCommand")&&(t=t.innertubeCommand),Reflect.has(t||{},"openPopupAction")&&(this.open_popup=new B(t.openPopupAction));const c=Object.keys(t||{}).find((t=>t.endsWith("Endpoint")||t.endsWith("Command")));this.payload=c?Reflect.get(t,c):{},(Reflect.has(this.payload,"dialog")||Reflect.has(this.payload,"content"))&&(this.dialog=lb.parseItem(this.payload.dialog||this.payload.content)),(null==t?void 0:t.serviceEndpoint)&&(t=t.serviceEndpoint),this.metadata={},(null===(i=null===(e=null==t?void 0:t.commandMetadata)||void 0===e?void 0:e.webCommandMetadata)||void 0===i?void 0:i.url)&&(this.metadata.url=t.commandMetadata.webCommandMetadata.url),(null===(n=null===(s=null==t?void 0:t.commandMetadata)||void 0===s?void 0:s.webCommandMetadata)||void 0===n?void 0:n.webPageType)&&(this.metadata.page_type=t.commandMetadata.webCommandMetadata.webPageType),(null===(a=null===(o=null==t?void 0:t.commandMetadata)||void 0===o?void 0:o.webCommandMetadata)||void 0===a?void 0:a.apiUrl)?this.metadata.api_url=t.commandMetadata.webCommandMetadata.apiUrl.replace("/youtubei/v1/",""):c&&(this.metadata.api_url=this.getEndpoint(c)),(null===(l=null===(r=null==t?void 0:t.commandMetadata)||void 0===r?void 0:r.webCommandMetadata)||void 0===l?void 0:l.sendPost)&&(this.metadata.send_post=t.commandMetadata.webCommandMetadata.sendPost),(null==t?void 0:t.createPlaylistEndpoint)&&(null==t?void 0:t.createPlaylistEndpoint.createPlaylistDialog)&&(this.dialog=lb.parseItem(null==t?void 0:t.createPlaylistEndpoint.createPlaylistDialog,N))}getEndpoint(t){switch(t){case"browseEndpoint":return"/browse";case"watchEndpoint":return"/player";case"searchEndpoint":return"/search";case"watchPlaylistEndpoint":return"/next";case"liveChatItemContextMenuEndpoint":return"live_chat/get_item_context_menu"}}call(t,e){if(!t)throw new Error("An active caller must be provided");if(!this.metadata.api_url)throw new Error("Expected an api_url, but none was found, this is a bug.");return t.execute(this.metadata.api_url,Object.assign(Object.assign({},this.payload),e))}toURL(){if(this.metadata.url&&this.metadata.page_type)return"WEB_PAGE_TYPE_UNKNOWN"===this.metadata.page_type?this.metadata.url:`https://www.youtube.com${this.metadata.url}`}}V.type="NavigationEndpoint";const U=V;class j{constructor(t){this.url=t.url,this.width=t.width,this.height=t.height}static fromResponse(t){return t&&t.thumbnails?t.thumbnails.map((t=>new j(t))).sort(((t,e)=>e.width-t.width)):[]}}class W{constructor(t){var e,i,s,n,o,a;this.text=(null===(e=t.emoji)||void 0===e?void 0:e.emojiId)||(null===(s=null===(i=t.emoji)||void 0===i?void 0:i.shortcuts)||void 0===s?void 0:s[0])||"",this.emoji={emoji_id:t.emoji.emojiId,shortcuts:(null===(n=t.emoji)||void 0===n?void 0:n.shortcuts)||[],search_terms:(null===(o=t.emoji)||void 0===o?void 0:o.searchTerms)||[],image:j.fromResponse(t.emoji.image),is_custom:!!(null===(a=t.emoji)||void 0===a?void 0:a.isCustomEmoji)}}toString(){return this.text}toHTML(){const t=H(this.text);return`<img src="${this.emoji.image[0].url}" alt="${t}" title="${t}" style="display: inline-block; vertical-align: text-top; height: var(--yt-emoji-size, 1rem); width: var(--yt-emoji-size, 1rem);" loading="lazy" crossorigin="anonymous" />`}}class F{constructor(t){this.text=t.text,this.bold=Boolean(t.bold),this.italics=Boolean(t.italics),this.strikethrough=Boolean(t.strikethrough),Reflect.has(t,"navigationEndpoint")&&(this.endpoint=new U(t.navigationEndpoint)),this.attachment=t.attachment}toString(){return this.text}toHTML(){const t=[];this.bold&&t.push("b"),this.italics&&t.push("i"),this.strikethrough&&t.push("s");const e=H(this.text),i=`<span style="white-space: pre-wrap;">${t.map((t=>`<${t}>`)).join("")+e+t.map((t=>`</${t}>`)).join("")}</span>`;if(this.attachment&&this.attachment.element.type.imageType.image.sources.length){const{url:t}=this.attachment.element.type.imageType.image.sources[0];if(this.endpoint){const e=this.endpoint.toURL();if(e)return`<a href="${e}" class="yt-ch-link" display: block; width: fit-content; font-size: small;><img src="${t}" style="vertical-align: middle; height: ${this.attachment.element.properties.layoutProperties.height.value}px; width: ${this.attachment.element.properties.layoutProperties.width.value}px;">${i}</a>`}}if(this.endpoint){const t=this.endpoint.toURL();if(t)return`<a href="${t}">${i}</a>`}return i}}function H(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}class ${constructor(t){var e,i,s,n;"object"==typeof t&&null!==t&&Reflect.has(t,"runs")&&Array.isArray(t.runs)?(this.runs=t.runs.map((t=>t.emoji?new W(t):new F(t))),this.text=this.runs.map((t=>t.text)).join("")):this.text=null==t?void 0:t.simpleText,"object"==typeof t&&null!==t&&Reflect.has(t,"navigationEndpoint")&&(this.endpoint=new U(t.navigationEndpoint)),"object"==typeof t&&null!==t&&Reflect.has(t,"titleNavigationEndpoint")&&(this.endpoint=new U(t.titleNavigationEndpoint)),this.endpoint||(null===(i=null===(e=this.runs)||void 0===e?void 0:e[0])||void 0===i?void 0:i.endpoint)&&(this.endpoint=null===(n=null===(s=this.runs)||void 0===s?void 0:s[0])||void 0===n?void 0:n.endpoint)}static fromAttributed(t){const e=[],i=t.content,s=t.commandRuns;let n=0;if(s){for(const o of s){const s=o.length,a=o.startIndex;if(a>n&&e.push({text:i.slice(n,a)}),Reflect.has(o,"onTap")){let n=null;if(Reflect.has(t,"attachmentRuns")){const e=t.attachmentRuns;for(const t of e)if(t.startIndex-2==a){n=t;break}}n?e.push({text:i.slice(a,a+s),navigationEndpoint:o.onTap,attachment:n}):e.push({text:i.slice(a,a+s),navigationEndpoint:o.onTap})}n=a+s}n<i.length&&e.push({text:i.slice(n)})}else e.push({text:i});return new $({runs:e})}toHTML(){return this.runs?this.runs.map((t=>t.toHTML())).join(""):this.text}isEmpty(){return void 0===this.text}toString(){return this.text||"N/A"}}class G extends y{constructor(t){super(),this.cards=lb.parseArray(t.cards),this.header=new $(t.headerText),this.allow_teaser_dismiss=t.allowTeaserDismiss}}G.type="CardCollection";const Y=G;class K extends y{constructor(t){super(),this.elements=lb.parseArray(t.elements),this.start_ms=t.startMs}}K.type="Endscreen";const q=K;class z extends y{constructor(t){super(),Reflect.has(t,"featuredChannel")&&(this.featured_channel={start_time_ms:t.featuredChannel.startTimeMs,end_time_ms:t.featuredChannel.endTimeMs,watermark:j.fromResponse(t.featuredChannel.watermark),channel_name:t.featuredChannel.channelName,endpoint:new U(t.featuredChannel.navigationEndpoint),subscribe_button:lb.parseItem(t.featuredChannel.subscribeButton)}),this.allow_swipe_dismiss=t.allowSwipeDismiss,this.annotation_id=t.annotationId}}z.type="PlayerAnnotationsExpanded";const X=z;class Q extends y{constructor(t){super(),Reflect.has(t,"captionTracks")&&(this.caption_tracks=t.captionTracks.map((t=>({base_url:t.baseUrl,name:new $(t.name),vss_id:t.vssId,language_code:t.languageCode,kind:t.kind,is_translatable:t.isTranslatable})))),Reflect.has(t,"audioTracks")&&(this.audio_tracks=t.audioTracks.map((t=>({audio_track_id:t.audioTrackId,captions_initial_state:t.captionsInitialState,default_caption_track_index:t.defaultCaptionTrackIndex,has_default_track:t.hasDefaultTrack,visibility:t.visibility,caption_track_indices:t.captionTrackIndices})))),Reflect.has(t,"defaultAudioTrackIndex")&&(this.default_audio_track_index=t.defaultAudioTrackIndex),Reflect.has(t,"translationLanguages")&&(this.translation_languages=t.translationLanguages.map((t=>({language_code:t.languageCode,language_name:new $(t.languageName)}))))}}Q.type="PlayerCaptionsTracklist";const J=Q;class Z extends y{constructor(){super()}}Z.type="PlayerLiveStoryboardSpec";const tt=Z;class et extends y{constructor(t){super();const e=t.spec.split("|"),i=new URL(e.shift());this.boards=e.map(((t,e)=>{const[s,n,o,a,r,l,c,h]=t.split("#");i.searchParams.set("sigh",h);const d=Math.ceil(parseInt(o,10)/(parseInt(a,10)*parseInt(r,10)));return{template_url:i.toString().replace("$L",e).replace("$N",c),thumbnail_width:parseInt(s,10),thumbnail_height:parseInt(n,10),thumbnail_count:parseInt(o,10),interval:parseInt(l,10),columns:parseInt(a,10),rows:parseInt(r,10),storyboard_count:d}}))}}et.type="PlayerStoryboardSpec";const it=et;class st extends y{constructor(t){super(),this.text=new $(t.text),this.alert_type=t.type}}st.type="Alert";const nt=st;class ot extends y{constructor(t){super(),this.text=new $(t.text),this.alert_type=t.type,this.dismiss_button=qv(t.dismissButton,R)}}ot.type="AlertWithButton";const at=ot;class rt extends y{constructor(t){super(),this.trigger=t.trigger,Reflect.has(t,"button")&&(this.button=lb.parseItem(t.button,R)),this.endpoint=new U(t.continuationEndpoint)}}rt.type="ContinuationItem";const lt=rt;class ct extends y{constructor(t){super(),this.title=new $(t.title),this.visibility_button=qv(t.visibilityButton,R)}}ct.type="EngagementPanelTitleHeader";const ht=ct;class dt extends y{constructor(t){super(),this.items=lb.parseArray(t.items),this.top_level_buttons=lb.parseArray(t.topLevelButtons),Reflect.has(t,"accessibility")&&Reflect.has(t.accessibility,"accessibilityData")&&(this.label=t.accessibility.accessibilityData.label)}get contents(){return this.items}}dt.type="Menu";const ut=dt;class pt extends y{constructor(t){super(),this.info_text=new $(t.infoText),this.menu=qv(t.menu,ut)}}pt.type="MacroMarkersInfoItem";const mt=pt;class ft extends y{constructor(t){super(),this.title=new $(t.title),this.time_description=new $(t.timeDescription),this.thumbnail=j.fromResponse(t.thumbnail),this.on_tap_endpoint=new U(t.onTap),this.layout=t.layout,this.is_highlighted=!!t.isHighlighted}}ft.type="MacroMarkersListItem";const vt=ft;class yt extends y{constructor(t){super(),this.contents=zv(t.contents,[mt,vt]),this.sync_button_label=new $(t.syncButtonLabel)}}yt.type="MacroMarkersList";const gt=yt;class _t extends y{constructor(t){super(),this.contents=lb.parseArray(t.contents)}}_t.type="ProductList";const bt=_t;class wt extends y{constructor(t){super(),this.contents=lb.parseArray(t.contents),Reflect.has(t,"targetId")&&(this.target_id=t.targetId),Reflect.has(t,"continuations")&&(Reflect.has(t.continuations[0],"nextContinuationData")?this.continuation=t.continuations[0].nextContinuationData.continuation:Reflect.has(t.continuations[0],"reloadContinuationData")&&(this.continuation=t.continuations[0].reloadContinuationData.continuation)),Reflect.has(t,"header")&&(this.header=lb.parseItem(t.header)),Reflect.has(t,"subMenu")&&(this.sub_menu=lb.parseItem(t.subMenu))}}wt.type="SectionList";const xt=wt;class St extends y{constructor(t){var e;super(),this.show_more_text=new $(t.showMoreText),this.show_less_text=new $(t.showLessText),Reflect.has(t,"attributedDescriptionBodyText")&&(this.attributed_description_body_text=null===(e=t.attributedDescriptionBodyText)||void 0===e?void 0:e.content)}}St.type="ExpandableVideoDescriptionBody";const Tt=St;class Ct extends y{constructor(t){super(),this.thumbnails=j.fromResponse(t.thumbnail),this.endpoint=new U(t.searchEndpoint),this.query=new $(t.query).toString()}}Ct.type="SearchRefinementCard";const It=Ct;class kt extends y{constructor(t){super(),this.game=lb.parseItem(t.game)}}kt.type="GameCard";const Et=kt;class Rt extends y{constructor(t){super(),this.visible_item_count=t.visibleItemCount,this.items=lb.parseArray(t.items)}get contents(){return this.items}}Rt.type="HorizontalList";const At=Rt;class Mt extends y{constructor(t){super(),Reflect.has(t,"header")&&(this.header={collapsed_title:new $(t.header.collapsedTitle),collapsed_thumbnail:j.fromResponse(t.header.collapsedThumbnail),collapsed_label:new $(t.header.collapsedLabel),expanded_title:new $(t.header.expandedTitle)}),this.expanded_content=lb.parseItem(t.expandedContent,[Ft,At]),this.expand_button=lb.parseItem(t.expandButton,R),this.collapse_button=lb.parseItem(t.collapseButton,R)}}Mt.type="ExpandableMetadata";const Pt=Mt;class Ot extends y{constructor(t){super(),Reflect.has(t,"icon")&&(this.icon_type=t.icon.iconType),Reflect.has(t,"style")&&(this.style=t.style),Reflect.has(t,"label")&&(this.label=t.label),(Reflect.has(t,"tooltip")||Reflect.has(t,"iconTooltip"))&&(this.tooltip=t.tooltip||t.iconTooltip)}}Ot.type="MetadataBadge";const Dt=Ot;class Nt extends y{constructor(t){super(),this.text=new $(t.text).toString(),this.style=t.style}}Nt.type="ThumbnailOverlayTimeStatus";const Lt=Nt;class Bt extends y{constructor(t){var e,i,s;super();const n=(null===(e=t.thumbnailOverlays.find((t=>t.thumbnailOverlayTimeStatusRenderer)))||void 0===e?void 0:e.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=t.videoId,this.title=new $(t.title),Reflect.has(t,"descriptionSnippet")&&(this.description_snippet=new $(t.descriptionSnippet)),Reflect.has(t,"detailedMetadataSnippets")&&(this.snippets=t.detailedMetadataSnippets.map((t=>({text:new $(t.snippetText),hover_text:new $(t.snippetHoverText)})))),this.expandable_metadata=lb.parseItem(t.expandableMetadata,Pt),this.thumbnails=j.fromResponse(t.thumbnail),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays),Reflect.has(t,"richThumbnail")&&(this.rich_thumbnail=lb.parseItem(t.richThumbnail)),this.author=new hb(t.ownerText,t.ownerBadges,null===(s=null===(i=t.channelThumbnailSupportedRenderers)||void 0===i?void 0:i.channelThumbnailWithLinkRenderer)||void 0===s?void 0:s.thumbnail),this.badges=lb.parseArray(t.badges,Dt),this.endpoint=new U(t.navigationEndpoint),this.published=new $(t.publishedTimeText),this.view_count=new $(t.viewCountText),this.short_view_count=new $(t.shortViewCountText),Reflect.has(t,"upcomingEventData")&&(this.upcoming=new Date(Number(`${t.upcomingEventData.startTime}000`))),this.duration={text:t.lengthText?new $(t.lengthText).toString():new $(n).toString(),seconds:kb(t.lengthText?new $(t.lengthText).toString():new $(n).toString())},this.show_action_menu=!!t.showActionMenu,this.is_watched=!!t.isWatched,this.menu=lb.parseItem(t.menu,ut),Reflect.has(t,"searchVideoResultEntityKey")&&(this.search_video_result_entity_key=t.searchVideoResultEntityKey)}get description(){var t;return this.snippets?this.snippets.map((t=>t.text.toString())).join(""):(null===(t=this.description_snippet)||void 0===t?void 0:t.toString())||""}get is_live(){var t;return this.badges.some((t=>{if("BADGE_STYLE_TYPE_LIVE_NOW"===t.style||"LIVE"===t.label)return!0}))||"LIVE"===(null===(t=this.thumbnail_overlays.firstOfType(Lt))||void 0===t?void 0:t.style)}get is_upcoming(){return this.upcoming&&this.upcoming>new Date}get is_premiere(){return this.badges.some((t=>"PREMIERE"===t.label))}get is_4k(){return this.badges.some((t=>"4K"===t.label))}get has_captions(){return this.badges.some((t=>"CC"===t.label))}get best_thumbnail(){return this.thumbnails[0]}}Bt.type="Video";const Vt=Bt;class Ut extends Vt{constructor(t){super(t)}}Ut.type="VideoCard";const jt=Ut;class Wt extends y{constructor(t){super(),this.cards=lb.parseArray(t.cards,[It,vt,Et,jt]),this.header=lb.parseItem(t.header),this.previous_button=lb.parseItem(t.previousButton,R),this.next_button=lb.parseItem(t.nextButton,R)}}Wt.type="HorizontalCardList";const Ft=Wt;class Ht extends y{constructor(t){super(),this.label=new $(t.label),this.value=new $(t.value),this.accessibility_text=t.accessibilityText}}Ht.type="Factoid";const $t=Ht;class Gt extends y{constructor(t){super(),this.factoid=lb.parseItem(t.factoid,$t)}}Gt.type="UploadTimeFactoid";const Yt=Gt;class Kt extends y{constructor(t){super(),this.view_count_entity_key=t.viewCountEntityKey,this.factoid=lb.parseItem(t.factoid,[$t]),this.view_count_type=t.viewCountType}}Kt.type="ViewCountFactoid";const qt=Kt;class zt extends y{constructor(t){super(),this.title=new $(t.title),this.channel=new $(t.channel),this.channel_navigation_endpoint=new U(t.channelNavigationEndpoint),this.channel_thumbnail=j.fromResponse(t.channelThumbnail),this.publish_date=new $(t.publishDate),this.views=new $(t.views),this.factoids=lb.parseArray(t.factoid,[$t,qt,Yt])}}zt.type="VideoDescriptionHeader";const Xt=zt;class Qt extends y{constructor(t){super(),this.section_title=new $(t.sectionTitle),this.creator_videos_button=lb.parseItem(t.creatorVideosButton,R),this.creator_about_button=lb.parseItem(t.creatorAboutButton,R),this.section_subtitle=new $(t.sectionSubtitle),this.channel_avatar=j.fromResponse(t.channelAvatar),this.channel_endpoint=new U(t.channelEndpoint)}}Qt.type="VideoDescriptionInfocardsSection";const Jt=Qt;class Zt extends y{constructor(t){super(),this.title=new $(t.title),Reflect.has(t,"defaultMetadata")&&(this.default_metadata=new $(t.defaultMetadata)),Reflect.has(t,"expandedMetadata")&&(this.expanded_metadata=new $(t.expandedMetadata)),Reflect.has(t,"infoRowExpandStatusKey")&&(this.info_row_expand_status_key=t.infoRowExpandStatusKey)}}Zt.type="InfoRow";const te=Zt;class ee extends y{constructor(t){super(),this.id=t.videoId,this.thumbnails=j.fromResponse(t.thumbnail)||null,Reflect.has(t,"richThumbnail")&&(this.rich_thumbnail=lb.parse(t.richThumbnail)),this.title=new $(t.title),this.author=new hb(t.longBylineText,t.ownerBadges,t.channelThumbnail),this.view_count=new $(t.viewCountText),this.short_view_count=new $(t.shortViewCountText),this.published=new $(t.publishedTimeText),this.badges=lb.parseArray(t.badges,Dt),this.duration={text:new $(t.lengthText).toString(),seconds:kb(new $(t.lengthText).toString())},this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays),this.endpoint=new U(t.navigationEndpoint),this.menu=lb.parseItem(t.menu,ut)}get best_thumbnail(){return this.thumbnails[0]}get is_fundraiser(){return this.badges.some((t=>"Fundraiser"===t.label))}get is_live(){return this.badges.some((t=>{if("BADGE_STYLE_TYPE_LIVE_NOW"===t.style||"LIVE"===t.label)return!0}))}get is_new(){return this.badges.some((t=>"New"===t.label))}get is_premiere(){return this.badges.some((t=>"PREMIERE"===t.style))}}ee.type="CompactVideo";const ie=ee;class se extends y{constructor(t){super(),this.info_rows=lb.parseArray(t.infoRows,te),this.video_lockup=lb.parseItem(t.videoLockup,ie)}}se.type="CarouselLockup";const ne=se;class oe extends y{constructor(t){super(),this.carousel_lockups=lb.parseArray(t.carouselLockups,ne),this.section_title=new $(t.sectionTitle)}}oe.type="VideoDescriptionMusicSection";const ae=oe;class re extends y{constructor(t){super(),this.section_title=new $(t.sectionTitle),this.sub_header_text=new $(t.subHeaderText),this.primary_button=lb.parseItem(t.primaryButton,R)}}re.type="VideoDescriptionTranscriptSection";const le=re;class ce extends y{constructor(t){super(),this.thumbnail=j.fromResponse(t.thumbnail),this.title=new $(t.title),this.short_byline_text=new $(t.shortBylineText),this.video_count_short_text=new $(t.videoCountShortText),this.endpoint=new U(t.navigationEndpoint),this.thumbnail_width=t.thumbnailWidth,this.aspect_ratio=t.aspectRatio,this.max_lines_title=t.maxLinesTitle,this.max_lines_short_byline_text=t.maxLinesShortBylineText,this.overlay_position=t.overlayPosition}}ce.type="StructuredDescriptionPlaylistLockup";const he=ce;class de extends y{constructor(t){super(),this.section_title=new $(t.sectionTitle),this.media_lockups=lb.parseArray(t.mediaLockups,[he])}}de.type="VideoDescriptionCourseSection";const ue=de;class pe extends y{constructor(t){super(),this.items=lb.parseArray(t.items,[Xt,Tt,ae,Jt,ue,le,le,Ft])}}pe.type="StructuredDescriptionContent";const me=pe;class fe extends y{constructor(t){super(),this.header=lb.parseItem(t.header,ht),this.content=lb.parseItem(t.content,[xt,lt,me,gt,bt]),this.panel_identifier=t.panelIdentifier,this.target_id=t.targetId,this.visibility=t.visibility}}fe.type="EngagementPanelSectionList";const ve=fe;class ye extends y{constructor(t){super(),this.title=new $(t.title).toString(),this.form_item_entity_key=t.formItemEntityKey,Reflect.has(t,"selectedIcon")&&(this.selected_icon_type=t.selectedIcon.iconType),Reflect.has(t,"selectedCommand")&&(this.endpoint=new U(t.selectedCommand)),this.selected=!!this.endpoint}}ye.type="MusicMultiSelectMenuItem";const ge=ye;var _e;_e=new WeakMap;const be=class{constructor(t,e){var i,s,n,o,a,r;if(_e.set(this,void 0),e&&f(this,_e,e,"f"),this.itag=t.itag,this.mime_type=t.mimeType,this.is_type_otf="FORMAT_STREAM_TYPE_OTF"===t.type,this.bitrate=t.bitrate,this.average_bitrate=t.averageBitrate,this.width=t.width,this.height=t.height,this.init_range=t.initRange?{start:parseInt(t.initRange.start),end:parseInt(t.initRange.end)}:void 0,this.index_range=t.indexRange?{start:parseInt(t.indexRange.start),end:parseInt(t.indexRange.end)}:void 0,this.last_modified=new Date(Math.floor(parseInt(t.lastModified)/1e3)),this.content_length=parseInt(t.contentLength),this.quality=t.quality,this.quality_label=t.qualityLabel,this.fps=t.fps,this.url=t.url,this.cipher=t.cipher,this.signature_cipher=t.signatureCipher,this.audio_quality=t.audioQuality,this.approx_duration_ms=parseInt(t.approxDurationMs),this.audio_sample_rate=parseInt(t.audioSampleRate),this.audio_channels=t.audioChannels,this.loudness_db=t.loudnessDb,this.has_audio=!!t.audioBitrate||!!t.audioQuality,this.has_video=!!t.qualityLabel,this.color_info=t.colorInfo?{primaries:null===(i=t.colorInfo.primaries)||void 0===i?void 0:i.replace("COLOR_PRIMARIES_",""),transfer_characteristics:null===(s=t.colorInfo.transferCharacteristics)||void 0===s?void 0:s.replace("COLOR_TRANSFER_CHARACTERISTICS_",""),matrix_coefficients:null===(n=t.colorInfo.matrixCoefficients)||void 0===n?void 0:n.replace("COLOR_MATRIX_COEFFICIENTS_","")}:void 0,this.has_audio){const e=new URLSearchParams(this.cipher||this.signature_cipher),i=null===(o=new URLSearchParams(e.get("url")||this.url).get("xtags"))||void 0===o?void 0:o.split(":"),s=null===(a=null==i?void 0:i.find((t=>t.startsWith("acont="))))||void 0===a?void 0:a.split("=")[1];this.language=(null===(r=null==i?void 0:i.find((t=>t.startsWith("lang="))))||void 0===r?void 0:r.split("=")[1])||null,this.is_dubbed="dubbed"===s,this.is_descriptive="descriptive"===s,this.is_original="original"===s||!this.is_dubbed&&!this.is_descriptive,Reflect.has(t,"audioTrack")&&(this.audio_track={audio_is_default:t.audioTrack.audioIsDefault,display_name:t.audioTrack.displayName,id:t.audioTrack.id})}}decipher(t){if(!t)throw new fb("Cannot decipher format, this session appears to have no valid player.");return t.decipher(this.url,this.signature_cipher,this.cipher,m(this,_e,"f"))}};class we{constructor(t){this.id=t.videoId,this.channel_id=t.channelId,this.title=t.title,this.duration=parseInt(t.lengthSeconds),this.keywords=t.keywords,this.is_owner_viewing=!!t.isOwnerViewing,this.short_description=t.shortDescription,this.thumbnail=j.fromResponse(t.thumbnail),this.allow_ratings=!!t.allowRatings,this.view_count=parseInt(t.viewCount),this.author=t.author,this.is_private=!!t.isPrivate,this.is_live=!!t.isLive,this.is_live_content=!!t.isLiveContent,this.is_upcoming=!!t.isUpcoming,this.is_post_live_dvr=!!t.isPostLiveDvr,this.is_crawlable=!!t.isCrawlable}}class xe extends y{constructor(t){super(),this.title=new $(t.title),this.endpoint=new U(t.navigationEndpoint)}}xe.type="AccountChannel";const Se=xe;class Te extends y{constructor(t){super(),this.title=new $(t.title)}}Te.type="AccountItemSectionHeader";const Ce=Te;class Ie extends y{constructor(t){super(),this.account_name=new $(t.accountName),this.account_photo=j.fromResponse(t.accountPhoto),this.is_selected=!!t.isSelected,this.is_disabled=!!t.isDisabled,this.has_channel=!!t.hasChannel,this.endpoint=new U(t.serviceEndpoint),this.account_byline=new $(t.accountByline)}}Ie.type="AccountItem";class ke extends y{constructor(t){super(),this.contents=b(t.contents.map((t=>new Ie(t.accountItem)))),this.header=lb.parseItem(t.header,Ce)}}ke.type="AccountItemSection";const Ee=ke;class Re extends y{constructor(t){super(),this.contents=lb.parseItem(t.contents[0],Ee),this.footers=lb.parseItem(t.footers[0],Se)}}Re.type="AccountSectionList";const Ae=Re;class Me extends y{constructor(t){super(),this.contents=lb.parseArray(t.continuationItems),this.target=t.target}}Me.type="AppendContinuationItemsAction";const Pe=Me;class Oe extends y{constructor(t){super(),Reflect.has(t,"title")&&(this.title=t.title),Reflect.has(t,"icon")&&(this.icon_type=t.icon.iconType),Reflect.has(t,"accessibility")&&(this.label=t.accessibility.accessibilityData.label),Reflect.has(t,"tooltip")&&(this.tooltip=t.tooltip),Reflect.has(t,"subMenuItems")&&(this.sub_menu_items=t.subMenuItems.map((t=>{var e,i;return{title:t.title,selected:t.selected,continuation:null===(i=null===(e=t.continuation)||void 0===e?void 0:e.reloadContinuationData)||void 0===i?void 0:i.continuation,endpoint:new U(t.serviceEndpoint||t.navigationEndpoint),subtitle:t.subtitle||null}})))}}Oe.type="SortFilterSubMenu";const De=Oe;class Ne extends y{constructor(t){super(),this.language_menu=lb.parseItem(t.languageMenu,De)}}Ne.type="TranscriptFooter";const Le=Ne;class Be extends y{constructor(t){super(),this.formatted_placeholder=new $(t.formattedPlaceholder),this.clear_button=lb.parseItem(t.clearButton,R),this.endpoint=new U(t.onTextChangeCommand),this.search_button=lb.parseItem(t.searchButton,R)}}Be.type="TranscriptSearchBox";const Ve=Be;class Ue extends y{constructor(t){super(),this.start_ms=t.startMs,this.end_ms=t.endMs,this.snippet=new $(t.snippet)}}Ue.type="TranscriptSectionHeader";const je=Ue;class We extends y{constructor(t){super(),this.start_ms=t.startMs,this.end_ms=t.endMs,this.snippet=new $(t.snippet),this.start_time_text=new $(t.startTimeText),this.target_id=t.targetId}}We.type="TranscriptSegment";const Fe=We;class He extends y{constructor(t){super(),this.initial_segments=lb.parseArray(t.initialSegments,[Fe,je]),this.no_result_label=new $(t.noResultLabel),this.retry_label=new $(t.retryLabel),this.touch_captions_enabled=t.touchCaptionsEnabled}}He.type="TranscriptSegmentList";const $e=He;class Ge extends y{constructor(t){super(),this.header=lb.parseItem(t.header,Ve),this.body=lb.parseItem(t.body,$e),this.footer=lb.parseItem(t.footer,Le),this.target_id=t.targetId}}Ge.type="TranscriptSearchPanel";const Ye=Ge;class Ke extends y{constructor(t){super(),this.content=lb.parseItem(t.content,Ye)}}Ke.type="Transcript";const qe=Ke;class ze extends y{constructor(t){super(),this.target_id=t.targetId,this.content=lb.parseItem(t.content,qe)}}ze.type="UpdateEngagementPanelAction";const Xe=ze;class Qe extends y{constructor(t){super(),this.title=t.title,this.subtitle=t.subtitle,this.metric_value=t.metricValue,this.comparison_indicator=t.comparisonIndicator;const e=t.seriesConfiguration.lineSeries;this.series_configuration={line_series:{lines_data:{x:e.linesData[0].x,y:e.linesData[0].y,style:{line_width:e.linesData[0].style.lineWidth,line_color:e.linesData[0].style.lineColor}},domain_axis:{tick_values:e.domainAxis.tickValues,custom_formatter:e.domainAxis.customFormatter},measure_axis:{tick_values:e.measureAxis.tickValues,custom_formatter:e.measureAxis.customFormatter}}}}}Qe.type="DataModelSection";const Je=Qe;class Ze extends y{constructor(t){super(),this.period=t.cardData.periodLabel;const e=t.cardData.sections[0].analyticsKeyMetricsData;this.sections=e.dataModel.sections.map((t=>new Je(t)))}}Ze.type="AnalyticsMainAppKeyMetrics";const ti=Ze;class ei extends y{constructor(t){super();const e=t.analyticsTableCarouselData.data.tableCards;this.title=t.analyticsTableCarouselData.carouselTitle,this.selected_card_index_key=t.analyticsTableCarouselData.selectedCardIndexKey,this.table_cards=e.map((t=>({title:t.cardData.title,rows:t.cardData.rows.map((t=>({label:t.label,display_value:t.displayValue,display_value_a11y:t.displayValueA11y,bar_ratio:t.barRatio,bar_color:t.barColor,bar_opacity:t.barOpacity})))}))),this.use_main_app_specs=t.analyticsTableCarouselData.useMainAppSpecs}}ei.type="AnalyticsRoot";const ii=ei;class si extends y{constructor(t){super(),this.title=t.title,this.shorts=t.shortsCarouselData.shorts.map((t=>({description:t.shortsDescription,thumbnail_url:t.thumbnailUrl,endpoint:new U(t.videoEndpoint)})))}}si.type="AnalyticsShortsCarouselCard";const ni=si;class oi extends y{constructor(t){super(),this.title=t.videoTitle,this.metadata={views:t.videoDescription.split("·")[0].trim(),published:t.videoDescription.split("·")[1].trim(),thumbnails:j.fromResponse(t.thumbnailDetails),duration:t.formattedLength,is_short:t.isShort}}}oi.type="AnalyticsVideo";const ai=oi;class ri extends y{constructor(t){super(),this.title=t.title,Reflect.has(t,"noDataMessage")&&(this.no_data_message=t.noDataMessage),Reflect.has(t,"videoCarouselData")&&Reflect.has(t.videoCarouselData,"videos")&&(this.videos=t.videoCarouselData.videos.map((t=>new ai(t))))}}ri.type="AnalyticsVodCarouselCard";const li=ri;class ci extends y{constructor(t){super(),this.title=t.buttonLabel,this.use_new_specs=t.useNewSpecs}}ci.type="CtaGoToCreatorStudio";const hi=ci;class di extends y{constructor(t){super(),this.title=new $(t.title),this.contents=new $(t.contents)}}di.type="StatRow";const ui=di;class pi extends y{constructor(t){var e,i;super(),(null===(i=null===(e=null==t?void 0:t.content)||void 0===e?void 0:e.automixPlaylistVideoRenderer)||void 0===i?void 0:i.navigationEndpoint)&&(this.playlist_video={endpoint:new U(t.content.automixPlaylistVideoRenderer.navigationEndpoint)})}}pi.type="AutomixPreviewVideo";const mi=pi;class fi extends y{constructor(t){super(),this.image=j.fromResponse(t.image),this.endpoint=new U(t.command)}}fi.type="BackstageImage";const vi=fi;class yi extends y{constructor(t){var e,i,s,n,o,a,r,l;super(),this.text=new $(t.defaultText),this.toggled_text=new $(t.toggledText),this.tooltip=t.defaultTooltip,this.toggled_tooltip=t.toggledTooltip,this.is_toggled=t.isToggled,this.is_disabled=t.isDisabled,this.icon_type=t.defaultIcon.iconType;const c=(null===(s=null===(i=null===(e=null==t?void 0:t.defaultText)||void 0===e?void 0:e.accessibility)||void 0===i?void 0:i.accessibilityData)||void 0===s?void 0:s.label)||(null===(o=null===(n=null==t?void 0:t.accessibilityData)||void 0===n?void 0:n.accessibilityData)||void 0===o?void 0:o.label)||(null===(a=null==t?void 0:t.accessibility)||void 0===a?void 0:a.label);"LIKE"==this.icon_type&&(this.like_count=parseInt(c.replace(/\D/g,"")),this.short_like_count=new $(t.defaultText).toString()),this.endpoint=(null===(l=null===(r=t.defaultServiceEndpoint)||void 0===r?void 0:r.commandExecutorCommand)||void 0===l?void 0:l.commands)?new U(t.defaultServiceEndpoint.commandExecutorCommand.commands.pop()):new U(t.defaultServiceEndpoint),this.toggled_endpoint=new U(t.toggledServiceEndpoint),Reflect.has(t,"toggleButtonSupportedData")&&Reflect.has(t.toggleButtonSupportedData,"toggleButtonIdData")&&(this.button_id=t.toggleButtonSupportedData.toggleButtonIdData.id),Reflect.has(t,"targetId")&&(this.target_id=t.targetId)}}yi.type="ToggleButton";const gi=yi;class _i extends y{constructor(t){var e,i;super(),this.creator_thumbnail=j.fromResponse(t.creatorThumbnail),Reflect.has(t,"heartIcon")&&Reflect.has(t.heartIcon,"iconType")&&(this.heart_icon_type=t.heartIcon.iconType),this.heart_color={basic_color_palette_data:{foreground_title_color:null===(i=null===(e=t.heartColor)||void 0===e?void 0:e.basicColorPaletteData)||void 0===i?void 0:i.foregroundTitleColor}},this.hearted_tooltip=t.heartedTooltip,this.is_hearted=t.isHearted,this.is_enabled=t.isEnabled,this.kennedy_heart_color_string=t.kennedyHeartColorString}}_i.type="CreatorHeart";const bi=_i;class wi extends y{constructor(t){super(),this.like_button=lb.parseItem(t.likeButton,gi),this.dislike_button=lb.parseItem(t.dislikeButton,gi),this.reply_button=lb.parseItem(t.replyButton,R),this.creator_heart=lb.parseItem(t.creatorHeart,bi)}}wi.type="CommentActionButtons";const xi=wi;class Si extends y{constructor(t){super(),this.id=t.postId,this.author=new hb(Object.assign(Object.assign({},t.authorText),{navigationEndpoint:t.authorEndpoint}),null,t.authorThumbnail),this.content=new $(t.contentText),this.published=new $(t.publishedTimeText),Reflect.has(t,"pollStatus")&&(this.poll_status=t.pollStatus),Reflect.has(t,"voteStatus")&&(this.vote_status=t.voteStatus),Reflect.has(t,"voteCount")&&(this.vote_count=new $(t.voteCount)),Reflect.has(t,"actionMenu")&&(this.menu=lb.parseItem(t.actionMenu,ut)),Reflect.has(t,"actionButtons")&&(this.action_buttons=lb.parseItem(t.actionButtons,xi)),Reflect.has(t,"voteButton")&&(this.vote_button=lb.parseItem(t.voteButton,R)),Reflect.has(t,"navigationEndpoint")&&(this.endpoint=new U(t.navigationEndpoint)),Reflect.has(t,"backstageAttachment")&&(this.attachment=lb.parseItem(t.backstageAttachment)),this.surface=t.surface}}Si.type="BackstagePost";const Ti=Si;class Ci extends y{constructor(t){super(),this.post=lb.parseItem(t.post)}}Ci.type="BackstagePostThread";const Ii=Ci;class ki extends y{constructor(t){super(),this.contents=lb.parseArray(t.contents)}}ki.type="BrowseFeedActions";const Ei=ki;class Ri extends y{constructor(t){super(),this.album=new $(t.album),this.thumbnails=j.fromResponse(t.thumbnailDetails)}}Ri.type="BrowserMediaSession";const Ai=Ri;class Mi extends y{constructor(t){super(),this.endpoint=new U(t.navigationEndpoint),this.icon=j.fromResponse(t.icon),this.title=new $(t.title)}}Mi.type="HeaderLink";class Pi extends y{constructor(t){var e,i;super(),this.primary=b((null===(e=t.primaryLinks)||void 0===e?void 0:e.map((t=>new Mi(t))))||[]),this.secondary=b((null===(i=t.secondaryLinks)||void 0===i?void 0:i.map((t=>new Mi(t))))||[])}}Pi.type="ChannelHeaderLinks";const Oi=Pi;class Di extends y{constructor(t){super(),Reflect.has(t,"firstLink")&&(this.first_link=$.fromAttributed(t.firstLink)),Reflect.has(t,"more")&&(this.more=$.fromAttributed(t.more))}}Di.type="ChannelHeaderLinksView";const Ni=Di;class Li extends y{constructor(t){super(),this.states=t.states.map((t=>({id:t.stateId,next_id:t.nextStateId,state:lb.parse(t.state)}))),this.current_state_id=t.currentStateId,this.target_id=t.targetId}}Li.type="SubscriptionNotificationToggleButton";const Bi=Li;class Vi extends y{constructor(t){var e,i;super(),this.title=new $(t.buttonText),this.subscribed=t.subscribed,this.enabled=t.enabled,this.item_type=t.type,this.channel_id=t.channelId,this.show_preferences=t.showPreferences,this.subscribed_text=new $(t.subscribedButtonText),this.unsubscribed_text=new $(t.unsubscribedButtonText),this.notification_preference_button=lb.parseItem(t.notificationPreferenceButton,Bi),this.endpoint=new U((null===(e=t.serviceEndpoints)||void 0===e?void 0:e[0])||(null===(i=t.onSubscribeEndpoints)||void 0===i?void 0:i[0]))}}Vi.type="SubscribeButton";const Ui=Vi;class ji extends y{constructor(t){super(),this.author=new hb({simpleText:t.title,navigationEndpoint:t.navigationEndpoint},t.badges,t.avatar),Reflect.has(t,"banner")&&(this.banner=j.fromResponse(t.banner)),Reflect.has(t,"tv_banner")&&(this.tv_banner=j.fromResponse(t.tvBanner)),Reflect.has(t,"mobile_banner")&&(this.mobile_banner=j.fromResponse(t.mobileBanner)),Reflect.has(t,"subscriberCountText")&&(this.subscribers=new $(t.subscriberCountText)),Reflect.has(t,"videosCountText")&&(this.videos_count=new $(t.videosCountText)),Reflect.has(t,"sponsorButton")&&(this.sponsor_button=lb.parseItem(t.sponsorButton,R)),Reflect.has(t,"subscribeButton")&&(this.subscribe_button=lb.parseItem(t.subscribeButton,[Ui,R])),Reflect.has(t,"headerLinks")&&(this.header_links=lb.parseItem(t.headerLinks,[Oi,Ni])),Reflect.has(t,"channelHandleText")&&(this.channel_handle=new $(t.channelHandleText)),Reflect.has(t,"channelId")&&(this.channel_id=t.channelId)}}ji.type="C4TabbedHeader";const Wi=ji;class Fi extends y{constructor(t){super(),this.label=new $(t.label),this.icon_type=t.icon.iconType,this.style=t.style}}Fi.type="CallToActionButton";const Hi=Fi;class $i extends y{constructor(t){super(),this.teaser=lb.parseItem(t.teaser),this.content=lb.parseItem(t.content),Reflect.has(t,"cardId")&&(this.card_id=t.cardId),Reflect.has(t,"feature")&&(this.feature=t.feature),this.cue_ranges=t.cueRanges.map((t=>({start_card_active_ms:t.startCardActiveMs,end_card_active_ms:t.endCardActiveMs,teaser_duration_ms:t.teaserDurationMs,icon_after_teaser_ms:t.iconAfterTeaserMs})))}}$i.type="Card";const Gi=$i;class Yi extends y{constructor(t){super(),this.contents=lb.parseArray(t.contents)}}Yi.type="CarouselHeader";const Ki=Yi;class qi extends y{constructor(t){super(),this.items=lb.parseArray(t.carouselItems),this.background_color=t.backgroundColor,this.layout_style=t.layoutStyle,this.pagination_thumbnails=j.fromResponse(t.paginationThumbnails),this.paginator_alignment=t.paginatorAlignment}get contents(){return this.items}}qi.type="CarouselItem";const zi=qi;class Xi extends y{constructor(t){super(),this.id=t.channelId,this.author=new hb(Object.assign(Object.assign({},t.title),{navigationEndpoint:t.navigationEndpoint}),t.ownerBadges,t.thumbnail),this.subscriber_count=new $(t.subscriberCountText),this.video_count=new $(t.videoCountText),this.long_byline=new $(t.longBylineText),this.short_byline=new $(t.shortBylineText),this.endpoint=new U(t.navigationEndpoint),this.subscribe_button=lb.parseItem(t.subscribeButton,[Ui,R]),this.description_snippet=new $(t.descriptionSnippet)}get subscribers(){return this.subscriber_count}get videos(){return this.video_count}}Xi.type="Channel";const Qi=Xi;class Ji extends y{constructor(t){var e,i;super(),this.id=t.channelId,this.name=new $(t.title),this.avatar=j.fromResponse(t.avatar),this.canonical_channel_url=t.canonicalChannelUrl,this.primary_links=null!==(i=null===(e=t.primaryLinks)||void 0===e?void 0:e.map((t=>({endpoint:new U(t.navigationEndpoint),icon:j.fromResponse(t.icon),title:new $(t.title)}))))&&void 0!==i?i:[],this.view_count=new $(t.viewCountText),this.joined_date=new $(t.joinedDateText),this.description=new $(t.description),this.email_reveal=new U(t.onBusinessEmailRevealClickCommand),this.can_reveal_email=!t.signInForBusinessEmail,this.country=new $(t.country),this.buttons=lb.parseArray(t.actionButtons,R)}get views(){return this.view_count}get joined(){return this.joined_date}}Ji.type="ChannelAboutFullMetadata";const Zi=Ji;class ts extends y{constructor(t){super(),this.channel_title=t.channelTitle,this.avatar=j.fromResponse(t.avatar),this.header=new $(t.header),this.main_text=new $(t.mainText),this.sign_in_button=qv(t.signInButton,R),this.secondary_text=new $(t.secondaryText)}}ts.type="ChannelAgeGate";const es=ts;class is extends y{constructor(t){super(),this.title=new $(t.title),this.items=lb.parseArray(t.items)}}is.type="ChannelFeaturedContent";const ss=is;class ns extends y{constructor(t){super(),this.title=t.title,this.description=t.description,this.url=t.channelUrl,this.rss_url=t.rssUrl,this.vanity_channel_url=t.vanityChannelUrl,this.external_id=t.externalId,this.is_family_safe=t.isFamilySafe,this.keywords=t.keywords,this.avatar=j.fromResponse(t.avatar),this.music_artist_name="string"==typeof t.musicArtistName&&t.musicArtistName.length>0?t.musicArtistName:void 0,this.available_countries=t.availableCountryCodes,this.android_deep_link=t.androidDeepLink,this.android_appindexing_link=t.androidAppindexingLink,this.ios_appindexing_link=t.iosAppindexingLink}}ns.type="ChannelMetadata";const os=ns;class as extends y{constructor(t){super(),this.title=new $(t.title)}}as.type="ChannelMobileHeader";const rs=as;class ls extends y{constructor(t){super(),this.avatar=j.fromResponse(t.avatar),this.endpoint=new U(t.avatarEndpoint),this.name=t.name,this.links=t.links.map((t=>new $(t)))}}ls.type="ChannelOptions";const cs=ls;class hs extends y{constructor(t){super(),this.content_type_sub_menu_items=t.contentTypeSubMenuItems.map((t=>({endpoint:new U(t.navigationEndpoint||t.endpoint),selected:t.selected,title:t.title}))),this.sort_setting=lb.parseItem(t.sortSetting)}}hs.type="ChannelSubMenu";const ds=hs;class us extends y{constructor(t){var e,i;super(),this.thumbnails=j.fromResponse(t.thumbnail),this.endpoint=new U(t.navigationEndpoint),this.label=null===(i=null===(e=t.accessibility)||void 0===e?void 0:e.accessibilityData)||void 0===i?void 0:i.label}}us.type="ChannelThumbnailWithLink";const ps=us;class ms extends y{constructor(t){super(),this.id=t.videoId,this.title=new $(t.title),this.description=new $(t.description),this.view_count=new $(t.viewCountText),this.published_time=new $(t.publishedTimeText)}get views(){return this.view_count}get published(){return this.published_time}}ms.type="ChannelVideoPlayer";const fs=ms;class vs extends y{constructor(t){super(),this.title=new $(t.title),this.time_range_start_millis=t.timeRangeStartMillis,this.thumbnail=j.fromResponse(t.thumbnail)}}vs.type="Chapter";const ys=vs;class gs extends y{constructor(t){super(),this.id=t.videoId,this.title=new $(t.title),this.duration={text:t.lengthText.simpleText,seconds:kb(t.lengthText.simpleText)},this.endpoint=new U(t.navigationEndpoint)}}gs.type="ChildVideo";const _s=gs;class bs extends y{constructor(t){super(),this.is_selected=t.isSelected,Reflect.has(t,"navigationEndpoint")&&(this.endpoint=new U(t.navigationEndpoint)),this.text=new $(t.text).toString()}}bs.type="ChipCloudChip";const ws=bs;class xs extends y{constructor(t){super(),this.chips=lb.parseArray(t.chips,ws),this.next_button=lb.parseItem(t.nextButton,R),this.previous_button=lb.parseItem(t.previousButton,R),this.horizontal_scrollable=t.horizontalScrollable}}xs.type="ChipCloud";const Ss=xs;class Ts extends y{constructor(t){super(),this.channel_avatar=j.fromResponse(t.channelAvatar),this.custom_text=new $(t.customText),this.channel_name=new $(t.channelName),this.subscriber_count=new $(t.subscriberCountText),this.endpoint=new U(t.endpoint)}}Ts.type="CollaboratorInfoCardContent";const Cs=Ts;class Is extends y{constructor(t){super(),this.left=j.fromResponse(t.leftThumbnail),this.top_right=j.fromResponse(t.topRightThumbnail),this.bottom_right=j.fromResponse(t.bottomRightThumbnail),this.endpoint=new U(t.navigationEndpoint)}}Is.type="CollageHeroImage";const ks=Is;var Es;class Rs extends y{constructor(t){super(),Es.set(this,void 0),Reflect.has(t,"icon")&&Reflect.has(t.icon,"iconType")&&(this.icon_type=t.icon.iconType),this.tooltip=t.iconTooltip,"Verified"===this.tooltip&&(this.style="BADGE_STYLE_TYPE_VERIFIED")&&(t.style="BADGE_STYLE_TYPE_VERIFIED"),f(this,Es,t,"f")}get orig_badge(){return m(this,Es,"f")}}Es=new WeakMap,Rs.type="AuthorCommentBadge";const As=Rs;class Ms extends y{constructor(t){super(),this.reply_button=lb.parseItem(t.replyButton,R),this.cancel_button=lb.parseItem(t.cancelButton,R),this.author_thumbnail=j.fromResponse(t.authorThumbnail),this.placeholder=new $(t.placeholderText),this.error_message=new $(t.errorMessage)}}Ms.type="CommentReplyDialog";const Ps=Ms;class Os extends y{constructor(t){var e,i;super(),this.text=new $(t.chipText),this.color_pallette={background_color:null===(e=t.chipColorPalette)||void 0===e?void 0:e.backgroundColor,foreground_title_color:null===(i=t.chipColorPalette)||void 0===i?void 0:i.foregroundTitleColor},Reflect.has(t,"chipIcon")&&Reflect.has(t.chipIcon,"iconType")&&(this.icon_type=t.chipIcon.iconType)}}Os.type="PdgCommentChip";const Ds=Os;class Ns extends y{constructor(t){super(),this.custom_badge=j.fromResponse(t.customBadge),this.tooltip=t.tooltip}}Ns.type="SponsorCommentBadge";const Ls=Ns;var Bs,Vs;(Vs=Bs||(Bs={}))[Vs.Varint=0]="Varint",Vs[Vs.Fixed64=1]="Fixed64",Vs[Vs.LengthDelimited=2]="LengthDelimited",Vs[Vs.StartGroup=3]="StartGroup",Vs[Vs.EndGroup=4]="EndGroup",Vs[Vs.Fixed32=5]="Fixed32";const Us=65535;class js extends Uint32Array{constructor(t=0,e=0){super([t,e])}toString(t=!0){const[e,i]=this;if(0===e&&0===i)return"0";if(t&&i>2147483647)return"-"+$s(qs(this),Fs).toString(!1);const s=[];let n=new js(e,i);for(;Ks(n,Ws);){const[t,e]=Ys(n);s.push(e),n=t}return s.reverse().join("")}static parse(t){const e=parseInt(t,10),i=e<0;if(Number.isNaN(e))return new js(0);if(t.length<10)return e<0?$s(qs(new js(-e)),Fs):new js(e);let s=new js,n=Fs;for(const e of t.split("").reverse())parseInt(e)&&(s=$s(s,Gs(new js(parseInt(e)),n))),n=Gs(n,new js(10));return i?$s(qs(s),Fs):s}}const Ws=new js(0),Fs=new js(1);function Hs(t){const[e,i]=t;return[e&Us,e>>>16,i&Us,i>>>16]}function $s(t,e){const[i,s,n,o]=Hs(t),[a,r,l,c]=Hs(e);let h=0,d=0,u=0,p=0;return p+=i+a,u+=p>>>16,p&=Us,u+=s+r,d+=u>>>16,u&=Us,d+=n+l,h+=d>>>16,d&=Us,h+=o+c,h&=Us,new js(u<<16|p,h<<16|d)}function Gs(t,e){const[i,s,n,o]=Hs(t),[a,r,l,c]=Hs(e);let h=0,d=0,u=0,p=0;return p+=i*a,u+=p>>>16,p&=Us,u+=i*r+s*a,d+=u>>>16,u&=Us,d+=i*l+n*a+s*r,h+=d>>>16,d&=Us,h+=i*c+s*l+n*r+o*a,h&=Us,new js(u<<16|p,h<<16|d)}function Ys(t){const[e,i]=t;return[new js((i%10*4294967296+e)/10|0,i/10|0),(i%10*4294967296+e)%10]}function Ks(t,e){const[i,s]=t,[n,o]=e;return s!==o?s-o:i-n}function qs(t){const[e,i]=t;return new js(~e,~i)}function zs(t){const e=[];let i="number"==typeof t?new js(t):t;for(;i[0]||i[1];){const[t,s]=i,n=127&t;i=new js(t>>>7|(127&s)<<25,s>>>7);const o=i[0]||i[1]?128|n:n;e.push(o)}return e.length<1?new Uint8Array(1):Uint8Array.from(e)}function Xs(t){let e=new js(0),i=0;for(;;){const o=t.getUint8(i);if(s=e,n=Qs(new js(127&o),7*i),e=new js(s[0]|n[0],s[1]|n[1]),++i,!(o>>>7))return[i,e]}var s,n}function Qs(t,e){return 0===e?t:e>=32?new js(0,t[0]<<e-32):new js(t[0]<<e,t[1]<<e|t[0]>>>32-e)}function Js(t){const e=[];return t.forEach((([t,i])=>{switch(e.push(zs(t<<3|i.type)),i.type){case Bs.Varint:e.push(zs(i.value));break;case Bs.Fixed64:{const t=new Uint8Array(8),s=new DataView(t.buffer);s.setUint32(0,i.value[0],!0),s.setUint32(4,i.value[1],!0),e.push(t);break}case Bs.LengthDelimited:e.push(zs(i.value.byteLength)),e.push(i.value);break;case Bs.Fixed32:{const t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,i.value,!0),e.push(t);break}}})),Zs(e)}function Zs(t){const e=t.reduce(((t,e)=>t+e.byteLength),0),i=new Uint8Array(e);return t.reduce(((t,e)=>(i.set(e,t),t+e.byteLength)),0),i}function tn(t){if(t instanceof js){const e=new js(t[0]<<1,t[1]<<1|t[0]>>>31),i=t[1]>>>31?new js(4294967295,4294967295):new js;return new js(e[0]^i[0],e[1]^i[1])}return(2*t^t>>31)>>>0}function en(t){if(t instanceof js){const e=new js(t[0]>>>1|t[1]<<31,t[1]>>>1),i=1&t[0]?new js(4294967295,4294967295):new js;return new js(e[0]^i[0],e[1]^i[1])}return t>>>1^-(1&t)}const sn={int32:t=>0|t[0],int64:t=>t.toString(!0),uint32:t=>t[0]>>>0,uint64:t=>t.toString(!1),sint32:t=>en(t[0]),sint64:t=>en(t).toString(!0),bool:t=>0!==t[0]},nn={int32:t=>new js(t),int64:t=>js.parse(t),uint32:t=>new js(t),uint64:t=>js.parse(t),sint32:t=>tn(new js(t)),sint64:t=>tn(js.parse(t)),bool:t=>new js(+t)},on=Object.fromEntries(Object.entries(sn).map((([t,e])=>[t,t=>{if(t.type===Bs.Varint)return e(t.value)}]))),an=Object.fromEntries(Object.entries(nn).map((([t,e])=>[t,t=>({type:Bs.Varint,value:e(t)})]))),rn=Object.assign(Object.assign({},on),{double:t=>{if(t.type===Bs.Fixed64)return new DataView(t.value.buffer).getFloat64(0,!0)},float:t=>{if(t.type===Bs.Fixed32)return new DataView(new Uint32Array([t.value]).buffer).getFloat32(0,!0)},fixed32:t=>{if(t.type===Bs.Fixed32)return t.value>>>0},fixed64:t=>{if(t.type===Bs.Fixed64)return t.value.toString(!1)},sfixed32:t=>{if(t.type===Bs.Fixed32)return 0|t.value},sfixed64:t=>{if(t.type===Bs.Fixed64)return t.value.toString(!0)},string:t=>{if(t.type===Bs.LengthDelimited)return(new TextDecoder).decode(t.value)},bytes:t=>{if(t.type===Bs.LengthDelimited)return t.value}}),ln=Object.assign(Object.assign({},an),{double:t=>{const e=new js;return new DataView(e.buffer).setFloat64(0,t,!0),{type:Bs.Fixed64,value:e}},float:t=>{const e=new Uint32Array(1),i=new DataView(e.buffer);return i.setFloat32(0,t,!0),{type:Bs.Fixed32,value:i.getUint32(0,!0)}},fixed32:t=>({type:Bs.Fixed32,value:t>>>0}),fixed64:t=>({type:Bs.Fixed64,value:js.parse(t)}),sfixed32:t=>({type:Bs.Fixed32,value:0|t}),sfixed64:t=>({type:Bs.Fixed64,value:js.parse(t)}),string:t=>{const e=new TextEncoder;return{type:Bs.LengthDelimited,value:e.encode(t)}},bytes:t=>({type:Bs.LengthDelimited,value:t})}),cn=Object.fromEntries(Object.keys(sn).map((t=>[t,function*(e){for(const i of e){const e=rn[t](i);if(null!=e)yield e;else for(const e of mn(i))yield sn[t](e)}}]))),hn=(Object.assign(Object.assign({},cn),{*double(t){for(const e of t){const t=rn.double(e);null!=t?yield t:yield*un(e)}},*float(t){for(const e of t){const t=rn.float(e);null!=t?yield t:yield*pn(e)}},*fixed32(t){for(const e of t){const t=rn.fixed32(e);if(null!=t)yield t;else for(const t of fn(e))yield t>>>0}},*fixed64(t){for(const e of t){const t=rn.fixed64(e);if(null!=t)yield t;else for(const t of vn(e))yield t.toString(!1)}},*sfixed32(t){for(const e of t){const t=rn.sfixed32(e);if(null!=t)yield t;else for(const t of fn(e))yield 0|t}},*sfixed64(t){for(const e of t){const t=rn.sfixed64(e);if(null!=t)yield t;else for(const t of vn(e))yield t.toString(!0)}}}),Object.fromEntries(Object.keys(nn).map((t=>[t,function(e){return{type:Bs.LengthDelimited,value:Zs(e.map((e=>zs(nn[t](e)))))}}]))));function dn(t,e){return function(i){const s=new Uint8Array(i.length*t),n=new DataView(s.buffer);for(let s=0;s<i.length;++s)e(n,s*t,i[s]);return{type:Bs.LengthDelimited,value:s}}}function*un(t){if(t.type!==Bs.LengthDelimited)return;const{value:e}=t;let i=0;const s=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){const t=s.getFloat64(i,!0);i+=4,yield t}}function*pn(t){if(t.type!==Bs.LengthDelimited)return;const{value:e}=t;let i=0;const s=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){const t=s.getFloat32(i,!0);i+=4,yield t}}function*mn(t){if(t.type!==Bs.LengthDelimited)return;const{value:e}=t;let i=0;const s=e.byteOffset;for(;i<e.length;){const t=Xs(new DataView(e.buffer,s+i));i+=t[0],yield t[1]}}function*fn(t){if(t.type!==Bs.LengthDelimited)return;const{value:e}=t;let i=0;const s=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){const t=s.getUint32(i,!0);i+=4,yield t}}function*vn(t){if(t.type!==Bs.LengthDelimited)return;const{value:e}=t;let i=0;const s=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){const t=s.getUint32(i,!0);i+=4;const e=s.getUint32(i,!0);i+=4,yield new js(t,e)}}function yn(t){const e=[];if(void 0!==t.channelId){const i=t.channelId;e.push([1001,ln.string(i)])}return Js(e)}function gn(t){const e=[];if(void 0!==t.uploadDate){const i=t.uploadDate;e.push([1,ln.int32(i)])}if(void 0!==t.type){const i=t.type;e.push([2,ln.int32(i)])}if(void 0!==t.duration){const i=t.duration;e.push([3,ln.int32(i)])}if(void 0!==t.featuresHd){const i=t.featuresHd;e.push([4,ln.int32(i)])}if(void 0!==t.featuresSubtitles){const i=t.featuresSubtitles;e.push([5,ln.int32(i)])}if(void 0!==t.featuresCreativeCommons){const i=t.featuresCreativeCommons;e.push([6,ln.int32(i)])}if(void 0!==t.features3d){const i=t.features3d;e.push([7,ln.int32(i)])}if(void 0!==t.featuresLive){const i=t.featuresLive;e.push([8,ln.int32(i)])}if(void 0!==t.featuresPurchased){const i=t.featuresPurchased;e.push([9,ln.int32(i)])}if(void 0!==t.features4k){const i=t.features4k;e.push([14,ln.int32(i)])}if(void 0!==t.features360){const i=t.features360;e.push([15,ln.int32(i)])}if(void 0!==t.featuresLocation){const i=t.featuresLocation;e.push([23,ln.int32(i)])}if(void 0!==t.featuresHdr){const i=t.featuresHdr;e.push([25,ln.int32(i)])}if(void 0!==t.featuresVr180){const i=t.featuresVr180;e.push([26,ln.int32(i)])}return Js(e)}function _n(t){const e=[];if(void 0!==t.song){const i=t.song;e.push([1,ln.int32(i)])}if(void 0!==t.video){const i=t.video;e.push([2,ln.int32(i)])}if(void 0!==t.album){const i=t.album;e.push([3,ln.int32(i)])}if(void 0!==t.artist){const i=t.artist;e.push([4,ln.int32(i)])}if(void 0!==t.playlist){const i=t.playlist;e.push([5,ln.int32(i)])}return Js(e)}function bn(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([17,{type:Bs.LengthDelimited,value:_n(i)}])}return Js(e)}function wn(t){const e=[];if(void 0!==t.channelId){const i=t.channelId;e.push([1,ln.string(i)])}if(void 0!==t.videoId){const i=t.videoId;e.push([2,ln.string(i)])}return Js(e)}function xn(t){const e=[];if(void 0!==t.ids){const i=t.ids;e.push([5,{type:Bs.LengthDelimited,value:wn(i)}])}return Js(e)}function Sn(t){const e=[];if(void 0!==t.videoId){const i=t.videoId;e.push([2,ln.string(i)])}return Js(e)}function Tn(t){const e=[];if(void 0!==t.unkParam){const i=t.unkParam;e.push([1,ln.int32(i)])}return Js(e)}function Cn(t){const e=[];if(void 0!==t.commentId){const i=t.commentId;e.push([2,ln.string(i)])}if(void 0!==t.unkopts){const i=t.unkopts;e.push([4,{type:Bs.LengthDelimited,value:Tn(i)}])}if(void 0!==t.channelId){const i=t.channelId;e.push([5,ln.string(i)])}if(void 0!==t.videoId){const i=t.videoId;e.push([6,ln.string(i)])}if(void 0!==t.unkParam1){const i=t.unkParam1;e.push([8,ln.int32(i)])}if(void 0!==t.unkParam2){const i=t.unkParam2;e.push([9,ln.int32(i)])}return Js(e)}function In(t){const e=[];if(void 0!==t.videoId){const i=t.videoId;e.push([4,ln.string(i)])}if(void 0!==t.sortBy){const i=t.sortBy;e.push([6,ln.int32(i)])}if(void 0!==t.type){const i=t.type;e.push([15,ln.int32(i)])}return Js(e)}function kn(t){const e=[];if(void 0!==t.unkToken){const i=t.unkToken;e.push([1,ln.string(i)])}if(void 0!==t.repliesOpts){const i=t.repliesOpts;e.push([3,{type:Bs.LengthDelimited,value:Cn(i)}])}if(void 0!==t.opts){const i=t.opts;e.push([4,{type:Bs.LengthDelimited,value:In(i)}])}if(void 0!==t.page){const i=t.page;e.push([5,ln.int32(i)])}if(void 0!==t.target){const i=t.target;e.push([8,ln.string(i)])}return Js(e)}function En(t){const e=[];if(void 0!==t.index){const i=t.index;e.push([1,ln.int32(i)])}return Js(e)}function Rn(t){const e=[];if(void 0!==t.text){const i=t.text;e.push([1,ln.string(i)])}return Js(e)}function An(t){const e=[];if(void 0!==t.comment){const i=t.comment;e.push([1,{type:Bs.LengthDelimited,value:Rn(i)}])}return Js(e)}function Mn(t){const e=[];if(void 0!==t.commentId){const i=t.commentId;e.push([2,ln.string(i)])}if(void 0!==t.params){const i=t.params;e.push([3,{type:Bs.LengthDelimited,value:An(i)}])}if(void 0!==t.targetLanguage){const i=t.targetLanguage;e.push([4,ln.string(i)])}return Js(e)}function Pn(t){const e=[];if(void 0!==t.index){const i=t.index;e.push([1,ln.int32(i)])}return Js(e)}function On(t){const e=[];if(void 0!==t.unkparam){const i=t.unkparam;e.push([16,ln.int32(i)])}if(void 0!==t.clientVersion){const i=t.clientVersion;e.push([17,ln.string(i)])}if(void 0!==t.clientName){const i=t.clientName;e.push([18,ln.string(i)])}return Js(e)}function Dn(t){const e=[];if(void 0!==t.client){const i=t.client;e.push([1,{type:Bs.LengthDelimited,value:On(i)}])}return Js(e)}function Nn(t){const e=[];if(void 0!==t.text){const i=t.text;e.push([1,ln.string(i)])}return Js(e)}function Ln(t){const e=[];if(void 0!==t.text){const i=t.text;e.push([1,ln.string(i)])}return Js(e)}function Bn(t){const e=[];for(const i of t.list)e.push([1,ln.string(i)]);return Js(e)}function Vn(t){const e=[];if(void 0!==t.id){const i=t.id;e.push([1,ln.int32(i)])}return Js(e)}function Un(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([1,ln.string(i)])}return Js(e)}function jn(t){const e=[];if(void 0!==t.imageData){const i=t.imageData;e.push([1,ln.bytes(i)])}return Js(e)}function Wn(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([1,ln.int32(i)])}if(void 0!==t.thumbnail){const i=t.thumbnail;e.push([3,{type:Bs.LengthDelimited,value:jn(i)}])}return Js(e)}function Fn(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([1,ln.int32(i)])}return Js(e)}function Hn(t){const e=[];if(void 0!==t.unkparam){const i=t.unkparam;e.push([1,ln.int32(i)])}if(void 0!==t.choice){const i=t.choice;e.push([2,ln.int32(i)])}return Js(e)}function $n(t){const e=[];if(void 0!==t.unkparam){const i=t.unkparam;e.push([1,ln.int32(i)])}if(void 0!==t.choice){const i=t.choice;e.push([2,ln.int32(i)])}return Js(e)}function Gn(t){const e=[];if(void 0!==t.context){const i=t.context;e.push([1,{type:Bs.LengthDelimited,value:Dn(i)}])}if(void 0!==t.target){const i=t.target;e.push([2,ln.string(i)])}if(void 0!==t.title){const i=t.title;e.push([3,{type:Bs.LengthDelimited,value:Nn(i)}])}if(void 0!==t.description){const i=t.description;e.push([4,{type:Bs.LengthDelimited,value:Ln(i)}])}if(void 0!==t.tags){const i=t.tags;e.push([6,{type:Bs.LengthDelimited,value:Bn(i)}])}if(void 0!==t.category){const i=t.category;e.push([7,{type:Bs.LengthDelimited,value:Vn(i)}])}if(void 0!==t.license){const i=t.license;e.push([8,{type:Bs.LengthDelimited,value:Un(i)}])}if(void 0!==t.videoThumbnail){const i=t.videoThumbnail;e.push([20,{type:Bs.LengthDelimited,value:Wn(i)}])}if(void 0!==t.privacy){const i=t.privacy;e.push([38,{type:Bs.LengthDelimited,value:Fn(i)}])}if(void 0!==t.madeForKids){const i=t.madeForKids;e.push([68,{type:Bs.LengthDelimited,value:Hn(i)}])}if(void 0!==t.ageRestricted){const i=t.ageRestricted;e.push([69,{type:Bs.LengthDelimited,value:$n(i)}])}return Js(e)}function Yn(t){const e=[];if(void 0!==t.hashtag){const i=t.hashtag;e.push([1,ln.string(i)])}if(void 0!==t.type){const i=t.type;e.push([3,ln.int32(i)])}return Js(e)}function Kn(t,e){const i=function(t){const e=[];if(void 0!==t.id){const i=t.id;e.push([1,ln.string(i)])}if(void 0!==t.timestamp){const i=t.timestamp;e.push([5,ln.int32(i)])}return Js(e)}({id:t,timestamp:e});return encodeURIComponent(Rb(i).replace(/\+/g,"-").replace(/\//g,"_"))}function qn(t){var e;return function(t){const e={id:"",timestamp:0},i=function(t){let e=0;const i=t.byteOffset,s=[],n=new DataView(t.buffer,i);for(;e<t.length;){const o=Xs(new DataView(t.buffer,i+e)),a=o[1][0];e+=o[0];const r=7&a,l=a>>>3;switch(r){default:throw new Error(`Unknown wire type ${r}`);case Bs.Varint:{const[n,o]=Xs(new DataView(t.buffer,i+e));s.push([l,{type:r,value:o}]),e+=n;break}case Bs.Fixed64:const o=n.getUint32(e,!0),a=n.getUint32(e+=4,!0);e+=4,s.push([l,{type:r,value:new js(o,a)}]);break;case Bs.LengthDelimited:{const[n,o]=Xs(new DataView(t.buffer,i+e));s.push([l,{type:r,value:t.subarray(e+=n,e+=o[0])}]);break}case Bs.StartGroup:case Bs.EndGroup:s.push([l,{type:r}]);break;case Bs.Fixed32:s.push([l,{type:r,value:n.getUint32(e,!0)}]),e+=4}}return s}(t),s=new Map(i);t:{const t=s.get(1);if(void 0===t)break t;const i=rn.string(t);void 0!==i&&(e.id=i)}t:{const t=s.get(5);if(void 0===t)break t;const i=rn.int32(t);void 0!==i&&(e.timestamp=i)}return e}((e=decodeURIComponent(t),new Uint8Array(atob(e).split("").map((t=>t.charCodeAt(0))))))}function zn(t){const e=function(t){const e=[];if(void 0!==t.params){const i=t.params;e.push([32,{type:Bs.LengthDelimited,value:yn(i)}])}return Js(e)}({params:{channelId:t}});return encodeURIComponent(Rb(e))}function Xn(t){const e={hd:"featuresHd",subtitles:"featuresSubtitles",creative_commons:"featuresCreativeCommons","3d":"features3D",live:"featuresLive",purchased:"featuresPurchased","4k":"features4K",360:"features360",location:"featuresLocation",hdr:"featuresHdr",vr180:"featuresVr180"},i={};if(t?i.filters={}:i.noFilter=0,i.filters&&(t.upload_date&&(i.filters.uploadDate={all:void 0,hour:1,today:2,week:3,month:4,year:5}[t.upload_date]),t.type&&(i.filters.type={all:void 0,video:1,channel:2,playlist:3,movie:4}[t.type]),t.duration&&(i.filters.duration={all:void 0,short:1,long:2,medium:3}[t.duration]),t.sort_by&&"relevance"!==t.sort_by&&(i.sortBy={relevance:void 0,rating:1,upload_date:2,view_count:3}[t.sort_by]),t.features))for(const s of t.features)i.filters[e[s]]=1;const s=function(t){const e=[];if(void 0!==t.sortBy){const i=t.sortBy;e.push([1,ln.int32(i)])}if(void 0!==t.filters){const i=t.filters;e.push([2,{type:Bs.LengthDelimited,value:gn(i)}])}if(void 0!==t.noFilter){const i=t.noFilter;e.push([19,ln.int32(i)])}return Js(e)}(i);return encodeURIComponent(Rb(s))}function Qn(t){var e;const i={filters:{type:{}}};t.type&&"all"!==t.type&&(null===(e=i.filters)||void 0===e?void 0:e.type)&&(i.filters.type[t.type]=1);const s=function(t){const e=[];if(void 0!==t.filters){const i=t.filters;e.push([2,{type:Bs.LengthDelimited,value:bn(i)}])}return Js(e)}(i);return encodeURIComponent(Rb(s))}function Jn(t,e){const i=function(t){const e=[];if(void 0!==t.params){const i=t.params;e.push([1,{type:Bs.LengthDelimited,value:xn(i)}])}if(void 0!==t.number0){const i=t.number0;e.push([2,ln.int32(i)])}if(void 0!==t.number1){const i=t.number1;e.push([3,ln.int32(i)])}return Js(e)}({params:{ids:{channelId:t,videoId:e}},number0:1,number1:4});return btoa(encodeURIComponent(Rb(i)))}function Zn(t,e={}){const i=function(t){const e=[];if(void 0!==t.ctx){const i=t.ctx;e.push([2,{type:Bs.LengthDelimited,value:Sn(i)}])}if(void 0!==t.unkParam){const i=t.unkParam;e.push([3,ln.int32(i)])}if(void 0!==t.params){const i=t.params;e.push([6,{type:Bs.LengthDelimited,value:kn(i)}])}return Js(e)}({ctx:{videoId:t},unkParam:6,params:{opts:{videoId:t,sortBy:{TOP_COMMENTS:0,NEWEST_FIRST:1}[e.sort_by||"TOP_COMMENTS"],type:e.type||2},target:"comments-section"}});return encodeURIComponent(Rb(i))}function to(t){const e=function(t){const e=[];if(void 0!==t.videoId){const i=t.videoId;e.push([2,ln.string(i)])}if(void 0!==t.params){const i=t.params;e.push([5,{type:Bs.LengthDelimited,value:En(i)}])}if(void 0!==t.number){const i=t.number;e.push([10,ln.int32(i)])}return Js(e)}({videoId:t,params:{index:0},number:7});return encodeURIComponent(Rb(e))}function eo(t,e={}){const i={type:t,commentId:e.comment_id||" ",videoId:e.video_id||" ",channelId:" ",unkNum:2};if(e.hasOwnProperty("text")){if("string"!=typeof e.target_language)throw new Error("target_language must be a string");e.comment_id&&delete i.unkNum,i.translateCommentParams={params:{comment:{text:e.text}},commentId:e.comment_id||" ",targetLanguage:e.target_language}}const s=function(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([1,ln.int32(i)])}if(void 0!==t.unkNum){const i=t.unkNum;e.push([2,ln.int32(i)])}if(void 0!==t.commentId){const i=t.commentId;e.push([3,ln.string(i)])}if(void 0!==t.videoId){const i=t.videoId;e.push([5,ln.string(i)])}if(void 0!==t.channelId){const i=t.channelId;e.push([23,ln.string(i)])}if(void 0!==t.translateCommentParams){const i=t.translateCommentParams;e.push([31,{type:Bs.LengthDelimited,value:Mn(i)}])}return Js(e)}(i);return encodeURIComponent(Rb(s))}function io(t,e){const i=function(t){const e=[];if(void 0!==t.channelId){const i=t.channelId;e.push([1,ln.string(i)])}if(void 0!==t.prefId){const i=t.prefId;e.push([2,{type:Bs.LengthDelimited,value:Pn(i)}])}if(void 0!==t.number0){const i=t.number0;e.push([3,ln.int32(i)])}if(void 0!==t.number1){const i=t.number1;e.push([4,ln.int32(i)])}return Js(e)}({channelId:t,prefId:{index:e},number0:0,number1:4});return encodeURIComponent(Rb(i))}function so(t){const e=function(t){const e=[];if(void 0!==t.params){const i=t.params;e.push([93,{type:Bs.LengthDelimited,value:Yn(i)}])}return Js(e)}({params:{hashtag:t,type:1}});return encodeURIComponent(Rb(e))}var no;Object.assign(Object.assign({},hn),{double:dn(8,((t,e,i)=>{t.setFloat64(e,i,!0)})),float:dn(4,((t,e,i)=>{t.setFloat32(e,i,!0)})),fixed32:dn(4,((t,e,i)=>{t.setUint32(e,i,!0)})),fixed64:dn(8,((t,e,i)=>{const s=js.parse(i);t.setUint32(e,s[0],!0),t.setUint32(e+4,s[1],!0)})),sfixed32:dn(4,((t,e,i)=>{t.setInt32(e,i,!0)})),sfixed64:dn(8,((t,e,i)=>{const s=js.parse(i);t.setUint32(e,s[0],!0),t.setUint32(e+4,s[1],!0)}))});class oo extends y{constructor(t){var e,i,s,n,o,a,r;super(),no.set(this,void 0),this.content=new $(t.contentText),this.published=new $(t.publishedTimeText),this.author_is_channel_owner=t.authorIsChannelOwner,this.current_user_reply_thumbnail=j.fromResponse(t.currentUserReplyThumbnail),this.sponsor_comment_badge=lb.parseItem(t.sponsorCommentBadge,Ls),this.paid_comment_chip=lb.parseItem(t.paidCommentChipRenderer,Ds),this.author_badge=lb.parseItem(t.authorCommentBadge,As),this.author=new hb(Object.assign(Object.assign({},t.authorText),{navigationEndpoint:t.authorEndpoint}),this.author_badge?[{metadataBadgeRenderer:null===(e=this.author_badge)||void 0===e?void 0:e.orig_badge}]:null,t.authorThumbnail),this.action_menu=lb.parseItem(t.actionMenu,ut),this.action_buttons=lb.parseItem(t.actionButtons,xi),this.comment_id=t.commentId,this.vote_status=t.voteStatus,this.vote_count=t.voteCount?new $(t.voteCount).toString():"0",this.reply_count=t.replyCount||0,this.is_liked=!!(null===(s=null===(i=this.action_buttons)||void 0===i?void 0:i.like_button)||void 0===s?void 0:s.is_toggled),this.is_disliked=!!(null===(o=null===(n=this.action_buttons)||void 0===n?void 0:n.dislike_button)||void 0===o?void 0:o.is_toggled),this.is_hearted=!!(null===(r=null===(a=this.action_buttons)||void 0===a?void 0:a.creator_heart)||void 0===r?void 0:r.is_hearted),this.is_pinned=!!t.pinnedCommentBadge,this.is_member=!!t.sponsorCommentBadge}like(){var t;return d(this,void 0,void 0,(function*(){if(!m(this,no,"f"))throw new fb("An active caller must be provide to perform this operation.");const e=null===(t=this.action_buttons)||void 0===t?void 0:t.like_button;if(!e)throw new fb("Like button was not found.",{comment_id:this.comment_id});if(e.is_toggled)throw new fb("This comment is already liked",{comment_id:this.comment_id});return yield e.endpoint.call(m(this,no,"f"),{parse:!1})}))}dislike(){var t;return d(this,void 0,void 0,(function*(){if(!m(this,no,"f"))throw new fb("An active caller must be provide to perform this operation.");const e=null===(t=this.action_buttons)||void 0===t?void 0:t.dislike_button;if(!e)throw new fb("Dislike button was not found.",{comment_id:this.comment_id});if(e.is_toggled)throw new fb("This comment is already disliked",{comment_id:this.comment_id});return yield e.endpoint.call(m(this,no,"f"),{parse:!1})}))}reply(t){var e,i,s;return d(this,void 0,void 0,(function*(){if(!m(this,no,"f"))throw new fb("An active caller must be provide to perform this operation.");if(!(null===(e=this.action_buttons)||void 0===e?void 0:e.reply_button))throw new fb("Cannot reply to another reply. Try mentioning the user instead.",{comment_id:this.comment_id});const n=null===(i=this.action_buttons)||void 0===i?void 0:i.reply_button;if(!(null===(s=n.endpoint)||void 0===s?void 0:s.dialog))throw new fb("Reply button endpoint did not have a dialog.");const o=n.endpoint.dialog.as(Ps).reply_button;if(!o)throw new fb("Reply button was not found in the dialog.",{comment_id:this.comment_id});if(!o.endpoint)throw new fb("Reply button endpoint was not found.",{comment_id:this.comment_id});return yield o.endpoint.call(m(this,no,"f"),{commentText:t})}))}translate(t){var e,i,s,n,o,a;return d(this,void 0,void 0,(function*(){if(!m(this,no,"f"))throw new fb("An active caller must be provide to perform this operation.");const r=eo(22,{text:this.content.toString().replace(/[^\p{L}\p{N}\p{P}\p{Z}]/gu,""),target_language:t,comment_id:this.comment_id}),l=yield m(this,no,"f").execute("comment/perform_comment_action",{action:r,client:"ANDROID"}),c=null===(i=null===(e=l.data.frameworkUpdates)||void 0===e?void 0:e.entityBatchUpdate)||void 0===i?void 0:i.mutations,h=null===(a=null===(o=null===(n=null===(s=null==c?void 0:c[0])||void 0===s?void 0:s.payload)||void 0===n?void 0:n.commentEntityPayload)||void 0===o?void 0:o.translatedContent)||void 0===a?void 0:a.content;return Object.assign(Object.assign({},l),{content:h})}))}setActions(t){f(this,no,t,"f")}}no=new WeakMap,oo.type="Comment";const ao=oo;class ro extends y{constructor(t){super(),this.id=t.id,this.categories=lb.parseArray(t.categories),this.category_buttons=lb.parseArray(t.categoryButtons),this.search_placeholder=new $(t.searchPlaceholderText),this.search_no_results=new $(t.searchNoResultsText),this.pick_skin_tone=new $(t.pickSkinToneText),this.clear_search_label=t.clearSearchLabel,this.skin_tone_generic_label=t.skinToneGenericLabel,this.skin_tone_light_label=t.skinToneLightLabel,this.skin_tone_medium_light_label=t.skinToneMediumLightLabel,this.skin_tone_medium_label=t.skinToneMediumLabel,this.skin_tone_medium_dark_label=t.skinToneMediumDarkLabel,this.skin_tone_dark_label=t.skinToneDarkLabel}}ro.type="EmojiPicker";const lo=ro;class co extends y{constructor(t){super(),this.editable_text=new $(t.editableText),this.author_thumbnail=j.fromResponse(t.authorThumbnail),this.submit_button=lb.parseItem(t.submitButton,R),this.cancel_button=lb.parseItem(t.cancelButton,R),this.placeholder=new $(t.placeholderText),this.emoji_button=lb.parseItem(t.emojiButton,R),this.emoji_picker=lb.parseItem(t.emojiPicker,lo)}}co.type="CommentDialog";const ho=co;class uo extends y{constructor(t){super(),this.contents=lb.parseArray(t.contents),this.view_replies=lb.parseItem(t.viewReplies,R),this.hide_replies=lb.parseItem(t.hideReplies,R),this.view_replies_creator_thumbnail=j.fromResponse(t.viewRepliesCreatorThumbnail),this.has_channel_owner_replied=!!t.viewRepliesCreatorThumbnail}}uo.type="CommentReplies";const po=uo;class mo extends y{constructor(t){super(),this.simplebox_avatar=j.fromResponse(t.simpleboxAvatar),this.simplebox_placeholder=new $(t.simpleboxPlaceholder)}}mo.type="CommentsSimplebox";const fo=mo;class vo extends y{constructor(t){super(),Reflect.has(t,"teaserAvatar")&&(this.teaser_avatar=j.fromResponse(t.teaserAvatar)),Reflect.has(t,"teaserContent")&&(this.teaser_content=new $(t.teaserContent))}}vo.type="CommentsEntryPointTeaser";const yo=vo;class go extends y{constructor(t){super(),Reflect.has(t,"headerText")&&(this.header=new $(t.headerText)),Reflect.has(t,"commentCount")&&(this.comment_count=new $(t.commentCount)),(Reflect.has(t,"teaserAvatar")||Reflect.has(t,"simpleboxAvatar"))&&(this.teaser_avatar=j.fromResponse(t.teaserAvatar||t.simpleboxAvatar)),Reflect.has(t,"teaserContent")&&(this.teaser_content=new $(t.teaserContent)),Reflect.has(t,"contentRenderer")&&(this.content_renderer=qv(t.contentRenderer,[yo,fo])),Reflect.has(t,"simpleboxPlaceholder")&&(this.simplebox_placeholder=new $(t.simpleboxPlaceholder))}}go.type="CommentsEntryPointHeader";const _o=go;class bo extends y{constructor(t){super(),this.title=new $(t.titleText),this.count=new $(t.countText),this.comments_count=new $(t.commentsCount),this.create_renderer=lb.parseItem(t.createRenderer),this.sort_menu=lb.parseItem(t.sortMenu,De),Reflect.has(t,"customEmojis")&&(this.custom_emojis=t.customEmojis.map((t=>({emoji_id:t.emojiId,shortcuts:t.shortcuts,search_terms:t.searchTerms,image:j.fromResponse(t.image),is_custom_emoji:t.isCustomEmoji}))))}}bo.type="CommentsHeader";const wo=bo;class xo extends y{constructor(t){super(),this.submit_button=lb.parseItem(t.submitButton,R),this.cancel_button=lb.parseItem(t.cancelButton,R),this.author_thumbnail=j.fromResponse(t.authorThumbnail),this.placeholder=new $(t.placeholderText),this.avatar_size=t.avatarSize}}xo.type="CommentSimplebox";const So=xo;var To,Co;class Io extends y{constructor(t){super(),To.set(this,void 0),Co.set(this,void 0),this.comment=lb.parseItem(t.comment,ao),this.comment_replies_data=lb.parseItem(t.replies,po),this.is_moderated_elq_comment=t.isModeratedElqComment,this.has_replies=!!this.comment_replies_data}getReplies(){var t;return d(this,void 0,void 0,(function*(){if(!m(this,To,"f"))throw new fb("Actions instance not set for this thread.");if(!this.comment_replies_data)throw new fb("This comment has no replies.",this);const e=null===(t=this.comment_replies_data.contents)||void 0===t?void 0:t.firstOfType(lt);if(!e)throw new fb("Replies continuation not found.");const i=yield e.endpoint.call(m(this,To,"f"),{parse:!0});if(!i.on_response_received_endpoints_memo)throw new fb("Unexpected response.",i);return this.replies=b(i.on_response_received_endpoints_memo.getType(ao).map((t=>(t.setActions(m(this,To,"f")),t)))),f(this,Co,null==i?void 0:i.on_response_received_endpoints_memo.getType(lt).first(),"f"),this}))}getContinuation(){var t;return d(this,void 0,void 0,(function*(){if(!this.replies)throw new fb("Cannot retrieve continuation because this thread's replies have not been loaded.");if(!m(this,Co,"f"))throw new fb("Continuation not found.");if(!m(this,To,"f"))throw new fb("Actions instance not set for this thread.");const e=null===(t=m(this,Co,"f").button)||void 0===t?void 0:t.as(R);if(!e)throw new fb('"Load more" button not found.');const i=yield e.endpoint.call(m(this,To,"f"),{parse:!0});if(!i.on_response_received_endpoints_memo)throw new fb("Unexpected response.",i);return this.replies=b(i.on_response_received_endpoints_memo.getType(ao).map((t=>(t.setActions(m(this,To,"f")),t)))),f(this,Co,i.on_response_received_endpoints_memo.getType(lt).first(),"f"),this}))}get has_continuation(){if(!this.replies)throw new fb("Cannot determine if there is a continuation because this thread's replies have not been loaded.");return!!m(this,Co,"f")}setActions(t){f(this,To,t,"f")}}To=new WeakMap,Co=new WeakMap,Io.type="CommentThread";const ko=Io;class Eo extends y{constructor(t){super(),this.title=new $(t.title),this.channel_id=t.channelId,this.thumbnail=j.fromResponse(t.thumbnail),this.display_name=new $(t.displayName),this.video_count=new $(t.videoCountText),this.subscriber_count=new $(t.subscriberCountText),this.endpoint=new U(t.navigationEndpoint),this.tv_banner=j.fromResponse(t.tvBanner),this.menu=lb.parseItem(t.menu,ut)}}Eo.type="CompactChannel";const Ro=Eo;class Ao extends y{constructor(t){super(),this.title=new $(t.title).toString(),this.endpoint=new U(t.navigationEndpoint),this.style=t.style}}Ao.type="CompactLink";const Mo=Ao;class Po extends y{constructor(t){super(),this.thumbnail=j.fromResponse(t.thumbnail)}}Po.type="PlaylistCustomThumbnail";const Oo=Po;class Do extends y{constructor(t){super(),this.thumbnail=j.fromResponse(t.thumbnail)}}Do.type="PlaylistVideoThumbnail";const No=Do;class Lo extends y{constructor(t){var e;super(),this.id=t.playlistId,this.title=new $(t.title),this.author=(null===(e=t.shortBylineText)||void 0===e?void 0:e.simpleText)?new $(t.shortBylineText):new hb(t.longBylineText,t.ownerBadges,null),this.thumbnails=j.fromResponse(t.thumbnail||{thumbnails:t.thumbnails.map((t=>t.thumbnails)).flat(1)}),this.video_count=new $(t.thumbnailText),this.video_count_short=new $(t.videoCountShortText),this.first_videos=lb.parseArray(t.videos),this.share_url=t.shareUrl||null,this.menu=lb.parseItem(t.menu),this.badges=lb.parseArray(t.ownerBadges),this.endpoint=new U(t.navigationEndpoint),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays),Reflect.has(t,"thumbnailRenderer")&&(this.thumbnail_renderer=lb.parseItem(t.thumbnailRenderer,[No,Oo])||void 0),Reflect.has(t,"viewPlaylistText")&&(this.view_playlist=new $(t.viewPlaylistText))}}Lo.type="Playlist";const Bo=Lo;class Vo extends Bo{constructor(t){super(t)}}Vo.type="CompactMix";const Uo=Vo;class jo extends y{constructor(t){var e;super();const i=(null===(e=t.thumbnailOverlays.find((t=>t.thumbnailOverlayTimeStatusRenderer)))||void 0===e?void 0:e.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=t.videoId,this.title=new $(t.title),this.top_metadata_items=new $(t.topMetadataItems),this.thumbnails=j.fromResponse(t.thumbnail),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays),this.author=new hb(t.shortBylineText);const s=t.lengthText?new $(t.lengthText).toString():new $(i).toString();this.duration={text:s,seconds:kb(s)},this.endpoint=new U(t.navigationEndpoint),this.badges=lb.parseArray(t.badges),this.use_vertical_poster=t.useVerticalPoster,this.menu=lb.parseItem(t.menu,ut)}}jo.type="CompactMovie";const Wo=jo;class Fo extends Bo{constructor(t){super(t)}}Fo.type="CompactPlaylist";const Ho=Fo;class $o extends y{constructor(t){super(),this.title=new $(t.title),this.description=new $(t.description),this.video_count=new $(t.videoCountText),this.endpoint=new U(t.navigationEndpoint),this.thumbnail=j.fromResponse(t.thumbnail)}}$o.type="CompactStation";const Go=$o;class Yo extends y{constructor(t){super(),this.title=new $(t.title),this.confirm_button=lb.parseItem(t.confirmButton,R),this.cancel_button=lb.parseItem(t.cancelButton,R),this.dialog_messages=t.dialogMessages.map((t=>new $(t)))}}Yo.type="ConfirmDialog";const Ko=Yo;class qo extends y{constructor(t){super(),this.image=t.image.sources.map((t=>new j(t))).sort(((t,e)=>e.width-t.width)),this.style=t.style}}qo.type="ContentPreviewImageView";const zo=qo;class Xo extends y{constructor(t){super(),this.text=new $(t.text)}}Xo.type="Message";const Qo=Xo;class Jo extends y{constructor(t){super(),this.availability_message=lb.parseItem(t.availabilityMessage,Qo)}}Jo.type="ConversationBar";const Zo=Jo;class ta extends y{constructor(t){super(),this.copy_button=lb.parseItem(t.copyButton,R),this.short_url=t.shortUrl,this.style=t.style}}ta.type="CopyLink";const ea=ta;class ia extends y{constructor(t){super(),this.time_range_start_millis=t.timeRangeStartMillis,this.marker_duration_millis=t.markerDurationMillis,this.heat_marker_intensity_score_normalized=t.heatMarkerIntensityScoreNormalized}}ia.type="HeatMarker";const sa=ia;class na extends y{constructor(t){super(),this.max_height_dp=t.maxHeightDp,this.min_height_dp=t.minHeightDp,this.show_hide_animation_duration_millis=t.showHideAnimationDurationMillis,this.heat_markers=lb.parseArray(t.heatMarkers,sa),this.heat_markers_decorations=lb.parseArray(t.heatMarkersDecorations)}}na.type="Heatmap";const oa=na;class aa extends y{constructor(t){super(),this.marker_key=t.key,this.value={},Reflect.has(t,"value")&&(Reflect.has(t.value,"heatmap")&&(this.value.heatmap=lb.parseItem(t.value.heatmap,oa)),Reflect.has(t.value,"chapters")&&(this.value.chapters=lb.parseArray(t.value.chapters,ys)))}}aa.type="Marker";class ra extends y{constructor(t){var e;super(),this.markers_map=b((null===(e=t.markersMap)||void 0===e?void 0:e.map((t=>new aa(t))))||[])}}ra.type="MultiMarkersPlayerBar";const la=ra;class ca extends y{constructor(t){super(),this.player_bar=lb.parseItem(t.playerBar,la),this.player_bar_action_button=lb.parseItem(t.playerBarActionButton,R)}}ca.type="DecoratedPlayerBar";const ha=ca;class da extends y{constructor(t){super(),this.title=new $(t.title),this.description=new $(t.description),this.endpoint=new U(t.navigationEndpoint),this.large_form_factor_background_thumbnail=lb.parseItem(t.largeFormFactorBackgroundThumbnail),this.small_form_factor_background_thumbnail=lb.parseItem(t.smallFormFactorBackgroundThumbnail),this.scrim_color_values=t.scrimColorValues,this.min_panel_display_duration_ms=t.minPanelDisplayDurationMs,this.min_video_play_duration_ms=t.minVideoPlayDurationMs,this.scrim_duration=t.scrimDuration,this.metadata_order=t.metadataOrder,this.panel_layout=t.panelLayout}}da.type="DefaultPromoPanel";const ua=da;class pa extends y{constructor(t){super(),this.text=new $(t.didYouMean).toString(),this.corrected_query=new $(t.correctedQuery),this.endpoint=new U(t.navigationEndpoint||t.correctedQueryEndpoint)}}pa.type="DidYouMean";const ma=pa;class fa extends y{constructor(t){super(),this.style=t.style,this.size=t.size,this.endpoint=new U(t.command),this.target_id=t.targetId}}fa.type="DownloadButton";const va=fa;class ya extends y{constructor(t){super(),this.text=t.text.content}}ya.type="DynamicTextView";const ga=ya;class _a extends y{constructor(t){var e;super(),Reflect.has(t,"type")&&Reflect.has(t.type,"textType")&&(this.text=null===(e=t.type.textType.text)||void 0===e?void 0:e.content),this.properties=t.properties,Reflect.has(t,"childElements")&&(this.child_elements=t.childElements.map((t=>new _a(t))))}}_a.type="ChildElement";const ba=_a;class wa extends y{constructor(t){var e;if(super(),Reflect.has(t,"elementRenderer"))return lb.parseItem(t,wa);const i=t.newElement.type.componentType;this.model=lb.parseItem(null==i?void 0:i.model),Reflect.has(t,"newElement")&&Reflect.has(t.newElement,"childElements")&&(this.child_elements=b((null===(e=t.newElement.childElements)||void 0===e?void 0:e.map((t=>new ba(t))))||[]))}}wa.type="Element";const xa=wa;class Sa extends y{constructor(t){super(),this.title=new $(t.title),this.first_option=lb.parseItem(t.firstOption),this.menu=lb.parseItem(t.menu,ut)}}Sa.type="EmergencyOnebox";const Ta=Sa;class Ca extends y{constructor(t){super(),this.category_id=t.categoryId,this.title=new $(t.title),this.emoji_ids=t.emojiIds,this.image_loading_lazy=!!t.imageLoadingLazy,this.category_type=t.categoryType}}Ca.type="EmojiPickerCategory";const Ia=Ca;class ka extends y{constructor(t){var e;super(),this.category_id=t.categoryId,Reflect.has(t,"icon")&&(this.icon_type=null===(e=t.icon)||void 0===e?void 0:e.iconType),this.tooltip=t.tooltip}}ka.type="EmojiPickerCategoryButton";const Ea=ka;class Ra extends y{constructor(t){super(),this.category_id=t.categoryId,this.title=new $(t.title),this.upsell=new $(t.upsell),this.emoji_tooltip=t.emojiTooltip,this.endpoint=new U(t.command),this.emoji_ids=t.emojiIds}}Ra.type="EmojiPickerUpsellCategory";const Aa=Ra;class Ma extends y{constructor(t){super(),this.style=t.style,this.title=new $(t.title),this.endpoint=new U(t.endpoint),Reflect.has(t,"image")&&(this.image=j.fromResponse(t.image)),Reflect.has(t,"icon")&&(this.icon=j.fromResponse(t.icon)),Reflect.has(t,"metadata")&&(this.metadata=new $(t.metadata)),Reflect.has(t,"callToAction")&&(this.call_to_action=new $(t.callToAction)),Reflect.has(t,"hovercardButton")&&(this.hovercard_button=lb.parseItem(t.hovercardButton)),Reflect.has(t,"isSubscribe")&&(this.is_subscribe=!!t.isSubscribe),Reflect.has(t,"playlistLength")&&(this.playlist_length=new $(t.playlistLength)),Reflect.has(t,"thumbnailOverlays")&&(this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays)),this.left=parseFloat(t.left),this.width=parseFloat(t.width),this.top=parseFloat(t.top),this.aspect_ratio=parseFloat(t.aspectRatio),this.start_ms=parseFloat(t.startMs),this.end_ms=parseFloat(t.endMs),this.id=t.id}}Ma.type="EndscreenElement";const Pa=Ma;class Oa extends y{constructor(t){super(),this.id=t.playlistId,this.title=new $(t.title),this.author=new $(t.longBylineText),this.endpoint=new U(t.navigationEndpoint),this.thumbnails=j.fromResponse(t.thumbnail),this.video_count=new $(t.videoCountText)}}Oa.type="EndScreenPlaylist";const Da=Oa;class Na extends y{constructor(t){super(),this.id=t.videoId,this.title=new $(t.title),this.thumbnails=j.fromResponse(t.thumbnail),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays),this.author=new hb(t.shortBylineText,t.ownerBadges),this.endpoint=new U(t.navigationEndpoint),this.short_view_count=new $(t.shortViewCountText),this.badges=lb.parseArray(t.badges),this.duration={text:new $(t.lengthText).toString(),seconds:t.lengthInSeconds}}}Na.type="EndScreenVideo";const La=Na;class Ba extends y{constructor(t){super(),this.title=t.title,this.endpoint=new U(t.endpoint),this.selected=t.selected,this.content=lb.parseItem(t.content)}}Ba.type="ExpandableTab";const Va=Ba;class Ua extends y{constructor(t){super(),this.items=lb.parseArray(t.items)}get contents(){return this.items}}Ua.type="ExpandedShelfContents";const ja=Ua;class Wa extends y{constructor(t){super(),this.dialog_message=new $(t.dialogMessage),this.confirm_label=new $(t.confirmLabel)}}Wa.type="FancyDismissibleDialog";const Fa=Wa;class Ha extends y{constructor(t){super(),this.contents=lb.parseArray(t.contents,ws)}}Ha.type="FeedFilterChipBar";const $a=Ha;class Ga extends y{constructor(t){super(),this.title=new $(t.title)}}Ga.type="FeedTabbedHeader";const Ya=Ga;class Ka extends y{constructor(t){super(),this.title=new $(t.title),this.box_art=j.fromResponse(t.boxArt),this.box_art_overlay_text=new $(t.boxArtOverlayText),this.endpoint=new U(t.endpoint),this.is_official_box_art=!!t.isOfficialBoxArt}}Ka.type="GameDetails";const qa=Ka;class za extends y{constructor(t){var e,i,s;super(),this.items=lb.parseArray(t.items),Reflect.has(t,"header")&&(this.header=lb.parseItem(t.header)),Reflect.has(t,"isCollapsible")&&(this.is_collapsible=t.isCollapsible),Reflect.has(t,"visibleRowCount")&&(this.visible_row_count=t.visibleRowCount),Reflect.has(t,"targetId")&&(this.target_id=t.targetId),this.continuation=(null===(s=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextContinuationData)||void 0===s?void 0:s.continuation)||null}get contents(){return this.items}}za.type="Grid";const Xa=za;class Qa extends y{constructor(t){super(),this.id=t.channelId,this.author=new hb(Object.assign(Object.assign({},t.title),{navigationEndpoint:t.navigationEndpoint}),t.ownerBadges,t.thumbnail),this.subscribers=new $(t.subscriberCountText),this.video_count=new $(t.videoCountText),this.endpoint=new U(t.navigationEndpoint),this.subscribe_button=lb.parseItem(t.subscribeButton)}}Qa.type="GridChannel";const Ja=Qa;class Za extends y{constructor(t){super(),this.title=new $(t.title)}}Za.type="GridHeader";const tr=Za;class er extends y{constructor(t){var e,i;super(),this.id=t.playlistId,this.title=new $(t.title),this.author=(null===(e=t.shortBylineText)||void 0===e?void 0:e.simpleText)?new $(t.shortBylineText):(null===(i=t.longBylineText)||void 0===i?void 0:i.simpleText)?new $(t.longBylineText):null,this.thumbnails=j.fromResponse(t.thumbnail),this.video_count=new $(t.videoCountText),this.video_count_short=new $(t.videoCountShortText),this.endpoint=new U(t.navigationEndpoint),this.secondary_endpoint=new U(t.secondaryNavigationEndpoint),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays)}}er.type="GridMix";const ir=er;class sr extends y{constructor(t){var e;super();const i=null===(e=t.thumbnailOverlays.find((t=>t.hasOwnProperty("thumbnailOverlayTimeStatusRenderer"))))||void 0===e?void 0:e.thumbnailOverlayTimeStatusRenderer;this.id=t.videoId,this.title=new $(t.title),this.thumbnails=j.fromResponse(t.thumbnail),this.duration=t.lengthText?new $(t.lengthText):(null==i?void 0:i.text)?new $(i.text):null,this.endpoint=new U(t.navigationEndpoint),this.badges=lb.parseArray(t.badges,Dt),this.metadata=new $(t.metadata),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays)}}sr.type="GridMovie";const nr=sr;class or extends y{constructor(t){var e;super(),this.id=t.playlistId,this.title=new $(t.title),Reflect.has(t,"shortBylineText")&&(this.author=new hb(t.shortBylineText,t.ownerBadges)),this.badges=lb.parseArray(t.ownerBadges),this.endpoint=new U(t.navigationEndpoint),this.view_playlist=new $(t.viewPlaylistText),this.thumbnails=j.fromResponse(t.thumbnail),this.thumbnail_renderer=lb.parseItem(t.thumbnailRenderer),this.sidebar_thumbnails=[].concat(...(null===(e=t.sidebarThumbnails)||void 0===e?void 0:e.map((t=>j.fromResponse(t))))||[])||null,this.video_count=new $(t.thumbnailText),this.video_count_short=new $(t.videoCountShortText)}}or.type="GridPlaylist";const ar=or;class rr extends y{constructor(t){super(),this.thumbnail=j.fromResponse(t.thumbnail)}}rr.type="ShowCustomThumbnail";const lr=rr;class cr extends y{constructor(t){super(),Reflect.has(t,"text")&&(this.text=new $(t.text)),Reflect.has(t,"icon")&&Reflect.has(t.icon,"iconType")&&(this.icon_type=t.icon.iconType)}}cr.type="ThumbnailOverlayBottomPanel";const hr=cr;class dr extends y{constructor(t){super(),this.title=new $(t.title),this.thumbnail_renderer=qv(t.thumbnailRenderer,lr),this.endpoint=new U(t.navigationEndpoint),this.long_byline_text=new $(t.longBylineText),this.thumbnail_overlays=zv(t.thumbnailOverlays,hr),this.author=new hb(t.shortBylineText,void 0)}}dr.type="GridShow";const ur=dr;class pr extends y{constructor(t){var e,i;super();const s=null===(e=t.thumbnailOverlays.find((t=>t.hasOwnProperty("thumbnailOverlayTimeStatusRenderer"))))||void 0===e?void 0:e.thumbnailOverlayTimeStatusRenderer;this.id=t.videoId,this.title=new $(t.title),this.thumbnails=j.fromResponse(t.thumbnail),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays),this.rich_thumbnail=lb.parseItem(t.richThumbnail),this.published=new $(t.publishedTimeText),this.duration=t.lengthText?new $(t.lengthText):(null==s?void 0:s.text)?new $(s.text):null,this.author=t.shortBylineText&&new hb(t.shortBylineText,t.ownerBadges),this.views=new $(t.viewCountText),this.short_view_count=new $(t.shortViewCountText),this.endpoint=new U(t.navigationEndpoint),this.menu=lb.parseItem(t.menu,ut),Reflect.has(t,"buttons")&&(this.buttons=lb.parseArray(t.buttons)),Reflect.has(t,"upcomingEventData")&&(this.upcoming=new Date(Number(`${t.upcomingEventData.startTime}000`)),this.upcoming_text=new $(t.upcomingEventData.upcomingEventText),this.is_reminder_set=!!(null===(i=t.upcomingEventData)||void 0===i?void 0:i.isReminderSet))}get is_upcoming(){return Boolean(this.upcoming&&this.upcoming>new Date)}}pr.type="GridVideo";const mr=pr;class fr extends y{constructor(t){super(),this.title=new $(t.formattedTitle),this.endpoint=new U(t.navigationEndpoint||t.serviceEndpoint),Reflect.has(t,"icon")&&Reflect.has(t.icon,"iconType")&&(this.icon_type=t.icon.iconType),Reflect.has(t,"thumbnail")&&(this.thumbnails=j.fromResponse(t.thumbnail)),Reflect.has(t,"badges")&&(this.badges=t.badges),this.is_primary=!!t.isPrimary}}fr.type="GuideEntry";const vr=fr;class yr extends y{constructor(t){super(),this.expander_item=qv(t.expanderItem,vr),this.collapser_item=qv(t.collapserItem,vr),this.expandable_items=zv(t.expandableItems)}}yr.type="GuideCollapsibleEntry";const gr=yr;class _r extends y{constructor(t){super(),this.header_entry=qv(t.headerEntry),this.expander_icon=t.expanderIcon.iconType,this.collapser_icon=t.collapserIcon.iconType,this.section_items=zv(t.sectionItems)}}_r.type="GuideCollapsibleSectionEntry";const br=_r;class wr extends vr{constructor(t){super(t.entryRenderer.guideEntryRenderer),this.always_show=!!t.alwaysShow}}wr.type="GuideDownloadsEntry";const xr=wr;class Sr extends y{constructor(t){super(),Reflect.has(t,"formattedTitle")&&(this.title=new $(t.formattedTitle)),this.items=zv(t.items)}}Sr.type="GuideSection";const Tr=Sr;class Cr extends Tr{}Cr.type="GuideSubscriptionsSection";const Ir=Cr;class kr extends y{constructor(t){super(),this.hashtag=new $(t.hashtag),this.hashtag_info=new $(t.hashtagInfoText)}}kr.type="HashtagHeader";const Er=kr;class Rr extends y{constructor(t){super(),this.hashtag=new $(t.hashtag),this.hashtag_info_text=new $(t.hashtagInfoText),this.hashtag_thumbnail=j.fromResponse(t.hashtagThumbnail),this.endpoint=new U(t.onTapCommand),this.hashtag_background_color=t.hashtagBackgroundColor,this.hashtag_video_count=new $(t.hashtagVideoCount),this.hashtag_channel_count=new $(t.hashtagChannelCount)}}Rr.type="HashtagTile";const Ar=Rr;class Mr extends y{constructor(t){super(),this.thumbnails=j.fromResponse(t.thumbnail),this.on_tap_endpoint=new U(t.onTap)}}Mr.type="HeroPlaylistThumbnail";const Pr=Mr;class Or extends y{constructor(t){super(),t.thumbnail&&(this.thumbnail={image:t.thumbnail.image.sources,endpoint:new U(t.thumbnail.onTap),on_long_press_endpoint:new U(t.thumbnail.onLongPress),content_mode:t.thumbnail.contentMode,crop_options:t.thumbnail.cropOptions}),this.background_image={image:t.backgroundImage.image.sources,gradient_image:t.backgroundImage.gradientImage.sources},this.strapline=t.strapline,this.title=t.title,this.description=t.description,this.cta={icon_name:t.cta.iconName,title:t.cta.title,endpoint:new U(t.cta.onTap),accessibility_text:t.cta.accessibilityText,state:t.cta.state},this.text_on_tap_endpoint=new U(t.textOnTap)}}Or.type="Panel";class Dr extends y{constructor(t){super(),this.panels=b(t.highlightsCarousel.panels.map((t=>new Or(t))))}}Dr.type="HighlightsCarousel";const Nr=Dr;class Lr extends y{constructor(t){super(),this.suggestion=new $(t.suggestion),this.endpoint=new U(t.navigationEndpoint),Reflect.has(t,"icon")&&(this.icon_type=t.icon.iconType),Reflect.has(t,"serviceEndpoint")&&(this.service_endpoint=new U(t.serviceEndpoint))}}Lr.type="SearchSuggestion";const Br=Lr;class Vr extends Br{constructor(t){super(t)}}Vr.type="HistorySuggestion";const Ur=Vr;class jr extends y{constructor(t){super(),this.items=lb.parseArray(t.items),this.previous_button=lb.parseItem(t.previousButton,R),this.next_button=lb.parseItem(t.nextButton,R)}get contents(){return this.items}}jr.type="HorizontalMovieList";const Wr=jr;class Fr extends y{constructor(t){var e;super(),this.icon_type=null===(e=t.icon)||void 0===e?void 0:e.iconType,Reflect.has(t,"tooltip")&&(this.tooltip=new $(t.tooltip).toString()),this.endpoint=new U(t.navigationEndpoint)}}Fr.type="IconLink";const Hr=Fr;class $r extends y{constructor(t){super(),this.including_results_for=new $(t.includingResultsFor),this.corrected_query=new $(t.correctedQuery),this.corrected_query_endpoint=new U(t.correctedQueryEndpoint),this.search_only_for=Reflect.has(t,"searchOnlyFor")?new $(t.searchOnlyFor):void 0,this.original_query=Reflect.has(t,"originalQuery")?new $(t.originalQuery):void 0,this.original_query_endpoint=Reflect.has(t,"originalQueryEndpoint")?new U(t.originalQueryEndpoint):void 0}}$r.type="IncludingResultsFor";const Gr=$r;class Yr extends y{constructor(t){super(),this.title=new $(t.title),this.source=new $(t.source),this.paragraphs=t.paragraphs.map((t=>new $(t))),this.thumbnail=j.fromResponse(t.thumbnail),this.source_endpoint=new U(t.sourceEndpoint),this.truncate_paragraphs=!!t.truncateParagraphs,this.background=t.background,Reflect.has(t,"inlineLinkIcon")&&Reflect.has(t.inlineLinkIcon,"iconType")&&(this.inline_link_icon_type=t.inlineLinkIcon.iconType)}}Yr.type="InfoPanelContent";const Kr=Yr;class qr extends y{constructor(t){var e;super(),this.title=new $(t.title),this.menu=lb.parseItem(t.menu,ut),this.content=lb.parseItem(t.content,Kr),this.background=t.background,Reflect.has(t,"icon")&&(this.icon_type=null===(e=t.icon)||void 0===e?void 0:e.iconType)}}qr.type="InfoPanelContainer";const zr=qr;class Xr extends y{constructor(t){super(),this.header_type=t.type,this.title=new $(t.title),this.description=new $(t.description),this.metadata=new $(t.metadata),this.badges=lb.parseArray(t.badges,Dt),this.box_art=j.fromResponse(t.boxArt),this.banner=j.fromResponse(t.banner),this.buttons=lb.parseArray(t.buttons,[Ui,R]),this.auto_generated=new $(t.autoGenerated)}}Xr.type="InteractiveTabbedHeader";const Qr=Xr;class Jr extends y{constructor(t){super(),this.title=new $(t.title)}}Jr.type="ItemSectionHeader";const Zr=Jr;class tl extends y{constructor(t){super(),this.title=new $(t.title),this.selected=!!t.selected,this.endpoint=new U(t.endpoint)}}tl.type="Tab";const el=tl;class il extends y{constructor(t){super(),this.title=new $(t.title),this.tabs=lb.parseArray(t.tabs,el),Reflect.has(t,"endItems")&&(this.end_items=lb.parseArray(t.endItems))}}il.type="ItemSectionTabbedHeader";const sl=il;class nl extends y{constructor(t){var e,i,s;super(),this.header=lb.parseItem(t.header,[wo,Zr,sl]),this.contents=lb.parseArray(t.contents),(t.targetId||t.sectionIdentifier)&&(this.target_id=t.target_id||t.sectionIdentifier),t.continuations&&(this.continuation=null===(s=null===(i=null===(e=t.continuations)||void 0===e?void 0:e.at(0))||void 0===i?void 0:i.nextContinuationData)||void 0===s?void 0:s.continuation)}}nl.type="ItemSection";const ol=nl;class al extends y{constructor(t){super(),this.target={video_id:t.target.videoId},this.like_status=t.likeStatus,this.likes_allowed=t.likesAllowed,Reflect.has(t,"serviceEndpoints")&&(this.endpoints=t.serviceEndpoints.map((t=>new U(t))))}}al.type="LikeButton";const rl=al;class ll extends y{constructor(t){var e,i;super(),this.header=lb.parseItem(t.header),this.initial_display_state=t.initialDisplayState,this.continuation=null===(i=null===(e=t.continuations[0])||void 0===e?void 0:e.reloadContinuationData)||void 0===i?void 0:i.continuation,this.client_messages={reconnect_message:new $(t.clientMessages.reconnectMessage),unable_to_reconnect_message:new $(t.clientMessages.unableToReconnectMessage),fatal_error:new $(t.clientMessages.fatalError),reconnected_message:new $(t.clientMessages.reconnectedMessage),generic_error:new $(t.clientMessages.genericError)},this.is_replay=!!t.isReplay}}ll.type="LiveChat";const cl=ll;class hl extends y{constructor(t){super(),this.text=new $(t.text),Reflect.has(t,"icon")&&Reflect.has(t.icon,"iconType")&&(this.icon_type=t.icon.iconType),this.context_menu_button=lb.parseItem(t.contextMenuButton,R)}}hl.type="LiveChatBannerHeader";const dl=hl;class ul extends y{constructor(t){super(),this.header=lb.parseItem(t.header,dl),this.contents=lb.parseItem(t.contents),this.action_id=t.actionId,this.viewer_is_creator=t.viewerIsCreator,this.target_id=t.targetId,this.is_stackable=t.isStackable,this.background_type=t.backgroundType}}ul.type="LiveChatBanner";const pl=ul;class ml extends y{constructor(t){super(),this.banner=lb.parseItem(t.bannerRenderer,pl)}}ml.type="AddBannerToLiveChatCommand";const fl=ml;class vl extends y{constructor(t){super(),this.item=lb.parseItem(t.item),Reflect.has(t,"clientId")&&(this.client_id=t.clientId)}}vl.type="AddChatItemAction";const yl=vl;class gl extends y{constructor(t){super(),this.item=lb.parseItem(t.item),this.duration_sec=t.durationSec}}gl.type="AddLiveChatTickerItemAction";const _l=gl;class bl extends y{constructor(t){super(),this.client_assigned_id=t.clientAssignedId}}bl.type="DimChatItemAction";const wl=bl;class xl extends y{constructor(t){super(),this.menu_endpoint=new U(t.contextMenuEndpoint),this.moderation_buttons=lb.parseArray(t.moderationButtons,R),this.auto_moderated_item=lb.parseItem(t.autoModeratedItem),this.header_text=new $(t.headerText),this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3),this.id=t.id}}xl.type="LiveChatAutoModMessage";const Sl=xl;class Tl extends y{constructor(t){super(),this.poll_question=new $(t.pollQuestion),this.author_photo=j.fromResponse(t.authorPhoto),this.choices=t.pollChoices.map((t=>({option_id:t.pollOptionId,text:new $(t.text).toString()}))),this.collapsed_state_entity_key=t.collapsedStateEntityKey,this.live_chat_poll_state_entity_key=t.liveChatPollStateEntityKey,this.context_menu_button=lb.parseItem(t.contextMenuButton,R)}}Tl.type="LiveChatBannerPoll";const Cl=Tl;class Il extends y{constructor(t){super(),this.id=t.id,this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3),this.header_subtext=new $(t.headerSubtext),this.author=new hb(t.authorName,t.authorBadges,t.authorPhoto,t.authorExternalChannelId),this.menu_endpoint=new U(t.contextMenuEndpoint)}}Il.type="LiveChatMembershipItem";const kl=Il;class El extends y{constructor(t){super(),this.message=new $(t.message),this.author=new hb(t.authorName,t.authorBadges,t.authorPhoto,t.authorExternalChannelId),this.header_background_color=t.headerBackgroundColor,this.header_text_color=t.headerTextColor,this.body_background_color=t.bodyBackgroundColor,this.body_text_color=t.bodyTextColor,this.purchase_amount=new $(t.purchaseAmountText).toString(),this.menu_endpoint=new U(t.contextMenuEndpoint),this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3),this.timestamp_text=new $(t.timestampText).toString(),this.id=t.id}}El.type="LiveChatPaidMessage";const Rl=El;class Al extends y{constructor(t){super(),this.id=t.id,this.author=new hb(t.authorName,t.authorBadges,t.authorPhoto,t.authorExternalChannelId),this.money_chip_background_color=t.moneyChipBackgroundColor,this.money_chip_text_color=t.moneyChipTextColor,this.background_color=t.backgroundColor,this.author_name_text_color=t.authorNameTextColor,this.sticker=j.fromResponse(t.sticker),this.purchase_amount=new $(t.purchaseAmountText).toString(),this.menu_endpoint=new U(t.contextMenuEndpoint),this.context_menu=this.menu_endpoint,this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3)}}Al.type="LiveChatPaidSticker";const Ml=Al;class Pl extends y{constructor(t){super(),this.id=t.id,this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3)}}Pl.type="LiveChatPlaceholderItem";const Ol=Pl;class Dl extends y{constructor(t){super(),this.title=t.title,this.accessibility_title=t.accessibilityTitle,this.thumbnail=j.fromResponse(t.thumbnail),this.price=t.price,this.vendor_name=t.vendorName,this.from_vendor_text=t.fromVendorText,this.information_button=lb.parseItem(t.informationButton),this.endpoint=new U(t.onClickCommand),this.creator_message=t.creatorMessage,this.creator_name=t.creatorName,this.author_photo=j.fromResponse(t.authorPhoto),this.information_dialog=lb.parseItem(t.informationDialog),this.is_verified=t.isVerified,this.creator_custom_message=new $(t.creatorCustomMessage)}}Dl.type="LiveChatProductItem";const Nl=Dl;class Ll extends y{constructor(t){super(),this.message=new $(t.message),Reflect.has(t,"icon")&&Reflect.has(t.icon,"iconType")&&(this.icon_type=t.icon.iconType)}}Ll.type="LiveChatRestrictedParticipation";const Bl=Ll;class Vl extends y{constructor(t){super(),this.message=new $(t.message),this.inline_action_buttons=lb.parseArray(t.inlineActionButtons,R),this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3),this.id=t.id}}Vl.type="LiveChatMessageBase";class Ul extends Vl{constructor(t){super(t),this.author=new hb(t.authorName,t.authorBadges,t.authorPhoto,t.authorExternalChannelId),this.menu_endpoint=new U(t.contextMenuEndpoint)}}Ul.type="LiveChatTextMessage";const jl=Ul;class Wl extends y{constructor(t){var e,i;super(),this.author=new hb(t.authorName,t.authorBadges,t.authorPhoto,t.authorExternalChannelId),this.amount=new $(t.amount),this.duration_sec=t.durationSec,this.full_duration_sec=t.fullDurationSec,this.show_item=lb.parseItem(null===(i=null===(e=t.showItemEndpoint)||void 0===e?void 0:e.showLiveChatItemEndpoint)||void 0===i?void 0:i.renderer),this.show_item_endpoint=new U(t.showItemEndpoint),this.id=t.id}}Wl.type="LiveChatTickerPaidMessageItem";const Fl=Wl;class Hl extends Fl{}Hl.type="LiveChatTickerPaidStickerItem";const $l=Hl;class Gl extends y{constructor(t){super(),this.id=t.id,this.detail=new $(t.detailText),this.author=new hb(t.authorName,t.authorBadges,t.sponsorPhoto,t.authorExternalChannelId),this.duration_sec=t.durationSec}}Gl.type="LiveChatTickerSponsorItem";const Yl=Gl;class Kl extends Vl{constructor(t){super(t),Reflect.has(t,"icon")&&Reflect.has(t.icon,"iconType")&&(this.icon_type=t.icon.iconType),this.action_button=lb.parseItem(t.actionButton)}}Kl.type="LiveChatViewerEngagementMessage";const ql=Kl;class zl extends y{constructor(t){super(),this.poll_question=new $(t.pollQuestion),this.thumbnails=j.fromResponse(t.thumbnail),this.metadata=new $(t.metadataText),this.live_chat_poll_type=t.liveChatPollType,this.context_menu_button=lb.parseItem(t.contextMenuButton,R)}}zl.type="PollHeader";const Xl=zl;class Ql extends y{constructor(t){super(),this.id=t.id,this.contents=lb.parse(t.contents),this.target_id=t.targetId}}Ql.type="LiveChatActionPanel";const Jl=Ql;class Zl extends y{constructor(t){super(),this.deleted_state_message=new $(t.deletedStateMessage),this.target_item_id=t.targetItemId}}Zl.type="MarkChatItemAsDeletedAction";const tc=Zl;class ec extends y{constructor(t){super(),this.deleted_state_message=new $(t.deletedStateMessage),this.external_channel_id=t.externalChannelId}}ec.type="MarkChatItemsByAuthorAsDeletedAction";const ic=ec;class sc extends y{constructor(t){super(),this.target_action_id=t.targetActionId}}sc.type="RemoveBannerForLiveChatCommand";const nc=sc;class oc extends y{constructor(t){super(),this.target_item_id=t.targetItemId}}oc.type="RemoveChatItemAction";const ac=oc;class rc extends y{constructor(t){super(),this.external_channel_id=t.externalChannelId}}rc.type="RemoveChatItemByAuthorAction";const lc=rc;class cc extends y{constructor(t){super(),this.target_item_id=t.targetItemId,this.replacement_item=lb.parseItem(t.replacementItem)}}cc.type="ReplaceChatItemAction";const hc=cc;class dc extends y{constructor(t){var e;super(),this.actions=lb.parseArray(null===(e=t.actions)||void 0===e?void 0:e.map((t=>(delete t.clickTrackingParams,t)))),this.video_offset_time_msec=t.videoOffsetTimeMsec}}dc.type="ReplayChatItemAction";const uc=dc;class pc extends y{constructor(t){super(),this.panel_to_show=lb.parseItem(t.panelToShow,Jl)}}pc.type="ShowLiveChatActionPanelAction";const mc=pc;class fc extends y{constructor(t){super(),this.dialog=lb.parseItem(t.dialog)}}fc.type="ShowLiveChatDialogAction";const vc=fc;class yc extends y{constructor(t){super(),this.tooltip=lb.parseItem(t.tooltip)}}yc.type="ShowLiveChatTooltipCommand";const gc=yc;class _c extends y{constructor(t){super(),this.date_text=new $(t.dateText).toString()}}_c.type="UpdateDateTextAction";const bc=_c;class wc extends y{constructor(t){super(),this.description=new $(t.description)}}wc.type="UpdateDescriptionAction";const xc=wc;class Sc extends y{constructor(t){super(),this.poll_to_update=lb.parseItem(t.pollToUpdate)}}Sc.type="UpdateLiveChatPollAction";const Tc=Sc;class Cc extends y{constructor(t){super(),this.title=new $(t.title)}}Cc.type="UpdateTitleAction";const Ic=Cc;class kc extends y{constructor(t){super(),this.default_text=new $(t.defaultText).toString(),this.toggled_text=new $(t.toggledText).toString(),this.button_id=t.buttonId}}kc.type="UpdateToggleButtonTextAction";const Ec=kc;class Rc extends y{constructor(t){super();const e=t.viewCount.videoViewCountRenderer;this.view_count=new $(e.viewCount),this.extra_short_view_count=new $(e.extraShortViewCount),this.is_live=e.isLive}}Rc.type="UpdateViewershipAction";const Ac=Rc;class Mc extends Dt{constructor(t){super(t),this.custom_thumbnail=j.fromResponse(t.customThumbnail)}}Mc.type="LiveChatAuthorBadge";const Pc=Mc;class Oc extends y{constructor(t){super(),this.confirm_button=lb.parseItem(t.confirmButton,R),this.dialog_messages=t.dialogMessages.map((t=>new $(t)))}}Oc.type="LiveChatDialog";const Dc=Oc;class Nc extends y{constructor(t){super(),this.overflow_menu=lb.parseItem(t.overflowMenu,ut),this.collapse_button=lb.parseItem(t.collapseButton,R),this.view_selector=lb.parseItem(t.viewSelector,De)}}Nc.type="LiveChatHeader";const Lc=Nc;class Bc extends y{constructor(t){super(),this.max_items_to_display=t.maxItemsToDisplay,this.more_comments_below_button=lb.parseItem(t.moreCommentsBelowButton,R)}}Bc.type="LiveChatItemList";const Vc=Bc;class Uc extends y{constructor(t){super(),this.author_name=new $(t.authorName),this.author_photo=j.fromResponse(t.authorPhoto),this.send_button=lb.parseItem(t.sendButton,R),this.target_id=t.targetId}}Uc.type="LiveChatMessageInput";const jc=Uc;class Wc extends y{constructor(t){super(),this.name=new $(t.authorName),this.photo=j.fromResponse(t.authorPhoto),this.badges=lb.parseArray(t.authorBadges)}}Wc.type="LiveChatParticipant";const Fc=Wc;class Hc extends y{constructor(t){super(),this.title=new $(t.title),this.participants=lb.parseArray(t.participants,Fc)}}Hc.type="LiveChatParticipantsList";const $c=Hc;class Gc extends R{constructor(t){super(t)}}Gc.type="MenuNavigationItem";const Yc=Gc;class Kc extends R{constructor(t){super(t)}}Kc.type="MenuServiceItem";const qc=Kc;class zc extends y{constructor(t){super(),this.items=lb.parseArray(t.items,[Yc,qc])}}zc.type="MenuPopup";const Xc=zc;class Qc extends y{constructor(t){super(),this.has_separator=!!t.hasSeparator,this.endpoint=new U(t.navigationEndpoint||t.serviceEndpoint)}}Qc.type="MenuServiceItemDownload";const Jc=Qc;class Zc extends y{constructor(t){super(),this.header=lb.parse(t.header),this.sections=lb.parse(t.sections),this.style=t.style}}Zc.type="MultiPageMenu";const th=Zc;class eh extends y{constructor(t){super(),this.items=lb.parse(t.items)}get contents(){return this.items}}eh.type="MultiPageMenuNotificationSection";const ih=eh;class sh extends y{constructor(t){super()}}sh.type="MusicMenuItemDivider";const nh=sh;class oh extends y{constructor(t){var e;super(),Reflect.has(t,"title")&&Reflect.has(t.title,"musicMenuTitleRenderer")&&(this.title=new $(null===(e=t.title.musicMenuTitleRenderer)||void 0===e?void 0:e.primaryText)),this.options=lb.parseArray(t.options,[ge,nh])}}oh.type="MusicMultiSelectMenu";const ah=oh;class rh extends y{constructor(t){super(),this.title=new $(t.title),this.buttons=lb.parse(t.buttons)}}rh.type="SimpleMenuHeader";const lh=rh;class ch extends y{constructor(t){super(),this.title=t.title,this.description=t.description,this.thumbnails=j.fromResponse(t.thumbnail),this.price=t.price,this.vendor_name=t.vendorName,this.button_text=t.buttonText,this.button_accessibility_text=t.buttonAccessibilityText,this.from_vendor_text=t.fromVendorText,this.additional_fees_text=t.additionalFeesText,this.region_format=t.regionFormat,this.endpoint=new U(t.buttonCommand)}}ch.type="MerchandiseItem";const hh=ch;class dh extends y{constructor(t){super(),this.title=t.title,this.menu=lb.parseItem(t.actionButton),this.items=lb.parseArray(t.items)}get contents(){return this.items}}dh.type="MerchandiseShelf";const uh=dh;class ph extends y{constructor(t){super(),this.title=new $(t.title),this.contents=t.contents.map((t=>new $(t)))}}ph.type="MetadataRow";const mh=ph;class fh extends y{constructor(t){super(),this.rows=lb.parseArray(t.rows),this.collapsed_item_count=t.collapsedItemCount}}fh.type="MetadataRowContainer";const vh=fh;class yh extends y{constructor(t){super(),this.content=new $(t.content),this.has_divider_line=t.hasDividerLine}}yh.type="MetadataRowHeader";const gh=yh;class _h extends y{constructor(t){super(),this.section_list=lb.parseItem(t)}}_h.type="MetadataScreen";const bh=_h;class wh extends y{constructor(t){super(),this.url_canonical=t.urlCanonical,this.title=t.title,this.description=t.description,this.thumbnail=j.fromResponse(t.thumbnail),this.site_name=t.siteName,this.app_name=t.appName,this.android_package=t.androidPackage,this.ios_app_store_id=t.iosAppStoreId,this.ios_app_arguments=t.iosAppArguments,this.og_type=t.ogType,this.url_applinks_web=t.urlApplinksWeb,this.url_applinks_ios=t.urlApplinksIos,this.url_applinks_android=t.urlApplinksAndroid,this.url_twitter_ios=t.urlTwitterIos,this.url_twitter_android=t.urlTwitterAndroid,this.twitter_card_type=t.twitterCardType,this.twitter_site_handle=t.twitterSiteHandle,this.schema_dot_org_type=t.schemaDotOrgType,this.noindex=t.noindex,this.is_unlisted=t.unlisted,this.is_family_safe=t.familySafe,this.tags=t.tags,this.available_countries=t.availableCountries}}wh.type="MicroformatData";const xh=wh;class Sh extends Bo{constructor(t){super(t)}}Sh.type="Mix";const Th=Sh;class Ch extends y{constructor(t){var e,i,s;super();const n=(null===(e=t.thumbnailOverlays.find((t=>t.thumbnailOverlayTimeStatusRenderer)))||void 0===e?void 0:e.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=t.videoId,this.title=new $(t.title),Reflect.has(t,"descriptionSnippet")&&(this.description_snippet=new $(t.descriptionSnippet)),this.top_metadata_items=new $(t.topMetadataItems),this.thumbnails=j.fromResponse(t.thumbnail),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays),this.author=new hb(t.longBylineText,t.ownerBadges,null===(s=null===(i=t.channelThumbnailSupportedRenderers)||void 0===i?void 0:i.channelThumbnailWithLinkRenderer)||void 0===s?void 0:s.thumbnail),this.duration={text:t.lengthText?new $(t.lengthText).toString():new $(n).toString(),seconds:kb(t.lengthText?new $(t.lengthText).toString():new $(n).toString())},this.endpoint=new U(t.navigationEndpoint),this.badges=lb.parseArray(t.badges),this.use_vertical_poster=t.useVerticalPoster,this.show_action_menu=t.showActionMenu,this.menu=lb.parseItem(t.menu,ut)}}Ch.type="Movie";const Ih=Ch;class kh extends y{constructor(t){var e;return super(),null===(e=t.movingThumbnailDetails)||void 0===e?void 0:e.thumbnails.map((t=>new j(t))).sort(((t,e)=>e.width-t.width))}}kh.type="MovingThumbnail";const Eh=kh;class Rh extends y{constructor(t){super(),this.title=new $(t.title)}}Rh.type="MusicCardShelfHeaderBasic";const Ah=Rh;class Mh extends y{constructor(t){super(),this.icon_type=t.icon.iconType,this.label=t.accessibilityData.accessibilityData.label}}Mh.type="MusicInlineBadge";const Ph=Mh;class Oh extends y{constructor(t){var e,i;super(),this.endpoint=new U(t.playNavigationEndpoint),this.play_icon_type=t.playIcon.iconType,this.pause_icon_type=t.pauseIcon.iconType,Reflect.has(t,"accessibilityPlayData")&&(this.play_label=null===(e=t.accessibilityPlayData.accessibilityData)||void 0===e?void 0:e.label),Reflect.has(t,"accessibilityPauseData")&&(this.pause_label=null===(i=t.accessibilityPauseData.accessibilityData)||void 0===i?void 0:i.label),this.icon_color=t.iconColor}}Oh.type="MusicPlayButton";const Dh=Oh;class Nh extends y{constructor(t){super(),this.content=lb.parseItem(t.content,Dh),this.content_position=t.contentPosition,this.display_style=t.displayStyle}}Nh.type="MusicItemThumbnailOverlay";const Lh=Nh;class Bh extends y{constructor(t){super(),this.contents=j.fromResponse(t.thumbnail)}}Bh.type="MusicThumbnail";const Vh=Bh;class Uh extends y{constructor(t){super(),this.thumbnail=lb.parseItem(t.thumbnail,Vh),this.title=new $(t.title),this.subtitle=new $(t.subtitle),this.buttons=lb.parseArray(t.buttons,R),this.menu=lb.parseItem(t.menu,ut),this.on_tap=new U(t.onTap),this.header=lb.parseItem(t.header,Ah),Reflect.has(t,"endIcon")&&Reflect.has(t.endIcon,"iconType")&&(this.end_icon_type=t.endIcon.iconType),this.subtitle_badges=lb.parseArray(t.subtitleBadges,Ph),this.thumbnail_overlay=lb.parseItem(t.thumbnailOverlay,Lh),Reflect.has(t,"contents")&&(this.contents=lb.parseArray(t.contents))}}Uh.type="MusicCardShelf";const jh=Uh;class Wh extends y{constructor(t){super(),this.title=new $(t.title),Reflect.has(t,"strapline")&&(this.strapline=new $(t.strapline)),Reflect.has(t,"thumbnail")&&(this.thumbnail=lb.parseItem(t.thumbnail,Vh)),Reflect.has(t,"moreContentButton")&&(this.more_content=lb.parseItem(t.moreContentButton,R)),Reflect.has(t,"endIcons")&&(this.end_icons=lb.parseArray(t.endIcons,Hr))}}Wh.type="MusicCarouselShelfBasicHeader";const Fh=Wh;class Hh extends y{constructor(t){super(),this.thumbnail=qv(t.thumbnail,Vh),this.overlay=qv(t.overlay,Lh),this.on_tap=new U(t.onTap),this.menu=qv(t.menu,ut),this.subtitle=new $(t.subtitle),this.title=new $(t.title),Reflect.has(t,"secondTitle")&&(this.second_title=new $(t.secondTitle)),Reflect.has(t,"description")&&(this.description=new $(t.description)),Reflect.has(t,"displayStyle")&&(this.display_style=t.displayStyle)}}Hh.type="MusicMultiRowListItem";const $h=Hh;class Gh extends y{constructor(t){super(),this.button_text=new $(t.buttonText).toString(),this.endpoint=new U(t.clickCommand)}}Gh.type="MusicNavigationButton";const Yh=Gh;class Kh extends y{constructor(t){super(),this.title=new $(t.text),this.display_priority=t.displayPriority}}Kh.type="musicResponsiveListItemFlexColumnRenderer";const qh=Kh;class zh extends y{constructor(t){super(),this.title=new $(t.text),this.display_priority=t.displayPriority}}zh.type="MusicResponsiveListItemFlexColumn";const Xh=zh;var Qh,Jh,Zh,td,ed,id,sd,nd,od,ad,rd;class ld extends y{constructor(t){var e,i,s,n,o,a;super(),Qh.add(this),Jh.set(this,void 0),this.flex_columns=lb.parseArray(t.flexColumns,Xh),this.fixed_columns=lb.parseArray(t.fixedColumns,qh),f(this,Jh,{video_id:(null===(e=null==t?void 0:t.playlistItemData)||void 0===e?void 0:e.videoId)||null,playlist_set_video_id:(null===(i=null==t?void 0:t.playlistItemData)||void 0===i?void 0:i.playlistSetVideoId)||null},"f"),Reflect.has(t,"navigationEndpoint")&&(this.endpoint=new U(t.navigationEndpoint));let r=null===(a=null===(o=null===(n=null===(s=this.endpoint)||void 0===s?void 0:s.payload)||void 0===n?void 0:n.browseEndpointContextSupportedConfigs)||void 0===o?void 0:o.browseEndpointContextMusicConfig)||void 0===a?void 0:a.pageType;if(!r){const t=this.flex_columns.find((t=>{var e,i,s,n;return"MUSIC_PAGE_TYPE_NON_MUSIC_AUDIO_TRACK_PAGE"===(null===(n=null===(s=null===(i=null===(e=t.title.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseEndpointContextSupportedConfigs)||void 0===s?void 0:s.browseEndpointContextMusicConfig)||void 0===n?void 0:n.pageType)}));t&&(r="MUSIC_PAGE_TYPE_NON_MUSIC_AUDIO_TRACK_PAGE")}switch(r){case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album",m(this,Qh,"m",ad).call(this);break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist",m(this,Qh,"m",rd).call(this);break;case"MUSIC_PAGE_TYPE_ARTIST":case"MUSIC_PAGE_TYPE_USER_CHANNEL":this.item_type="artist",m(this,Qh,"m",sd).call(this);break;case"MUSIC_PAGE_TYPE_LIBRARY_ARTIST":this.item_type="library_artist",m(this,Qh,"m",nd).call(this);break;case"MUSIC_PAGE_TYPE_NON_MUSIC_AUDIO_TRACK_PAGE":this.item_type="non_music_track",m(this,Qh,"m",od).call(this);break;default:this.flex_columns[1]?m(this,Qh,"m",td).call(this):m(this,Qh,"m",Zh).call(this)}Reflect.has(t,"index")&&(this.index=new $(t.index)),Reflect.has(t,"thumbnail")&&(this.thumbnail=lb.parseItem(t.thumbnail,Vh)),Reflect.has(t,"badges")&&(this.badges=lb.parseArray(t.badges)),Reflect.has(t,"menu")&&(this.menu=lb.parseItem(t.menu,ut)),Reflect.has(t,"overlay")&&(this.overlay=lb.parseItem(t.overlay,Lh))}get thumbnails(){var t;return(null===(t=this.thumbnail)||void 0===t?void 0:t.contents)||[]}}Jh=new WeakMap,Qh=new WeakSet,Zh=function(){this.title=this.flex_columns.first().title.toString(),this.endpoint?this.item_type="endpoint":this.item_type="unknown"},td=function(){var t,e;(null===(e=null===(t=this.flex_columns.at(1))||void 0===t?void 0:t.title.runs)||void 0===e?void 0:e.some((t=>t.text.match(/(.*?) views/))))?(this.item_type="video",m(this,Qh,"m",id).call(this)):(this.item_type="song",m(this,Qh,"m",ed).call(this))},ed=function(){var t,e,i,s,n,o,a,r,l,c,h,d,u,p,f;this.id=m(this,Jh,"f").video_id||(null===(e=null===(t=this.endpoint)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.videoId),this.title=this.flex_columns.first().title.toString();const v=(null===(n=null===(s=null===(i=this.flex_columns.at(1))||void 0===i?void 0:i.title.runs)||void 0===s?void 0:s.find((t=>/^\d+$/.test(t.text.replace(/:/g,"")))))||void 0===n?void 0:n.text)||(null===(a=null===(o=this.fixed_columns.first())||void 0===o?void 0:o.title)||void 0===a?void 0:a.toString());v&&(this.duration={text:v,seconds:kb(v)});const y=(null===(l=null===(r=this.flex_columns.at(1))||void 0===r?void 0:r.title.runs)||void 0===l?void 0:l.find((t=>Ab(t)&&t.endpoint&&t.endpoint.payload.browseId.startsWith("MPR"))))||(null===(h=null===(c=this.flex_columns.at(2))||void 0===c?void 0:c.title.runs)||void 0===h?void 0:h.find((t=>Ab(t)&&t.endpoint&&t.endpoint.payload.browseId.startsWith("MPR"))));y&&Ab(y)&&(this.album={id:null===(u=null===(d=y.endpoint)||void 0===d?void 0:d.payload)||void 0===u?void 0:u.browseId,name:y.text,endpoint:y.endpoint});const g=null===(f=null===(p=this.flex_columns.at(1))||void 0===p?void 0:p.title.runs)||void 0===f?void 0:f.filter((t=>Ab(t)&&t.endpoint&&t.endpoint.payload.browseId.startsWith("UC")));g&&(this.artists=g.map((t=>{var e,i;return{name:t.text,channel_id:Ab(t)?null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId:void 0,endpoint:Ab(t)?t.endpoint:void 0}})))},id=function(){var t,e,i,s,n,o,a,r,l,c;this.id=m(this,Jh,"f").video_id,this.title=this.flex_columns.first().title.toString(),this.views=null===(i=null===(e=null===(t=this.flex_columns.at(1))||void 0===t?void 0:t.title.runs)||void 0===e?void 0:e.find((t=>t.text.match(/(.*?) views/))))||void 0===i?void 0:i.toString();const h=null===(n=null===(s=this.flex_columns.at(1))||void 0===s?void 0:s.title.runs)||void 0===n?void 0:n.filter((t=>Ab(t)&&t.endpoint&&t.endpoint.payload.browseId.startsWith("UC")));h&&(this.authors=h.map((t=>{var e,i;return{name:t.text,channel_id:Ab(t)?null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId:void 0,endpoint:Ab(t)?t.endpoint:void 0}})));const d=(null===(a=null===(o=this.flex_columns[1].title.runs)||void 0===o?void 0:o.find((t=>/^\d+$/.test(t.text.replace(/:/g,"")))))||void 0===a?void 0:a.text)||(null===(c=null===(l=null===(r=this.fixed_columns.first())||void 0===r?void 0:r.title.runs)||void 0===l?void 0:l.find((t=>/^\d+$/.test(t.text.replace(/:/g,"")))))||void 0===c?void 0:c.text);d&&(this.duration={text:d,seconds:kb(d)})},sd=function(){var t,e,i,s,n,o;this.id=null===(e=null===(t=this.endpoint)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.browseId,this.name=this.flex_columns.first().title.toString(),this.subtitle=null===(i=this.flex_columns.at(1))||void 0===i?void 0:i.title,this.subscribers=(null===(o=null===(n=null===(s=this.subtitle)||void 0===s?void 0:s.runs)||void 0===n?void 0:n.find((t=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(t.text))))||void 0===o?void 0:o.text)||""},nd=function(){var t,e,i,s;this.name=this.flex_columns.first().title.toString(),this.subtitle=null===(t=this.flex_columns.at(1))||void 0===t?void 0:t.title,this.song_count=(null===(s=null===(i=null===(e=this.subtitle)||void 0===e?void 0:e.runs)||void 0===i?void 0:i.find((t=>/^\d+(,\d+)? songs?$/i.test(t.text))))||void 0===s?void 0:s.text)||""},od=function(){var t,e;this.id=m(this,Jh,"f").video_id||(null===(e=null===(t=this.endpoint)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.videoId),this.title=this.flex_columns.first().title.toString()},ad=function(){var t,e,i,s,n,o,a,r,l;this.id=null===(e=null===(t=this.endpoint)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.browseId,this.title=this.flex_columns.first().title.toString();const c=null===(s=null===(i=this.flex_columns.at(1))||void 0===i?void 0:i.title.runs)||void 0===s?void 0:s.find((t=>Ab(t)&&t.endpoint&&t.endpoint.payload.browseId.startsWith("UC")));c&&Ab(c)&&(this.author={name:c.text,channel_id:null===(o=null===(n=c.endpoint)||void 0===n?void 0:n.payload)||void 0===o?void 0:o.browseId,endpoint:c.endpoint}),this.year=null===(l=null===(r=null===(a=this.flex_columns.at(1))||void 0===a?void 0:a.title.runs)||void 0===r?void 0:r.find((t=>/^[12][0-9]{3}$/.test(t.text))))||void 0===l?void 0:l.text},rd=function(){var t,e,i,s,n,o,a,r;this.id=null===(e=null===(t=this.endpoint)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.browseId,this.title=this.flex_columns.first().title.toString();const l=null===(s=null===(i=this.flex_columns.at(1))||void 0===i?void 0:i.title.runs)||void 0===s?void 0:s.find((t=>t.text.match(/\d+ (song|songs)/)));this.item_count=l?l.text:void 0;const c=null===(o=null===(n=this.flex_columns.at(1))||void 0===n?void 0:n.title.runs)||void 0===o?void 0:o.find((t=>Ab(t)&&t.endpoint&&t.endpoint.payload.browseId.startsWith("UC")));c&&Ab(c)&&(this.author={name:c.text,channel_id:null===(r=null===(a=c.endpoint)||void 0===a?void 0:a.payload)||void 0===r?void 0:r.browseId,endpoint:c.endpoint})},ld.type="MusicResponsiveListItem";const cd=ld;class hd extends y{constructor(t){var e,i,s,n,o,a,r,l,c,h,d,u,p,m,f,v,y,g,_,b,w,x;switch(super(),this.title=new $(t.title),this.endpoint=new U(t.navigationEndpoint),this.id=(null===(i=null===(e=this.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId)||(null===(n=null===(s=this.endpoint)||void 0===s?void 0:s.payload)||void 0===n?void 0:n.videoId),this.subtitle=new $(t.subtitle),this.badges=lb.parse(t.subtitleBadges),null===(l=null===(r=null===(a=null===(o=this.endpoint)||void 0===o?void 0:o.payload)||void 0===a?void 0:a.browseEndpointContextSupportedConfigs)||void 0===r?void 0:r.browseEndpointContextMusicConfig)||void 0===l?void 0:l.pageType){case"MUSIC_PAGE_TYPE_ARTIST":this.item_type="artist";break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist";break;case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album";break;default:"/next"===(null===(h=null===(c=this.endpoint)||void 0===c?void 0:c.metadata)||void 0===h?void 0:h.api_url)?this.item_type="endpoint":(null===(d=this.subtitle.runs)||void 0===d?void 0:d[0])?"Song"!==this.subtitle.runs[0].text?this.item_type="video":this.item_type="song":this.endpoint?this.item_type="endpoint":this.item_type="unknown"}if("artist"==this.item_type)this.subscribers=(null===(p=null===(u=this.subtitle.runs)||void 0===u?void 0:u.find((t=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(t.text))))||void 0===p?void 0:p.text)||"";else if("playlist"==this.item_type){const t=null===(m=this.subtitle.runs)||void 0===m?void 0:m.find((t=>t.text.match(/\d+ songs|song/)));this.item_count=t?t.text:null}else if("album"==this.item_type){const t=null===(f=this.subtitle.runs)||void 0===f?void 0:f.filter((t=>{var e,i;return null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));t&&(this.artists=t.map((t=>{var e,i;return{name:t.text,channel_id:null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId,endpoint:t.endpoint}}))),this.year=null===(v=this.subtitle.runs)||void 0===v?void 0:v.slice(-1)[0].text,isNaN(Number(this.year))&&delete this.year}else if("video"==this.item_type){this.views=(null===(g=null===(y=null==this?void 0:this.subtitle.runs)||void 0===y?void 0:y.find((t=>null==t?void 0:t.text.match(/(.*?) views/))))||void 0===g?void 0:g.text)||"N/A";const t=null===(_=this.subtitle.runs)||void 0===_?void 0:_.find((t=>{var e,i,s;return null===(s=null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId)||void 0===s?void 0:s.startsWith("UC")}));t&&(this.author={name:null==t?void 0:t.text,channel_id:null===(w=null===(b=null==t?void 0:t.endpoint)||void 0===b?void 0:b.payload)||void 0===w?void 0:w.browseId,endpoint:null==t?void 0:t.endpoint})}else if("song"==this.item_type){const t=null===(x=this.subtitle.runs)||void 0===x?void 0:x.filter((t=>{var e,i;return null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));t&&(this.artists=t.map((t=>{var e,i;return{name:null==t?void 0:t.text,channel_id:null===(i=null===(e=null==t?void 0:t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId,endpoint:null==t?void 0:t.endpoint}})))}this.thumbnail=j.fromResponse(t.thumbnailRenderer.musicThumbnailRenderer.thumbnail),this.thumbnail_overlay=lb.parseItem(t.thumbnailOverlay,Lh),this.menu=lb.parseItem(t.menu,ut)}}hd.type="MusicTwoRowItem";const dd=hd;class ud extends y{constructor(t){super(),this.header=lb.parseItem(t.header,Fh),this.contents=lb.parseArray(t.contents,[dd,cd,$h,Yh]),Reflect.has(t,"numItemsPerColumn")&&(this.num_items_per_column=parseInt(t.numItemsPerColumn))}}ud.type="MusicCarouselShelf";const pd=ud;class md extends y{constructor(t){super(),this.description=new $(t.description),Reflect.has(t,"maxCollapsedLines")&&(this.max_collapsed_lines=t.maxCollapsedLines),Reflect.has(t,"maxExpandedLines")&&(this.max_expanded_lines=t.maxExpandedLines),this.footer=new $(t.footer)}}md.type="MusicDescriptionShelf";const fd=md;class vd extends y{constructor(t){var e,i,s,n,o,a,r,l,c;super(),this.title=new $(t.title),this.description=new $(t.description),this.subtitle=new $(t.subtitle),this.second_subtitle=new $(t.secondSubtitle),this.year=(null===(i=null===(e=this.subtitle.runs)||void 0===e?void 0:e.find((t=>/^[12][0-9]{3}$/.test(t.text))))||void 0===i?void 0:i.text)||"",this.song_count=(null===(n=null===(s=this.second_subtitle.runs)||void 0===s?void 0:s[0])||void 0===n?void 0:n.text)||"",this.total_duration=(null===(a=null===(o=this.second_subtitle.runs)||void 0===o?void 0:o[2])||void 0===a?void 0:a.text)||"",this.thumbnails=j.fromResponse(t.thumbnail.croppedSquareThumbnailRenderer.thumbnail),this.badges=lb.parseArray(t.subtitleBadges);const h=null===(r=this.subtitle.runs)||void 0===r?void 0:r.find((t=>{var e,i;return null===(i=null===(e=null==t?void 0:t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));h&&(this.author={name:h.text,channel_id:null===(c=null===(l=h.endpoint)||void 0===l?void 0:l.payload)||void 0===c?void 0:c.browseId,endpoint:h.endpoint}),this.menu=lb.parseItem(t.menu)}}vd.type="MusicDetailHeader";const yd=vd;class gd extends y{constructor(t){super(),this.playlist_id=t.playlistId,this.supported_download_states=t.supportedDownloadStates}}gd.type="MusicDownloadStateBadge";const _d=gd;class bd extends y{constructor(t){super(),this.header=lb.parseItem(t.header)}}bd.type="MusicEditablePlaylistDetailHeader";const wd=bd;class xd extends y{constructor(t){super(),this.element=Reflect.has(t,"elementRenderer")?lb.parseItem(t,xa):null}}xd.type="MusicElementHeader";const Sd=xd;class Td extends y{constructor(t){super(),Reflect.has(t,"header")&&(this.header=lb.parseItem(t.header)),Reflect.has(t,"title")&&(this.title=new $(t.title))}}Td.type="MusicHeader";const Cd=Td;class Id extends y{constructor(t){super(),this.title=new $(t.title),this.description=new $(t.description),this.thumbnail=lb.parseItem(t.thumbnail,Vh)}}Id.type="MusicImmersiveHeader";const kd=Id;class Ed{constructor(t){this.icon_name=t.iconName,this.endpoint=new U(t.onTap),this.a11y_text=t.a11yText,this.style=t.style}}Ed.type="ActionButton";class Rd{constructor(t){this.image=t.image.image.sources,this.content_mode=t.image.contentMode,this.crop_options=t.image.cropOptions,this.image_aspect_ratio=t.imageAspectRatio,this.caption=t.caption,this.action_buttons=t.actionButtons.map((t=>new Ed(t)))}}Rd.type="Panel";class Ad extends y{constructor(t){super(),this.header=t.shelf.header,this.panels=t.shelf.panels.map((t=>new Rd(t)))}}Ad.type="MusicLargeCardItemCarousel";const Md=Ad;class Pd extends y{constructor(t){var e,i,s;super(),this.playlist_id=t.playlistId,this.contents=lb.parseArray(t.contents,cd),this.collapsed_item_count=t.collapsedItemCount,this.continuation=(null===(s=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextContinuationData)||void 0===s?void 0:s.continuation)||null}}Pd.type="MusicPlaylistShelf";const Od=Pd;class Dd extends y{constructor(t){var e,i,s,n,o;super(),this.title=new $(t.title),this.thumbnail=j.fromResponse(t.thumbnail),this.endpoint=new U(t.navigationEndpoint),this.selected=t.selected,this.video_id=t.videoId,this.duration={text:new $(t.lengthText).toString(),seconds:kb(new $(t.lengthText).toString())};const a=null===(e=new $(t.longBylineText).runs)||void 0===e?void 0:e.find((t=>{var e,i,s;return null===(s=null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId)||void 0===s?void 0:s.startsWith("MPR")})),r=null===(i=new $(t.longBylineText).runs)||void 0===i?void 0:i.filter((t=>{var e,i,s;return null===(s=null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId)||void 0===s?void 0:s.startsWith("UC")}));this.author=new $(t.shortBylineText).toString(),a&&(this.album={id:null===(n=null===(s=a.endpoint)||void 0===s?void 0:s.payload)||void 0===n?void 0:n.browseId,name:a.text,year:null===(o=new $(t.longBylineText).runs)||void 0===o?void 0:o.slice(-1)[0].text,endpoint:a.endpoint}),r&&(this.artists=r.map((t=>{var e,i;return{name:t.text,channel_id:null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId,endpoint:t.endpoint}}))),this.badges=lb.parseArray(t.badges),this.menu=lb.parseItem(t.menu),this.set_video_id=t.playlistSetVideoId}}Dd.type="PlaylistPanelVideo";const Nd=Dd;class Ld extends y{constructor(t){super(),this.primary=lb.parseItem(t.primaryRenderer,Nd),Reflect.has(t,"counterpart")&&(this.counterpart=b(t.counterpart.map((t=>lb.parseItem(t.counterpartRenderer,Nd)))||[]))}}Ld.type="PlaylistPanelVideoWrapper";const Bd=Ld;class Vd extends y{constructor(t){var e,i,s,n,o,a;super(),this.title=t.title,this.title_text=new $(t.titleText),this.contents=lb.parseArray(t.contents,[Bd,Nd,mi]),this.playlist_id=t.playlistId,this.is_infinite=t.isInfinite,this.continuation=(null===(s=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextRadioContinuationData)||void 0===s?void 0:s.continuation)||(null===(a=null===(o=null===(n=t.continuations)||void 0===n?void 0:n[0])||void 0===o?void 0:o.nextContinuationData)||void 0===a?void 0:a.continuation),this.is_editable=t.isEditable,this.preview_description=t.previewDescription,this.num_items_to_show=t.numItemsToShow}}Vd.type="PlaylistPanel";const Ud=Vd;class jd extends y{constructor(t){super(),this.content=lb.parseItem(t.content,Ud)}}jd.type="MusicQueue";const Wd=jd;class Fd extends y{constructor(t){var e,i,s,n;super(),this.title=new $(t.title),this.contents=lb.parseArray(t.contents,cd),Reflect.has(t,"bottomEndpoint")&&(this.endpoint=new U(t.bottomEndpoint)),Reflect.has(t,"continuations")&&(this.continuation=(null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0].nextContinuationData)||void 0===i?void 0:i.continuation)||(null===(n=null===(s=t.continuations)||void 0===s?void 0:s[0].reloadContinuationData)||void 0===n?void 0:n.continuation)),Reflect.has(t,"bottomText")&&(this.bottom_text=new $(t.bottomText)),Reflect.has(t,"bottomButton")&&(this.bottom_button=lb.parseItem(t.bottomButton,R)),Reflect.has(t,"subheaders")&&(this.subheaders=lb.parseArray(t.subheaders))}}Fd.type="MusicShelf";const Hd=Fd;class $d extends y{constructor(t){super(),Reflect.has(t,"startItems")&&(this.start_items=lb.parseArray(t.startItems)),Reflect.has(t,"endItems")&&(this.end_items=lb.parseArray(t.endItems))}}$d.type="MusicSideAlignedItem";const Gd=$d;class Yd extends y{constructor(t){super(),this.title=new $(t.title).toString(),Reflect.has(t,"icon")&&(this.icon_type=t.icon.iconType),this.menu=lb.parseItem(t.menu,ah)}}Yd.type="MusicSortFilterButton";const Kd=Yd;class qd extends y{constructor(t){super(),this.thumbnail=j.fromResponse(t.thumbnail)}}qd.type="MusicTastebuilderShelfThumbnail";const zd=qd;class Xd extends y{constructor(t){super(),this.thumbnail=lb.parseItem(t.thumbnail,zd),this.primary_text=new $(t.primaryText),this.secondary_text=new $(t.secondaryText),this.action_button=lb.parseItem(t.actionButton,R),this.is_visible=t.isVisible}}Xd.type="MusicTasteBuilderShelf";const Qd=Xd;class Jd extends y{constructor(t){var e,i;super(),this.title=new $(t.title),this.thumbnail=t.thumbnail?j.fromResponse(null===(e=t.thumbnail.musicThumbnailRenderer)||void 0===e?void 0:e.thumbnail):[],this.menu=lb.parseItem(t.menu,ut),this.foreground_thumbnail=t.foregroundThumbnail?j.fromResponse(null===(i=t.foregroundThumbnail.musicThumbnailRenderer)||void 0===i?void 0:i.thumbnail):[]}}Jd.type="MusicVisualHeader";const Zd=Jd;class tu extends y{constructor(t){super(),this.thumbnails=j.fromResponse(t.thumbnail),this.video_thumbnails=j.fromResponse(t.videoThumbnail),this.short_message=new $(t.shortMessage),this.sent_time=new $(t.sentTimeText),this.notification_id=t.notificationId,this.endpoint=new U(t.navigationEndpoint),this.record_click_endpoint=new U(t.recordClickEndpoint),this.menu=lb.parseItem(t.contextualMenu),this.read=t.read}}tu.type="Notification";const eu=tu;class iu extends y{constructor(t){super(),this.image=lb.parseItem(t.image,zo),this.title=lb.parseItem(t.title,ga)}}iu.type="PageHeaderView";const su=iu;class nu extends y{constructor(t){super(),this.page_title=t.pageTitle,this.content=lb.parseItem(t.content,su)}}nu.type="PageHeader";const ou=nu;class au extends y{constructor(t){super(),this.header_text=new $(t.headerText).toString(),this.body_text=new $(t.bodyText).toString(),this.page_title=new $(t.pageTitle).toString(),this.header_icon_type=t.headerIcon.iconType}}au.type="PageIntroduction";const ru=au;class lu extends y{constructor(t){super(),this.subreason=new $(t.subreason),this.reason=new $(t.reason),this.proceed_button=lb.parseItem(t.proceedButton,R),this.thumbnails=j.fromResponse(t.thumbnail),Reflect.has(t,"icon")&&(this.icon_type=t.icon.iconType)}}lu.type="PlayerErrorMessage";const cu=lu;class hu extends y{constructor(t){super(),this.title=t.itemTitle,this.thumbnail=t.itemThumbnail,this.offer_description=t.offerDescription,this.offer_id=t.offerId}}hu.type="PlayerLegacyDesktopYpcOffer";const du=hu;class uu extends y{constructor(t){super(),this.video_message=t.fullVideoMessage,this.player_response=t.unserializedPlayerResponse}}uu.type="YpcTrailer";const pu=uu;class mu extends y{constructor(t){super(),this.video_id=t.trailerVideoId,this.title=t.itemTitle,this.thumbnail=t.itemThumbnail,this.offer_headline=t.offerHeadline,this.offer_description=t.offerDescription,this.offer_id=t.offerId,this.offer_button_text=t.offerButtonText,this.video_message=t.fullVideoMessage,this.trailer=qv(t.ypcTrailer,pu)}}mu.type="PlayerLegacyDesktopYpcTrailer";const fu=mu;class vu extends y{constructor(t){var e;super(),this.title=new $(t.title),this.description=new $(t.description),this.thumbnails=j.fromResponse(t.thumbnail),Reflect.has(t,"embed")&&(this.embed={iframe_url:t.embed.iframeUrl,flash_url:t.embed.flashUrl,flash_secure_url:t.embed.flashSecureUrl,width:t.embed.width,height:t.embed.height}),this.length_seconds=parseInt(t.lengthSeconds),this.channel={id:t.externalChannelId,name:t.ownerChannelName,url:t.ownerProfileUrl},this.is_family_safe=!!t.isFamilySafe,this.is_unlisted=!!t.isUnlisted,this.has_ypc_metadata=!!t.hasYpcMetadata,this.view_count=parseInt(t.viewCount),this.category=t.category,this.publish_date=t.publishDate,this.upload_date=t.uploadDate,this.available_countries=t.availableCountries,this.start_timestamp=(null===(e=t.liveBroadcastDetails)||void 0===e?void 0:e.startTimestamp)?new Date(t.liveBroadcastDetails.startTimestamp):null}}vu.type="PlayerMicroformat";const yu=vu;class gu extends y{constructor(t){super(),this.title=new $(t.title),this.video_id=t.videoId,this.video_title=new $(t.videoTitle),this.short_view_count=new $(t.shortViewCountText),this.prefer_immediate_redirect=t.preferImmediateRedirect,this.count_down_secs_for_fullscreen=t.countDownSecsForFullscreen,this.published=new $(t.publishedTimeText),this.background=j.fromResponse(t.background),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays),this.author=new hb(t.byline),this.cancel_button=lb.parseItem(t.cancelButton,R),this.next_button=lb.parseItem(t.nextButton,R),this.close_button=lb.parseItem(t.closeButton,R)}}gu.type="PlayerOverlayAutoplay";const _u=gu;class bu extends y{constructor(t){super(),this.results=lb.parseArray(t.results,[La,Da]),this.title=new $(t.title).toString()}}bu.type="WatchNextEndScreen";const wu=bu;class xu extends y{constructor(t){super(),this.end_screen=lb.parseItem(t.endScreen,wu),this.autoplay=lb.parseItem(t.autoplay,_u),this.share_button=lb.parseItem(t.shareButton,R),this.add_to_menu=lb.parseItem(t.addToMenu,ut),this.fullscreen_engagement=lb.parseItem(t.fullscreenEngagement),this.actions=lb.parseArray(t.actions),this.browser_media_session=lb.parseItem(t.browserMediaSession),this.decorated_player_bar=lb.parseItem(t.decoratedPlayerBarRenderer,ha)}}xu.type="PlayerOverlay";const Su=xu;class Tu extends y{constructor(t){super(),this.id=t.playlistId,this.title=new $(t.title),this.subtitle=t.subtitle?new $(t.subtitle):null,this.stats=t.stats.map((t=>new $(t))),this.brief_stats=t.briefStats.map((t=>new $(t))),this.author=t.ownerText||t.ownerEndpoint?new hb(Object.assign(Object.assign({},t.ownerText),{navigationEndpoint:t.ownerEndpoint}),t.ownerBadges,null):null,this.description=new $(t.descriptionText),this.num_videos=new $(t.numVideosText),this.view_count=new $(t.viewCountText),this.can_share=t.shareData.canShare,this.can_delete=t.editableDetails.canDelete,this.is_editable=t.isEditable,this.privacy=t.privacy,this.save_button=lb.parseItem(t.saveButton),this.shuffle_play_button=lb.parseItem(t.shufflePlayButton),this.menu=lb.parseItem(t.moreActionsMenu),this.banner=lb.parseItem(t.playlistHeaderBanner)}}Tu.type="PlaylistHeader";const Cu=Tu;class Iu extends y{constructor(t){super(),this.title=new $(t.playlistTitle),this.thumbnails=j.fromResponse(t.thumbnail),this.video_count=new $(t.playlistVideoCount),this.channel_name=new $(t.channelName),this.endpoint=new U(t.action)}}Iu.type="PlaylistInfoCardContent";const ku=Iu;class Eu extends y{constructor(t){super(),this.title=t.title,this.description=t.description||null}}Eu.type="PlaylistMetadata";const Ru=Eu;class Au extends y{constructor(t){super(),this.items=lb.parseArray(t.items)}get contents(){return this.items}}Au.type="PlaylistSidebar";const Mu=Au;class Pu extends y{constructor(t){super(),this.stats=t.stats.map((t=>new $(t))),this.thumbnail_renderer=lb.parseItem(t.thumbnailRenderer),this.title=new $(t.title),this.menu=lb.parseItem(t.menu),this.endpoint=new U(t.navigationEndpoint),this.description=new $(t.description)}}Pu.type="PlaylistSidebarPrimaryInfo";const Ou=Pu;class Du extends y{constructor(t){super(),this.owner=lb.parseItem(t.videoOwner),this.button=lb.parseItem(t.button)}}Du.type="PlaylistSidebarSecondaryInfo";const Nu=Du;class Lu extends y{constructor(t){super(),this.id=t.videoId,this.index=new $(t.index),this.title=new $(t.title),this.author=new hb(t.shortBylineText),this.thumbnails=j.fromResponse(t.thumbnail),this.thumbnail_overlays=lb.parseArray(t.thumbnailOverlays),this.set_video_id=null==t?void 0:t.setVideoId,this.endpoint=new U(t.navigationEndpoint),this.is_playable=t.isPlayable,this.menu=lb.parseItem(t.menu,ut),this.video_info=new $(t.videoInfo),this.accessibility_label=t.title.accessibility.accessibilityData.label;const e=t.upcomingEventData&&Number(`${t.upcomingEventData.startTime}000`);e&&(this.upcoming=new Date(e)),this.duration={text:new $(t.lengthText).toString(),seconds:parseInt(t.lengthSeconds)}}get is_live(){var t;return"LIVE"===(null===(t=this.thumbnail_overlays.firstOfType(Lt))||void 0===t?void 0:t.style)}get is_upcoming(){var t;return"UPCOMING"===(null===(t=this.thumbnail_overlays.firstOfType(Lt))||void 0===t?void 0:t.style)}}Lu.type="PlaylistVideo";const Bu=Lu;class Vu extends y{constructor(t){super(),this.id=t.playlistId,this.is_editable=t.isEditable,this.can_reorder=t.canReorder,this.videos=lb.parseArray(t.contents)}}Vu.type="PlaylistVideoList";const Uu=Vu;class ju extends y{constructor(t){super(),this.choices=t.choices.map((t=>({text:new $(t.text),select_endpoint:t.selectServiceEndpoint?new U(t.selectServiceEndpoint):null,deselect_endpoint:t.deselectServiceEndpoint?new U(t.deselectServiceEndpoint):null,vote_ratio_if_selected:(null==t?void 0:t.voteRatioIfSelected)||null,vote_percentage_if_selected:new $(t.votePercentageIfSelected),vote_ratio_if_not_selected:(null==t?void 0:t.voteRatioIfSelected)||null,vote_percentage_if_not_selected:new $(t.votePercentageIfSelected),image:t.image?j.fromResponse(t.image):null}))),Reflect.has(t,"type")&&(this.poll_type=t.type),Reflect.has(t,"totalVotes")&&(this.total_votes=new $(t.totalVotes)),Reflect.has(t,"liveChatPollId")&&(this.live_chat_poll_id=t.liveChatPollId)}}ju.type="Poll";const Wu=ju;class Fu extends Ti{constructor(t){super(t)}}Fu.type="Post";const Hu=Fu;class $u extends y{constructor(t){super(),this.images=lb.parseArray(t.images,vi)}}$u.type="PostMultiImage";const Gu=$u;class Yu extends y{constructor(t){super(),this.title=new $(t.title),this.suppress_padding_disclaimer=!!t.suppressPaddingDisclaimer}}Yu.type="ProductListHeader";const Ku=Yu;class qu extends y{constructor(t){super(),this.title=new $(t.title),this.accessibility_title=t.accessibilityTitle,this.thumbnail=j.fromResponse(t.thumbnail),this.price=t.price,this.endpoint=new U(t.onClickCommand),this.merchant_name=t.merchantName,this.stay_in_app=!!t.stayInApp,this.view_button=lb.parseItem(t.viewButton,R)}}qu.type="ProductListItem";const zu=qu;class Xu extends y{constructor(t){super(),this.items=lb.parseArray(t.items)}get contents(){return this.items}}Xu.type="ProfileColumn";const Qu=Xu;class Ju extends y{constructor(t){super(),this.items=lb.parseArray(t.items)}get contents(){return this.items}}Ju.type="ProfileColumnStats";const Zu=Ju;class tp extends y{constructor(t){super(),this.label=new $(t.label),this.value=new $(t.value)}}tp.type="ProfileColumnStatsEntry";const ep=tp;class ip extends y{constructor(t){super(),this.title=new $(t.title),this.thumbnails=j.fromResponse(t.thumbnail)}}ip.type="ProfileColumnUserInfo";const sp=ip;class np extends y{constructor(t){super(),this.choices=t.choices.map((t=>({text:new $(t.text),is_correct:t.isCorrect}))),this.total_votes=new $(t.totalVotes)}}np.type="Quiz";const op=np;class ap extends y{constructor(t){super(),this.title=new $(t.title),this.subtitle=new $(t.subtitle),this.avatars=t.avatars.map((t=>new j(t))),this.button=lb.parseItem(t.button,R),this.surface=t.surface}}ap.type="RecognitionShelf";const rp=ap;class lp extends y{constructor(t){super(),this.id=t.videoId,this.title=new $(t.headline),this.thumbnails=j.fromResponse(t.thumbnail),this.views=new $(t.viewCountText),this.endpoint=new U(t.navigationEndpoint),this.accessibility_label=t.accessibility.accessibilityData.label}}lp.type="ReelItem";const cp=lp;class hp extends y{constructor(t){super(),this.title=new $(t.title),this.items=lb.parseArray(t.items),Reflect.has(t,"endpoint")&&(this.endpoint=new U(t.endpoint))}get contents(){return this.items}}hp.type="ReelShelf";const dp=hp;class up extends y{constructor(t){super(),this.content=lb.parseItem(t.content)}}up.type="RelatedChipCloud";const pp=up;class mp extends y{constructor(t){super(),this.header=lb.parseItem(t.header),this.contents=lb.parseArray(t.contents)}}mp.type="RichGrid";const fp=mp;class vp extends y{constructor(t){super(),this.content=lb.parseItem(t.content)}}vp.type="RichItem";const yp=vp;class gp extends y{constructor(t){super(),this.title=new $(t.title),this.subtitle=new $(t.subtitle),Reflect.has(t,"titleStyle")&&(this.title_style=t.titleStyle.style),Reflect.has(t,"icon")&&(this.icon_type=t.icon.iconType)}}gp.type="RichListHeader";const _p=gp;class bp extends y{constructor(t){super(),this.thumbnail=j.fromResponse(t.thumbnail),this.title=new $(t.title),this.subtitle=new $(t.subtitle),this.call_to_action=new $(t.callToAction),Reflect.has(t,"callToActionIcon")&&(this.icon_type=t.callToActionIcon.iconType),this.endpoint=new U(t.endpoint)}}bp.type="RichMetadata";const wp=bp;class xp extends y{constructor(t){super(),this.contents=lb.parseArray(t.contents)}}xp.type="RichMetadataRow";const Sp=xp;class Tp extends y{constructor(t){super(),this.content=lb.parseItem(t.content)}}Tp.type="RichSection";const Cp=Tp;class Ip extends y{constructor(t){super(),this.title=new $(t.title),this.contents=lb.parseArray(t.contents),Reflect.has(t,"endpoint")&&(this.endpoint=new U(t.endpoint))}}Ip.type="RichShelf";const kp=Ip;class Ep extends y{constructor(t){super(),this.endpoint=new U(t.endpoint),this.search_button=lb.parseItem(t.searchButton,R),this.clear_button=lb.parseItem(t.clearButton,R),this.placeholder_text=new $(t.placeholderText)}}Ep.type="SearchBox";const Rp=Ep;class Ap extends y{constructor(t){super(),this.label=new $(t.label),this.endpoint=new U(t.endpoint||t.navigationEndpoint),this.tooltip=t.tooltip,Reflect.has(t,"status")&&(this.status=t.status)}get disabled(){return"FILTER_STATUS_DISABLED"===this.status}get selected(){return"FILTER_STATUS_SELECTED"===this.status}}Ap.type="SearchFilter";const Mp=Ap;class Pp extends y{constructor(t){super(),this.title=new $(t.title),this.filters=zv(t.filters,Mp)}}Pp.type="SearchFilterGroup";const Op=Pp;class Dp extends y{constructor(t){super(),this.title=new $(t.title),this.groups=zv(t.groups,Op)}}Dp.type="SearchFilterOptionsDialog";const Np=Dp;class Lp extends y{constructor(t){super(),this.chip_bar=qv(t.chipBar,Ss),this.search_filter_button=qv(t.searchFilterButton,R)}}Lp.type="SearchHeader";const Bp=Lp;class Vp extends y{constructor(t){super(),Reflect.has(t,"title")&&(this.title=new $(t.title)),Reflect.has(t,"groups")&&(this.groups=lb.parseArray(t.groups,Op)),Reflect.has(t,"button")&&(this.button=lb.parseItem(t.button,gi))}}Vp.type="SearchSubMenu";const Up=Vp;class jp extends y{constructor(t){super(),this.contents=lb.parseArray(t.contents)}}jp.type="SearchSuggestionsSection";const Wp=jp;class Fp extends y{constructor(t){super(),this.contents=lb.parseArray(t.contents)}}Fp.type="SecondarySearchContainer";const Hp=Fp;class $p extends y{constructor(t){super(),this.like_button=lb.parseItem(t.likeButton,[gi,R]),this.dislike_button=lb.parseItem(t.dislikeButton,[gi,R])}}$p.type="SegmentedLikeDislikeButton";const Gp=$p;class Yp extends y{constructor(t){super(),Reflect.has(t,"title")&&(this.title=new $(t.title)),Reflect.has(t,"summary")&&(this.summary=new $(t.summary)),Reflect.has(t,"enableServiceEndpoint")&&(this.enable_endpoint=new U(t.enableServiceEndpoint)),Reflect.has(t,"disableServiceEndpoint")&&(this.disable_endpoint=new U(t.disableServiceEndpoint)),this.item_id=t.itemId}}Yp.type="SettingBoolean";const Kp=Yp;class qp extends y{constructor(t){super(),this.title=new $(t.title),this.help_text=new $(t.helpText),this.enabled=t.enabled,this.disabled=t.disabled,this.id=t.id}}qp.type="SettingsCheckbox";const zp=qp;class Xp extends y{constructor(t){super(),this.title=new $(t.title),this.subtitle=new $(t.subtitle),this.enabled=t.enabled,this.enable_endpoint=new U(t.enableServiceEndpoint),this.disable_endpoint=new U(t.disableServiceEndpoint)}}Xp.type="SettingsSwitch";const Qp=Xp;class Jp extends y{constructor(t){super(),this.title=new $(t.title),Reflect.has(t,"text")&&(this.text=new $(t.text).toString()),Reflect.has(t,"options")&&(this.options=lb.parseArray(t.options,[Qp,O,ea,zp,cs]))}}Jp.type="SettingsOptions";const Zp=Jp;class tm extends y{constructor(t){super(),this.title=new $(t.title),this.items=lb.parseArray(t.items,Mo)}get contents(){return this.items}}tm.type="SettingsSidebar";const em=tm;class im extends y{constructor(t){super(),this.thumbnail=j.fromResponse(t.thumbnail),this.content=new $(t.content),this.published=new $(t.publishedTimeText),this.menu=qv(t.actionMenu,ut),this.original_post=qv(t.originalPost,Ti),this.id=t.postId,this.endpoint=new U(t.navigationEndpoint),this.expand_button=qv(t.expandButton,R),this.author=new hb(t.displayName,void 0)}}im.type="SharedPost";const sm=im;class nm extends y{constructor(t){super(),this.title=new $(t.title),Reflect.has(t,"endpoint")&&(this.endpoint=new U(t.endpoint)),this.content=lb.parseItem(t.content),Reflect.has(t,"icon")&&(this.icon_type=t.icon.iconType),Reflect.has(t,"menu")&&(this.menu=lb.parseItem(t.menu)),Reflect.has(t,"playAllButton")&&(this.play_all_button=lb.parseItem(t.playAllButton,R))}}nm.type="Shelf";const om=nm;class am extends y{constructor(t){super(),this.corrected_query=new $(t.correctedQuery),this.original_query=new $(t.originalQuery),this.corrected_query_endpoint=new U(t.correctedQueryEndpoint),this.original_query_endpoint=new U(t.originalQueryEndpoint),this.search_instead_for=new $(t.searchInsteadFor),this.showing_results_for=new $(t.showingResultsFor)}}am.type="ShowingResultsFor";const rm=am;class lm extends y{constructor(t){super(),this.image=j.fromResponse(t.image),this.title=new $(t.title),this.display_domain=new $(t.displayDomain),this.show_link_icon=t.showLinkIcon,this.call_to_action=new $(t.callToAction),this.endpoint=new U(t.command)}}lm.type="SimpleCardContent";const cm=lm;class hm extends y{constructor(t){super(),this.message=new $(t.message),this.prominent=t.prominent}}hm.type="SimpleCardTeaser";const dm=hm;class um extends y{constructor(t){super(),this.lines=t.lines.map((t=>new $(t))),this.style=t.layoutStyle}}um.type="SimpleTextSection";const pm=um;class mm extends y{constructor(t){super(),this.action_text=new $(t.actionText),this.nav_text=new $(t.navigationText),this.details=new $(t.detailsText),this.icon_type=t.icon.iconType,this.endpoint=new U(t.navigationEndpoint)}}mm.type="SingleActionEmergencySupport";const fm=mm;class vm extends y{constructor(t){super(),this.title=t.title||"N/A",this.selected=!!t.selected,this.endpoint=new U(t.endpoint),this.content=lb.parseItem(t.content,[xt,Wd,fp])}}vm.type="Tab";const ym=vm;class gm extends y{constructor(t){super(),this.tabs=lb.parseArray(t.tabs,ym)}}gm.type="SingleColumnBrowseResults";const _m=gm;class bm extends y{constructor(t){super(),this.contents=lb.parse(t)}}bm.type="SingleColumnMusicWatchNextResults";const wm=bm;class xm extends y{constructor(t){super(),this.thumbnails=j.fromResponse(t.thumbnail),this.style=t.style}}xm.type="SingleHeroImage";const Sm=xm;class Tm extends y{constructor(t){super(),this.thumbnail=j.fromResponse(t.thumbnail),this.title=new $(t.title),this.endpoint=new U(t.navigationEndpoint),this.subscribe_button=lb.parseItem(t.subscribeButton,Ui)}}Tm.type="SlimOwner";const Cm=Tm;class Im extends y{constructor(t){super(),this.title=new $(t.title),this.collapsed_subtitle=new $(t.collapsedSubtitle),this.expanded_subtitle=new $(t.expandedSubtitle),this.owner=lb.parseItem(t.owner),this.description=new $(t.description),this.video_id=t.videoId,this.date=new $(t.dateText)}}Im.type="SlimVideoMetadata";const km=Im;class Em extends y{constructor(t){super(),this.name=new $(t.name),this.is_selected=t.isSelected,this.endpoint=new U(t.navigationEndpoint)}}Em.type="SubFeedOption";const Rm=Em;class Am extends y{constructor(t){super(),this.title=new $(t.title),this.options=lb.parseArray(t.options,Rm)}}Am.type="SubFeedSelector";const Mm=Am;class Pm extends y{constructor(t){super(),this.contents=lb.parse(t)}}Pm.type="Tabbed";const Om=Pm;class Dm extends y{constructor(t){super(),this.tabs=lb.parseArray(t.tabs,ym)}}Dm.type="TabbedSearchResults";const Nm=Dm;class Lm extends y{constructor(t){super(),this.title=new $(t.title),this.style=t.style}}Lm.type="TextHeader";const Bm=Lm;class Vm extends y{constructor(t){super(),this.landscape=j.fromResponse(t.landscape),this.portrait=j.fromResponse(t.portrait)}}Vm.type="ThumbnailLandscapePortrait";const Um=Vm;class jm extends y{constructor(t){super(),this.text=new $(t.text).toString()}}jm.type="ThumbnailOverlayEndorsement";const Wm=jm;class Fm extends y{constructor(t){super(),this.text=new $(t.text),this.icon_type=t.icon.iconType}}Fm.type="ThumbnailOverlayHoverText";const Hm=Fm;class $m extends y{constructor(t){super(),this.text=new $(t.text).toString(),this.icon_type=t.icon.iconType}}$m.type="ThumbnailOverlayInlineUnplayable";const Gm=$m;class Ym extends y{constructor(t){super(),this.text=new $(t.text)}}Ym.type="ThumbnailOverlayLoadingPreview";const Km=Ym;class qm extends y{constructor(t){super(),this.text=new $(t.text).toString()}}qm.type="ThumbnailOverlayNowPlaying";const zm=qm;class Xm extends y{constructor(t){super(),this.hack=t.hack}}Xm.type="ThumbnailOverlayPinking";const Qm=Xm;class Jm extends y{constructor(t){super(),this.texts=t.texts.map((t=>new $(t)))}}Jm.type="ThumbnailOverlayPlaybackStatus";const Zm=Jm;class tf extends y{constructor(t){super(),this.percent_duration_watched=t.percentDurationWatched}}tf.type="ThumbnailOverlayResumePlayback";const ef=tf;class sf extends y{constructor(t){super(),this.text=new $(t.text),this.icon_type=t.icon.iconType}}sf.type="ThumbnailOverlaySidePanel";const nf=sf;class of extends y{constructor(t){super(),Reflect.has(t,"isToggled")&&(this.is_toggled=t.isToggled),this.icon_type={toggled:t.toggledIcon.iconType,untoggled:t.untoggledIcon.iconType},this.tooltip={toggled:t.toggledTooltip,untoggled:t.untoggledTooltip},this.toggled_endpoint=new U(t.toggledServiceEndpoint),this.untoggled_endpoint=new U(t.untoggledServiceEndpoint)}}of.type="ThumbnailOverlayToggleButton";const af=of;class rf extends y{constructor(t){super(),this.visible_time_range_start_millis=t.visibleTimeRangeStartMillis,this.visible_time_range_end_millis=t.visibleTimeRangeEndMillis,this.decoration_time_millis=t.decorationTimeMillis,this.label=new $(t.label),this.icon=t.icon}}rf.type="TimedMarkerDecoration";const lf=rf;class cf extends y{constructor(t){super(),this.title=new $(t.title)}}cf.type="TitleAndButtonListHeader";const hf=cf;class df extends y{constructor(t){super(),this.text=new $(t.defaultText),this.toggled_text=new $(t.toggledText),this.icon_type=t.defaultIcon.iconType,this.toggled_icon_type=t.toggledIcon.iconType,this.default_endpoint=new U(t.defaultServiceEndpoint),this.toggled_endpoint=new U(t.toggledServiceEndpoint)}}df.type="ToggleMenuServiceItem";const uf=df;class pf extends y{constructor(t){super(),this.promo_config={promo_id:t.promoConfig.promoId,impression_endpoints:t.promoConfig.impressionEndpoints.map((t=>new U(t))),accept:new U(t.promoConfig.acceptCommand),dismiss:new U(t.promoConfig.dismissCommand)},this.target_id=t.targetId,this.details=new $(t.detailsText),this.suggested_position=t.suggestedPosition.type,this.dismiss_stratedy=t.dismissStrategy.type,this.dwell_time_ms=parseInt(t.dwellTimeMs)}}pf.type="Tooltip";const mf=pf;class ff extends y{constructor(t){var e;super(),this.title=new $(t.title),this.avatar=j.fromResponse(null!==(e=t.thumbnail)&&void 0!==e?e:t.avatar),this.subtitle=new $(t.subtitle),this.subscribe_button=lb.parseItem(t.subscribeButton,Ui),this.endpoint=new U(t.navigationEndpoint)}}ff.type="TopicChannelDetails";const vf=ff;class yf extends y{constructor(t){super(),this.tabs=lb.parse(t.tabs),this.secondary_contents=lb.parse(t.secondaryContents)}}yf.type="TwoColumnBrowseResults";const gf=yf;class _f extends y{constructor(t){super(),this.primary_contents=lb.parse(t.primaryContents),this.secondary_contents=lb.parse(t.secondaryContents)}}_f.type="TwoColumnSearchResults";const bf=_f;var wf,xf;class Sf extends y{constructor(t){var e,i,s,n,o;super(),wf.add(this),this.results=lb.parseArray(null===(e=t.results)||void 0===e?void 0:e.results.contents),this.secondary_results=lb.parseArray(null===(i=t.secondaryResults)||void 0===i?void 0:i.secondaryResults.results),this.conversation_bar=lb.parseItem(null==t?void 0:t.conversationBar);const a=null===(s=t.playlist)||void 0===s?void 0:s.playlist;a&&(this.playlist={id:a.playlistId,title:a.title,author:(null===(n=a.shortBylineText)||void 0===n?void 0:n.simpleText)?new $(a.shortBylineText):new hb(a.longBylineText),contents:lb.parseArray(a.contents),current_index:a.currentIndex,is_infinite:!!a.isInfinite,menu:lb.parseItem(a.menu,ut)});const r=null===(o=t.autoplay)||void 0===o?void 0:o.autoplay;r&&(this.autoplay={sets:r.sets.map((t=>m(this,wf,"m",xf).call(this,t)))},r.modifiedSets&&(this.autoplay.modified_sets=r.modifiedSets.map((t=>m(this,wf,"m",xf).call(this,t)))),r.countDownSecs&&(this.autoplay.count_down_secs=r.countDownSecs))}}wf=new WeakSet,xf=function(t){const e={autoplay_video:new U(t.autoplayVideo)};return t.nextButtonVideo&&(e.next_button_video=new U(t.nextButtonVideo)),e},Sf.type="TwoColumnWatchNextResults";const Tf=Sf;class Cf extends y{constructor(t){super(),this.header=lb.parseItem(t.header),this.call_to_action=lb.parseItem(t.callToAction),this.sections=lb.parseArray(t.sections),Reflect.has(t,"collapsedLabel")&&(this.collapsed_label=new $(t.collapsedLabel))}}Cf.type="UniversalWatchCard";const If=Cf;class kf extends y{constructor(t){super(),this.message_title=new $(t.dialogMessageTitle),this.message_text=new $(t.dialogMessageText),this.action_button=lb.parseItem(t.actionButton,R),this.dismiss_button=lb.parseItem(t.dismissButton,R),this.is_visible=t.isVisible}}kf.type="UpsellDialog";const Ef=kf;class Rf extends y{constructor(t){super(),this.items=lb.parseArray(t.items),this.collapsed_item_count=t.collapsedItemCount,this.collapsed_state_button_text=new $(t.collapsedStateButtonText)}get contents(){return this.items}}Rf.type="VerticalList";const Af=Rf;class Mf extends y{constructor(t){super(),this.items=lb.parseArray(t.items),this.view_all_text=new $(t.viewAllText),this.view_all_endpoint=new U(t.viewAllEndpoint)}get contents(){return this.items}}Mf.type="VerticalWatchCardList";const Pf=Mf;class Of extends y{constructor(t){super(),this.title=new $(t.videoTitle),this.channel_name=new $(t.channelName),this.view_count=new $(t.viewCountText),this.video_thumbnails=j.fromResponse(t.videoThumbnail),this.duration=new $(t.lengthString),this.endpoint=new U(t.action)}}Of.type="VideoInfoCardContent";const Df=Of;class Nf extends y{constructor(t){super(),this.subscription_button=t.subscriptionButton,this.subscriber_count=new $(t.subscriberCountText),this.author=new hb(Object.assign(Object.assign({},t.title),{navigationEndpoint:t.navigationEndpoint}),t.badges,t.thumbnail)}}Nf.type="VideoOwner";const Lf=Nf;class Bf extends y{constructor(t){var e,i,s,n;super(),this.title=new $(t.title),Reflect.has(t,"superTitleLink")&&(this.super_title_link=new $(t.superTitleLink)),this.view_count=new $(null===(i=null===(e=t.viewCount)||void 0===e?void 0:e.videoViewCountRenderer)||void 0===i?void 0:i.viewCount),this.short_view_count=new $(null===(n=null===(s=t.viewCount)||void 0===s?void 0:s.videoViewCountRenderer)||void 0===n?void 0:n.shortViewCount),this.badges=lb.parseArray(t.badges,Dt),this.published=new $(t.dateText),this.relative_date=new $(t.relativeDateText),this.menu=lb.parseItem(t.videoActions,ut)}}Bf.type="VideoPrimaryInfo";const Vf=Bf;class Uf extends y{constructor(t){super(),this.owner=lb.parseItem(t.owner,Lf),this.description=new $(t.description),Reflect.has(t,"attributedDescription")&&(this.description=$.fromAttributed(t.attributedDescription)),this.subscribe_button=lb.parseItem(t.subscribeButton,[Ui,R]),this.metadata=lb.parseItem(t.metadataRowContainer,vh),this.show_more_text=t.showMoreText,this.show_less_text=t.showLessText,this.default_expanded=t.defaultExpanded,this.description_collapsed_lines=t.descriptionCollapsedLines}}Uf.type="VideoSecondaryInfo";const jf=Uf;class Wf extends y{constructor(t){super(),this.title=new $(t.title),this.subtitle=new $(t.subtitle),this.duration={text:new $(t.lengthText).toString(),seconds:kb(t.lengthText.simpleText)},this.style=t.style}}Wf.type="WatchCardCompactVideo";const Ff=Wf;class Hf extends y{constructor(t){var e;super(),this.endpoint=new U(t.navigationEndpoint),this.call_to_action_button=lb.parseItem(t.callToActionButton),this.hero_image=lb.parseItem(t.heroImage),this.label=(null===(e=t.lengthText)||void 0===e?void 0:e.accessibility.accessibilityData.label)||""}}Hf.type="WatchCardHeroVideo";const $f=Hf;class Gf extends y{constructor(t){super(),this.title=new $(t.title),this.title_endpoint=new U(t.titleNavigationEndpoint),this.subtitle=new $(t.subtitle),this.author=new hb(t,t.titleBadge?[t.titleBadge]:null,t.avatar),this.author.name=this.title.toString(),this.style=t.style}}Gf.type="WatchCardRichHeader";const Yf=Gf;class Kf extends y{constructor(t){super(),this.lists=lb.parseArray(t.lists)}}Kf.type="WatchCardSectionSequence";const qf=Kf;class zf extends gf{constructor(t){super(t)}}zf.type="WatchNextTabbedResults";const Xf=zf;class Qf extends y{constructor(t){var e,i;super(),this.title=t.title,this.content=lb.parseItem(t.content,xt),this.endpoint=new U(t.navigationEndpoint),this.category_assets={asset_key:null===(e=t.categoryAssets)||void 0===e?void 0:e.assetKey,background_color:null===(i=t.categoryAssets)||void 0===i?void 0:i.backgroundColor},this.category_type=t.categoryType}}Qf.type="AnchoredSection";const Jf=Qf;class Zf extends y{constructor(t){var e,i;super(),this.title=new $(t.title),this.category_assets={asset_key:null===(e=t.categoryAssets)||void 0===e?void 0:e.assetKey,background_color:null===(i=t.categoryAssets)||void 0===i?void 0:i.backgroundColor},this.category_type=t.categoryType,this.endpoint=new U(t.endpoint)}}Zf.type="KidsCategoryTab";const tv=Zf;class ev extends y{constructor(t){super(),this.category_tabs=lb.parseArray(t.categoryTabs,tv),this.privacy_button=lb.parseItem(t.privacyButtonRenderer,R)}}ev.type="kidsCategoriesHeader";const iv=ev;class sv extends y{constructor(t){super(),this.anchors=lb.parseArray(t.anchors,Jf)}}sv.type="kidsHomeScreen";const nv=sv,ov=new Set(["trackingParams","accessibility","accessibilityData"]),av={};function rv(t){return t.replace(/[A-Z]/g,(t=>`_${t.toLowerCase()}`))}function lv(t,e){let i=!1;if("object"==typeof e&&null!=e){if(i=cv(e))return av[i]=Reflect.get(e,Reflect.ownKeys(e)[0]),{type:"renderer",renderers:[i],optional:!1};if(i=function(t){return!!(Array.isArray(t)&&t.every((t=>cv(t))))&&Object.fromEntries(t.map((t=>{const e=Reflect.ownKeys(t)[0].toString();return[Fv(e),t[e]]})))}(e)){for(const[t,e]of Object.entries(i))av[t]=e;return{type:"renderer_list",renderers:Object.keys(i),optional:!1}}if(i=function(t,e){if("object"==typeof e&&null!==e){if(t.endsWith("Endpoint")||t.endsWith("Command")||"endpoint"===t)return{type:"misc",endpoint:new U(e),optional:!1,misc_type:"NavigationEndpoint"};if(Reflect.has(e,"simpleText")||Reflect.has(e,"runs")){const t=new $(e);return{type:"misc",misc_type:"Text",optional:!1,endpoint:t.endpoint,text:t.toString()}}if(Reflect.has(e,"thumbnails")&&Array.isArray(Reflect.get(e,"thumbnails")))return{type:"misc",misc_type:"Thumbnail",optional:!1}}return!1}(t,e))return i}const s=typeof e;return"object"===s?{type:"object",keys:Object.entries(e).map((([t,e])=>[t,lv(t,e)])),optional:!1}:{type:"primative",typeof:[s],optional:!1}}function cv(t){if("object"!=typeof t)return!1;const e=Reflect.ownKeys(t);return!(1!==e.length||!e[0].toString().includes("Renderer"))&&Fv(e[0].toString())}function hv(t){return function(t){var e;const i=t.filter((([,t])=>{var e;return"misc"===t.type&&("NavigationEndpoint"===t.misc_type||"Text"===t.misc_type)&&"WEB_PAGE_TYPE_CHANNEL"===(null===(e=t.endpoint)||void 0===e?void 0:e.metadata.page_type)})),s=i.sort((([,t],[,e])=>"misc"!==t.type||"misc"!==e.type||"Text"!==t.misc_type||"Text"!==e.misc_type?0:e.text.length-t.text.length)),n=new Set,o=s[0];let a;if(o){n.add(o[0]);const i=t.map((([t])=>t)).filter((t=>t.endsWith("Badges")||"badges"===t)),s=null!==(e=i.filter((t=>t.startsWith("owner")||t.startsWith("author")))[0])&&void 0!==e?e:i[0],r=t.find((([t])=>t===s)),l=!!r&&"renderer_list"===r[1].type&&Reflect.has(r[1].renderers,"MetadataBadge");l&&s&&n.add(s),a={type:"misc",misc_type:"Author",optional:!1,params:[o[0],l?s:void 0]}}return a&&t.push(["author",a]),t.filter((([t])=>!n.has(t)))}(function(t){if("object"!=typeof t||null===t)throw new fb("Generator: Cannot introspect non-object",{classdata:t});return Reflect.ownKeys(t).filter((t=>!function(t){return"string"==typeof t&&ov.has(t)}(t))).filter((t=>"string"==typeof t)).map((e=>[e,lv(e,Reflect.get(t,e))]))}(t))}function dv(t){const e=hv(t),i=new Map;for(const[,t]of e)if("renderer"===t.type||"renderer_list"===t.type)for(const e of t.renderers){const t=av[e];t&&i.set(e,t)}return{key_info:e,unimplemented_dependencies:Array.from(i).filter((([t])=>!$v(t)))}}function uv(t,e,i){var s,n;i({error_type:"class_not_found",classname:t,key_info:e});const o=(s=class extends y{static set key_info(t){f(this,s,new Map(t),"f",n)}static get key_info(){return[...m(this,s,"f",n).entries()]}constructor(e){super();const{key_info:s,unimplemented_dependencies:n}=dv(e),{resolved_key_info:a,changed_keys:r}=bv(o.key_info,s);r.length>0&&(o.key_info=a,i({error_type:"class_changed",classname:t,key_info:o.key_info,changed_keys:r}));for(const[t,e]of n)pv(t,e,i);for(const[t,i]of s){let s=rv(t);"misc"===i.type&&"NavigationEndpoint"===i.misc_type&&(s="endpoint"),Reflect.set(this,s,_v(t,i,e))}}},a=s,"symbol"==typeof(r="node")&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:r}),s.type=t,n={value:new Map},s);var a,r;return o.key_info=e,Object.defineProperty(o,"name",{value:t,writable:!1}),o}function pv(t,e,i){const{key_info:s,unimplemented_dependencies:n}=dv(e),o=uv(t,s,i);Gv(t,o);for(const[t,e]of n)pv(t,e,i);return o}function mv(t,e){const i=[],s=["super();"];for(const[t,n]of e){let e=rv(t);"misc"===n.type&&"NavigationEndpoint"===n.misc_type&&(e="endpoint"),i.push(`${e}${n.optional?"?":""}: ${fv(n)};`),s.push(`this.${e} = ${vv(t,n)};`)}return`class ${t} extends YTNode {\n  static type = '${t}';\n\n  ${i.join("\n  ")}\n\n  constructor(data: RawNode) {\n    ${s.join("\n    ")}\n  }\n}\n`}function fv(t,e=0){switch(t.type){case"renderer":return`${t.renderers.map((t=>`YTNodes.${t}`)).join(" | ")} | null`;case"renderer_list":return`ObservedArray<${t.renderers.map((t=>`YTNodes.${t}`)).join(" | ")}> | null`;case"object":return`{\n${t.keys.map((([t,i])=>`${" ".repeat(2*(e+2))}${rv(t)}${i.optional?"?":""}: ${fv(i,e+1)}`)).join(",\n")}\n${" ".repeat(2*(e+1))}}`;case"misc":return"Thumbnail"===t.misc_type?"Thumbnail[]":t.misc_type;case"primative":return t.typeof.join(" | ");case"unknown":return"/* TODO: determine correct type */ unknown"}}function vv(t,e,i=["data"],s=1){let n="undefined";switch(e.type){case"renderer":n=`Parser.parseItem(${i.join(".")}.${t}, [ ${e.renderers.map((t=>`YTNodes.${t}`)).join(", ")} ])`;break;case"renderer_list":n=`Parser.parse(${i.join(".")}.${t}, true, [ ${e.renderers.map((t=>`YTNodes.${t}`)).join(", ")} ])`;break;case"object":{const o=[...i,t];n=`{\n${e.keys.map((([t,e])=>`${" ".repeat(2*(s+2))}${rv(t)}: ${vv(t,e,o,s+1)}`)).join(",\n")}\n${" ".repeat(2*(s+1))}}`}break;case"misc":switch(e.misc_type){case"Thumbnail":n=`Thumbnail.fromResponse(${i.join(".")}.${t})`;break;case"Author":{const t=`new Author(${i.join(".")}.${e.params[0]}, ${e.params[1]?`${i.join(".")}.${e.params[1]}`:"undefined"})`;return e.optional?`Reflect.has(${i.join(".")}, '${e.params[0]}') ? ${t} : undefined`:t}default:n=`new ${e.misc_type}(${i.join(".")}.${t})`}if("undefined"===n)throw new Error("Unreachable code reached! Switch missing case!");break;case"primative":case"unknown":n=`${i.join(".")}.${t}`}return e.optional?`Reflect.has(${i.join(".")}, '${t}') ? ${n} : undefined`:n}function yv(t,e){let i=t;for(const t of e)i=i[t];return i}function gv(t,e){let i=t;for(const t of e){if(!Reflect.has(i,t))return!1;i=i[t]}return!0}function _v(t,e,i,s=["data"]){const n=!e.optional||gv({data:i},[...s,t]);switch(e.type){case"renderer":return n?qv(yv({data:i},[...s,t]),e.renderers.map((t=>Hv(t)))):void 0;case"renderer_list":return n?Xv(yv({data:i},[...s,t]),!0,e.renderers.map((t=>Hv(t)))):void 0;case"object":{const o={},a=[...s,t];for(const[t,s]of e.keys)o[t]=n?_v(t,s,i,a):void 0;return o}case"misc":switch(e.misc_type){case"NavigationEndpoint":return n?new U(yv({data:i},[...s,t])):void 0;case"Text":return n?new $(yv({data:i},[...s,t])):void 0;case"Thumbnail":return n?j.fromResponse(yv({data:i},[...s,t])):void 0;case"Author":return!e.optional||gv({data:i},[...s,e.params[0]])?new hb(yv({data:i},[...s,e.params[0]]),e.params[1]?yv({data:i},[...s,e.params[1]]):void 0):void 0}throw new Error("Unreachable code reached! Switch missing case!");case"primative":case"unknown":return yv({data:i},[...s,t])}}function bv(t,e){const i=new Map,s=new Set(t.map((([t])=>t))),n=new Set(e.map((([t])=>t))),o=e.filter((([t])=>!s.has(t))),a=t.filter((([t])=>!n.has(t))),r=t.filter((([t])=>n.has(t))),l=new Map(e);for(const[t,e]of r){const s=l.get(t);if(s)if(e.type===s.type)switch(e.type){case"object":{if("object"!==s.type)continue;const{resolved_key_info:n}=bv(e.keys,s.keys),o={type:"object",keys:n,optional:e.optional||s.optional};JSON.stringify(o)!==JSON.stringify(e)&&i.set(t,o)}break;case"renderer":{if("renderer"!==s.type)continue;const n={type:"renderer",renderers:Object.assign(Object.assign({},e.renderers),s.renderers),optional:e.optional||s.optional};JSON.stringify(Object.assign(Object.assign({},n),{renderers:Object.keys(n.renderers)}))!==JSON.stringify(Object.assign(Object.assign({},e),{renderers:Object.keys(e.renderers)}))&&i.set(t,n)}break;case"renderer_list":{if("renderer_list"!==s.type)continue;const n={type:"renderer_list",renderers:Object.assign(Object.assign({},e.renderers),s.renderers),optional:e.optional||s.optional};JSON.stringify(Object.assign(Object.assign({},n),{renderers:Object.keys(n.renderers)}))!==JSON.stringify(Object.assign(Object.assign({},e),{renderers:Object.keys(e.renderers)}))&&i.set(t,n)}break;case"misc":if("misc"!==s.type)continue;switch(e.misc_type!==s.misc_type&&i.set(t,{type:"unknown",optional:!0}),e.misc_type){case"Author":{if("Author"!==s.misc_type)break;const n=e.params[1]||s.params[1],o={type:"misc",misc_type:"Author",optional:e.optional||s.optional,params:[s.params[0],n]};JSON.stringify(o)!==JSON.stringify(e)&&i.set(t,o)}}break;case"primative":{if("primative"!==s.type)continue;const n={type:"primative",typeof:Array.from(new Set([...s.typeof,...e.typeof])),optional:e.optional||s.optional};JSON.stringify(n)!==JSON.stringify(e)&&i.set(t,n)}}else i.set(t,{type:"unknown",optional:!0})}for(const[t,e]of o)i.set(t,Object.assign(Object.assign({},e),{optional:!0}));for(const[t,e]of a)i.set(t,Object.assign(Object.assign({},e),{optional:!0}));const c=t.filter((([t])=>!i.has(t)));return{resolved_key_info:[...new Map([...c,...i]).entries()],changed_keys:[...i.entries()]}}class wv extends y{constructor(t){var e,i,s;super(),this.contents=zv(t.contents),Array.isArray(t.continuations)&&(this.continuation=null===(s=null===(i=null===(e=t.continuations)||void 0===e?void 0:e.at(0))||void 0===i?void 0:i.nextContinuationData)||void 0===s?void 0:s.continuation)}}wv.type="itemSectionContinuation";class xv extends y{constructor(t){super(),this.endpoint=new U(t.endpoint)}}xv.type="navigateAction";class Sv extends y{constructor(t){super(),this.miniplayer_command=new U(t.miniplayerCommand),this.show_premium_branding=t.showPremiumBranding}}Sv.type="showMiniplayerCommand";class Tv extends y{constructor(t){super(),this.target_id=t.targetId,this.contents=Xv(t.continuationItems,!0),this.slot=null==t?void 0:t.slot}}Tv.type="reloadContinuationItemsCommand";class Cv extends y{constructor(t){var e,i,s,n,o,a;super(),this.contents=Xv(t.contents,!0),this.continuation=(null===(s=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextContinuationData)||void 0===s?void 0:s.continuation)||(null===(a=null===(o=null===(n=t.continuations)||void 0===n?void 0:n[0])||void 0===o?void 0:o.reloadContinuationData)||void 0===a?void 0:a.continuation)||null}}Cv.type="sectionListContinuation";class Iv extends y{constructor(t){var e;super(),this.contents=Xv(t.contents,!0),this.continuation=(null===(e=t.continuations)||void 0===e?void 0:e[0].nextContinuationData.continuation)||null}}Iv.type="musicPlaylistShelfContinuation";class kv extends y{constructor(t){var e,i,s,n;super(),this.contents=zv(t.contents),this.continuation=(null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0].nextContinuationData)||void 0===i?void 0:i.continuation)||(null===(n=null===(s=t.continuations)||void 0===s?void 0:s[0].reloadContinuationData)||void 0===n?void 0:n.continuation)||null}}kv.type="musicShelfContinuation";class Ev extends y{constructor(t){var e;super(),this.items=Xv(t.items,!0),this.continuation=(null===(e=t.continuations)||void 0===e?void 0:e[0].nextContinuationData.continuation)||null}get contents(){return this.items}}Ev.type="gridContinuation";class Rv extends y{constructor(t){var e,i,s,n,o,a;super(),this.contents=zv(t.contents),this.continuation=(null===(s=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextContinuationData)||void 0===s?void 0:s.continuation)||(null===(a=null===(o=null===(n=t.continuations)||void 0===n?void 0:n[0])||void 0===o?void 0:o.nextRadioContinuationData)||void 0===a?void 0:a.continuation)||null}}Rv.type="playlistPanelContinuation";class Av extends y{constructor(t){var e,i,s;super(),this.continuation_type=t.type,this.timeout_ms=null===(e=t.continuation)||void 0===e?void 0:e.timeoutMs,this.time_until_last_message_ms=null===(i=t.continuation)||void 0===i?void 0:i.timeUntilLastMessageMsec,this.token=null===(s=t.continuation)||void 0===s?void 0:s.continuation}}Av.type="continuation";class Mv extends y{constructor(t){var e,i,s,n,o,a,r,l;let c,h;super(),this.actions=Xv(null===(e=t.actions)||void 0===e?void 0:e.map((t=>(delete t.clickTrackingParams,t))),!0)||b([]),this.action_panel=qv(t.actionPanel),this.item_list=qv(t.itemList,Vc),this.header=qv(t.header,Lc),this.participants_list=qv(t.participantsList,$c),this.popout_message=qv(t.popoutMessage,Qo),this.emojis=(null===(i=t.emojis)||void 0===i?void 0:i.map((t=>({emoji_id:t.emojiId,shortcuts:t.shortcuts,search_terms:t.searchTerms,image:j.fromResponse(t.image),is_custom_emoji:t.isCustomEmoji}))))||[],(null===(s=t.continuations)||void 0===s?void 0:s[0].timedContinuationData)?(h="timed",c=null===(n=t.continuations)||void 0===n?void 0:n[0].timedContinuationData):(null===(o=t.continuations)||void 0===o?void 0:o[0].invalidationContinuationData)?(h="invalidation",c=null===(a=t.continuations)||void 0===a?void 0:a[0].invalidationContinuationData):(null===(r=t.continuations)||void 0===r?void 0:r[0].liveChatReplayContinuationData)&&(h="replay",c=null===(l=t.continuations)||void 0===l?void 0:l[0].liveChatReplayContinuationData),this.continuation=new Av({continuation:c,type:h}),this.viewer_name=t.viewerName}}Mv.type="liveChatContinuation";const Pv=new Set(["AdSlot","DisplayAd","SearchPyv","MealbarPromo","PrimetimePromo","BackgroundPromo","PromotedSparklesWeb","RunAttestationCommand","CompactPromotedVideo","BrandVideoShelf","BrandVideoSingleton","StatementBanner","GuideSigninPromo","AdsEngagementPanelContent"]),Ov=new Map(Object.entries(e)),Dv=new Map;let Nv=null,Lv=t=>{var{classname:e}=t,i=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i}(t,["classname"]);switch(i.error_type){case"parse":i.error instanceof Error&&console.warn(new fb(`Something went wrong at ${e}!\nThis is a bug, please report it at ${mb.shim.info.bugs_url}`,{stack:i.error.stack}));break;case"typecheck":console.warn(new vb(`Type mismatch, got ${e} expected ${Array.isArray(i.expected)?i.expected.join(" | "):i.expected}.`,i.classdata));break;case"mutation_data_missing":console.warn(new fb(`Mutation data required for processing MusicMultiSelectMenuItems, but none found.\nThis is a bug, please report it at ${mb.shim.info.bugs_url}`));break;case"mutation_data_invalid":console.warn(new fb(`Mutation data missing or invalid for ${i.failed} out of ${i.total} MusicMultiSelectMenuItems. The titles of the failed items are: ${i.titles.join(", ")}.\nThis is a bug, please report it at ${mb.shim.info.bugs_url}`));break;case"class_not_found":console.warn(new fb(`${e} not found!\nThis is a bug, want to help us fix it? Follow the instructions at ${mb.shim.info.repo_url}/blob/main/docs/updating-the-parser.md or report it at ${mb.shim.info.bugs_url}!\nIntrospected and JIT generated this class in the meantime:\n${mv(e,i.key_info)}`));break;case"class_changed":console.warn(`${e} changed!\nThe following keys where altered: ${i.changed_keys.map((([t])=>rv(t))).join(", ")}\nThe class has changed to:\n${mv(e,i.key_info)}`);break;default:console.warn("Unreachable code reached at ParserErrorHandler")}};function Bv(t){Lv=t}function Vv(){Nv=null}function Uv(){Nv=new w}function jv(){if(!Nv)throw new Error("Parser#getMemo() called before Parser#createMemo()");return Nv}function Wv(t){return Pv.has(t)}function Fv(t){return(t.charAt(0).toUpperCase()+t.slice(1)).replace(/Renderer|Model/g,"").replace(/Radio/g,"Mix").trim()}function Hv(t){const e=Ov.get(t);if(!e){const e=new Error(`Module not found: ${t}`);throw e.code="MODULE_NOT_FOUND",e}return e}function $v(t){return Ov.has(t)}function Gv(t,e){Ov.set(t,e),Dv.set(t,e)}function Yv(){return Object.fromEntries(Dv)}function Kv(t){var e,i;const s={};Uv();const n=Xv(t.contents),o=jv();n&&(s.contents=n,s.contents_memo=o),Vv(),Uv();const a=t.onResponseReceivedActions?Zv(t.onResponseReceivedActions):null,r=jv();a&&(s.on_response_received_actions=a,s.on_response_received_actions_memo=r),Vv(),Uv();const l=t.onResponseReceivedEndpoints?Zv(t.onResponseReceivedEndpoints):null,c=jv();l&&(s.on_response_received_endpoints=l,s.on_response_received_endpoints_memo=c),Vv(),Uv();const h=t.onResponseReceivedCommands?Zv(t.onResponseReceivedCommands):null,d=jv();h&&(s.on_response_received_commands=h,s.on_response_received_commands_memo=d),Vv(),Uv();const u=t.continuationContents?Jv(t.continuationContents):null,p=jv();u&&(s.continuation_contents=u,s.continuation_contents_memo=p),Vv(),Uv();const m=t.actions?ty(t.actions):null,f=jv();m&&(s.actions=m,s.actions_memo=f),Vv(),Uv();const v=t.liveChatItemContextMenuSupportedRenderers?qv(t.liveChatItemContextMenuSupportedRenderers):null,y=jv();v&&(s.live_chat_item_context_menu_supported_renderers=v,s.live_chat_item_context_menu_supported_renderers_memo=y),Vv(),Uv();const g=t.header?Xv(t.header):null,_=jv();g&&(s.header=g,s.header_memo=_),Vv(),Uv();const b=t.sidebar?qv(t.sidebar):null,w=jv();b&&(s.sidebar=b,s.sidebar_memo=w),Vv(),Uv();const x=Xv(t.items);x&&(s.items=x,s.items_memo=jv()),Vv(),iy(o,null===(i=null===(e=t.frameworkUpdates)||void 0===e?void 0:e.entityBatchUpdate)||void 0===i?void 0:i.mutations);const S=t.continuation?Qv(t.continuation):null;S&&(s.continuation=S);const T=Xv(t.metadata);T&&(s.metadata=T);const C=qv(t.microformat);C&&(s.microformat=C);const I=qv(t.overlay);I&&(s.overlay=I);const E=zv(t.alerts,[nt,at]);E.length&&(s.alerts=E);const R=t.refinements;R&&(s.refinements=R);const A=t.estimatedResults?parseInt(t.estimatedResults):null;A&&(s.estimated_results=A);const M=Xv(t.playerOverlays);M&&(s.player_overlays=M);const P=t.playbackTracking?{videostats_watchtime_url:t.playbackTracking.videostatsWatchtimeUrl.baseUrl,videostats_playback_url:t.playbackTracking.videostatsPlaybackUrl.baseUrl}:null;P&&(s.playback_tracking=P);const O=t.playabilityStatus?{status:t.playabilityStatus.status,reason:t.playabilityStatus.reason||"",embeddable:!!t.playabilityStatus.playableInEmbed||!1,audio_only_playablility:qv(t.playabilityStatus.audioOnlyPlayability,k),error_screen:qv(t.playabilityStatus.errorScreen)}:null;if(O&&(s.playability_status=O),t.streamingData){const e=new Map,i={expires:new Date(Date.now()+1e3*parseInt(t.streamingData.expiresInSeconds)),formats:ey(t.streamingData.formats,e),adaptive_formats:ey(t.streamingData.adaptiveFormats,e),dash_manifest_url:t.streamingData.dashManifestUrl||null,hls_manifest_url:t.streamingData.hlsManifestUrl||null};s.streaming_data=i}const D=t.currentVideoEndpoint?new U(t.currentVideoEndpoint):null;D&&(s.current_video_endpoint=D);const N=t.endpoint?new U(t.endpoint):null;N&&(s.endpoint=N);const L=qv(t.captions,J);L&&(s.captions=L);const B=t.videoDetails?new we(t.videoDetails):null;B&&(s.video_details=B);const V=zv(t.annotations,X);V.length&&(s.annotations=V);const j=qv(t.storyboards,[it,tt]);j&&(s.storyboards=j);const W=qv(t.endscreen,q);W&&(s.endscreen=W);const F=qv(t.cards,Y);F&&(s.cards=F);const H=zv(t.engagementPanels,ve);return H.length&&(s.engagement_panels=H),s}function qv(t,e){if(!t)return null;const i=Object.keys(t);if(!i.length)return null;const s=Fv(i[0]);if(!Wv(s))try{const n=$v(s)?Hv(s):pv(s,t[i[0]],Lv);if(e)if(Array.isArray(e)){if(!e.some((t=>t.type===n.type)))return Lv({classdata:t[i[0]],classname:s,error_type:"typecheck",expected:e.map((t=>t.type))}),null}else if(n.type!==e.type)return Lv({classdata:t[i[0]],classname:s,error_type:"typecheck",expected:e.type}),null;const o=new n(t[i[0]]);return function(t,e){if(!Nv)return;const i=Nv.get(t);if(!i)return Nv.set(t,[e]);i.push(e)}(s,o),o}catch(e){return Lv({classname:s,classdata:t[i[0]],error:e,error_type:"parse"}),null}return null}function zv(t,e){if(Array.isArray(t)){const i=[];for(const s of t){const t=qv(s,e);t&&i.push(t)}return b(i)}if(!t)return b([]);throw new vb("Expected array but got a single item")}function Xv(t,e,i){if(!t)return null;if(Array.isArray(t)){const s=[];for(const e of t){const t=qv(e,i);t&&s.push(t)}const n=b(s);return e?n:new _(n)}if(e)throw new vb("Expected array but got a single item");return new _(qv(t,i))}function Qv(t){return t.timedContinuationData?new Av({continuation:t.timedContinuationData,type:"timed"}):null}function Jv(t){return t.itemSectionContinuation?new wv(t.itemSectionContinuation):t.sectionListContinuation?new Cv(t.sectionListContinuation):t.liveChatContinuation?new Mv(t.liveChatContinuation):t.musicPlaylistShelfContinuation?new Iv(t.musicPlaylistShelfContinuation):t.musicShelfContinuation?new kv(t.musicShelfContinuation):t.gridContinuation?new Ev(t.gridContinuation):t.playlistPanelContinuation?new Rv(t.playlistPanelContinuation):null}function Zv(t){return b(t.map((t=>t.navigateAction?new xv(t.navigateAction):t.showMiniplayerCommand?new Sv(t.showMiniplayerCommand):t.reloadContinuationItemsCommand?new Tv(t.reloadContinuationItemsCommand):t.appendContinuationItemsAction?new Pe(t.appendContinuationItemsAction):void 0)).filter((t=>t)))}function ty(t){return Array.isArray(t)?Xv(t.map((t=>(delete t.clickTrackingParams,t)))):new _(qv(t))}function ey(t,e){return(null==t?void 0:t.map((t=>new be(t,e))))||[]}function iy(t,e){const i=t.getType(ge);if(i.length>0&&!e)Lv({error_type:"mutation_data_missing",classname:"MusicMultiSelectMenuItem"});else{const t=[];for(const s of i){const i=e.find((t=>{var e,i;return(null===(i=null===(e=t.payload)||void 0===e?void 0:e.musicFormBooleanChoice)||void 0===i?void 0:i.id)===s.form_item_entity_key})),n=null==i?void 0:i.payload.musicFormBooleanChoice;void 0!==(null==n?void 0:n.selected)&&(null==n?void 0:n.opaqueToken)?s.selected=n.selected:t.push(`'${s.title}'`)}t.length>0&&Lv({error_type:"mutation_data_invalid",classname:"MusicMultiSelectMenuItem",total:i.length,failed:t.length,titles:t})}}var sy;sy=new WeakMap;const ny=class{constructor(t){if(sy.set(this,void 0),f(this,sy,lb.parseResponse(t.data),"f"),!m(this,sy,"f").contents)throw new fb("Page contents not found");const e=m(this,sy,"f").contents.array().as(Ae).first();if(!e)throw new fb("Account section list not found");this.contents=e.contents,this.footers=e.footers}get page(){return m(this,sy,"f")}};var oy;oy=new WeakMap;const ay=class{constructor(t){var e;oy.set(this,void 0),f(this,oy,lb.parseResponse(t.data),"f"),this.sections=null===(e=m(this,oy,"f").contents_memo)||void 0===e?void 0:e.getType(xa).map((t=>t.model)).flatMap((t=>t||[]))}get page(){return m(this,oy,"f")}};var ry,ly,cy,hy,dy,uy;class py{constructor(t,e,i=!1){ry.add(this),ly.set(this,void 0),cy.set(this,void 0),hy.set(this,void 0),dy.set(this,void 0),m(this,ry,"m",uy).call(this,e)||i?f(this,ly,e,"f"):f(this,ly,lb.parseResponse(e.data),"f");const s=function(...t){const e=new w;for(const i of t)if(i)for(const t of i)e.set(...t);return e}(m(this,ly,"f").contents_memo,m(this,ly,"f").continuation_contents_memo,m(this,ly,"f").on_response_received_commands_memo,m(this,ly,"f").on_response_received_endpoints_memo,m(this,ly,"f").on_response_received_actions_memo,m(this,ly,"f").sidebar_memo,m(this,ly,"f").header_memo);if(!s)throw new fb("No memo found in feed");f(this,dy,s,"f"),f(this,hy,t,"f")}static getVideosFromMemo(t){return t.getType(Vt,mr,cp,ie,Bu,Nd,Ff)}static getPlaylistsFromMemo(t){return t.getType(Bo,ar)}get videos(){return py.getVideosFromMemo(m(this,dy,"f"))}get posts(){return m(this,dy,"f").getType(Ti,Hu,sm)}get channels(){return m(this,dy,"f").getType(Qi,Ja)}get playlists(){return py.getPlaylistsFromMemo(m(this,dy,"f"))}get memo(){return m(this,dy,"f")}get page_contents(){var t;const e=null===(t=m(this,dy,"f").getType(ym))||void 0===t?void 0:t.first().content,i=m(this,dy,"f").getType(Tv).first(),s=m(this,dy,"f").getType(Pe).first();return e||i||s}get shelves(){return m(this,dy,"f").getType(om,kp,dp)}getShelf(t){return this.shelves.get({title:t})}get secondary_contents(){var t,e;if(!(null===(t=m(this,ly,"f").contents)||void 0===t?void 0:t.is_node))return;const i=null===(e=m(this,ly,"f").contents)||void 0===e?void 0:e.item();return i.is(gf,bf)?i.secondary_contents:void 0}get actions(){return m(this,hy,"f")}get page(){return m(this,ly,"f")}get has_continuation(){return(m(this,dy,"f").get("ContinuationItem")||[]).length>0}getContinuationData(){return d(this,void 0,void 0,(function*(){if(m(this,cy,"f")){if(0===m(this,cy,"f").length)throw new fb("There are no continuations.");return yield m(this,cy,"f")[0].endpoint.call(m(this,hy,"f"),{parse:!0})}if(f(this,cy,m(this,dy,"f").getType(lt),"f"),m(this,cy,"f"))return this.getContinuationData()}))}getContinuation(){return d(this,void 0,void 0,(function*(){const t=yield this.getContinuationData();if(!t)throw new fb("Could not get continuation data");return new py(this.actions,t,!0)}))}}ly=new WeakMap,cy=new WeakMap,hy=new WeakMap,dy=new WeakMap,ry=new WeakSet,uy=function(t){return!("data"in t)};const my=py;var fy,vy;class yy extends my{constructor(t,e,i=!1){var s;super(t,e,i),fy.set(this,void 0),vy.set(this,void 0),f(this,vy,t,"f"),f(this,fy,null===(s=this.page.contents_memo)||void 0===s?void 0:s.getType(ym),"f")}get tabs(){var t,e;return null!==(e=null===(t=m(this,fy,"f"))||void 0===t?void 0:t.map((t=>t.title.toString())))&&void 0!==e?e:[]}getTabByName(t){var e;return d(this,void 0,void 0,(function*(){const i=null===(e=m(this,fy,"f"))||void 0===e?void 0:e.find((e=>e.title.toLowerCase()===t.toLowerCase()));if(!i)throw new fb(`Tab "${t}" not found`);if(i.selected)return this;const s=yield i.endpoint.call(m(this,vy,"f"));return new yy(m(this,vy,"f"),s,!1)}))}getTabByURL(t){var e;return d(this,void 0,void 0,(function*(){const i=null===(e=m(this,fy,"f"))||void 0===e?void 0:e.find((e=>{var i;return(null===(i=e.endpoint.metadata.url)||void 0===i?void 0:i.split("/").pop())===t}));if(!i)throw new fb(`Tab "${t}" not found`);if(i.selected)return this;const s=yield i.endpoint.call(m(this,vy,"f"));return new yy(m(this,vy,"f"),s,!1)}))}hasTabWithURL(t){var e,i;return null!==(i=null===(e=m(this,fy,"f"))||void 0===e?void 0:e.some((e=>{var i;return(null===(i=e.endpoint.metadata.url)||void 0===i?void 0:i.split("/").pop())===t})))&&void 0!==i&&i}get title(){var t,e,i;return null===(i=null===(e=null===(t=this.page.contents_memo)||void 0===t?void 0:t.getType(ym))||void 0===e?void 0:e.find((t=>t.selected)))||void 0===i?void 0:i.title.toString()}}fy=new WeakMap,vy=new WeakMap;const gy=yy;var _y;_y=new WeakMap;const by=class extends my{constructor(t,e,i=!1){super(t,e,i),_y.set(this,void 0)}get filter_chips(){var t,e;if(m(this,_y,"f"))return m(this,_y,"f")||[];if((null===(t=this.memo.getType($a))||void 0===t?void 0:t.length)>1)throw new fb("There are too many feed filter chipbars, you'll need to find the correct one yourself in this.page");if(0===(null===(e=this.memo.getType($a))||void 0===e?void 0:e.length))throw new fb("There are no feed filter chipbars");return f(this,_y,this.memo.getType(ws),"f"),m(this,_y,"f")||[]}get filters(){return this.filter_chips.map((t=>t.text.toString()))||[]}getFilteredFeed(t){var e;return d(this,void 0,void 0,(function*(){let i;if("string"==typeof t){if(!this.filters.includes(t))throw new fb("Filter not found",{available_filters:this.filters});i=this.filter_chips.find((e=>e.text.toString()===t))}else{if("ChipCloudChip"!==t.type)throw new fb("Invalid filter");i=t}if(!i)throw new fb("Filter not found");if(i.is_selected)return this;const s=yield null===(e=i.endpoint)||void 0===e?void 0:e.call(this.actions,{parse:!0});if(!s)throw new fb("Failed to get filtered feed");return new my(this.actions,s,!0)}))}};class wy extends gy{constructor(t,e,i=!1){var s,n,o,a,r,l;super(t,e,i),this.header=null===(n=null===(s=this.page.header)||void 0===s?void 0:s.item())||void 0===n?void 0:n.as(Wi,Ki,Qr,ou);const c=null===(o=this.page.metadata)||void 0===o?void 0:o.item().as(os),h=null===(a=this.page.microformat)||void 0===a?void 0:a.as(xh);if(this.page.alerts){const t=this.page.alerts.first();if("ERROR"===(null==t?void 0:t.alert_type))throw new wb(t.text.toString())}if(!c&&!this.page.contents)throw new fb("Invalid channel",this);this.metadata=Object.assign(Object.assign({},c),h||{}),this.subscribe_button=null===(r=this.page.header_memo)||void 0===r?void 0:r.getType(Ui).first(),this.current_tab=null===(l=this.page.contents)||void 0===l?void 0:l.item().as(gf).tabs.array().filterType(ym,Va).get({selected:!0})}applyFilter(t){var e;return d(this,void 0,void 0,(function*(){let i;const s=this.memo.getType($a).first();if("string"==typeof t){if(i=null==s?void 0:s.contents.get({text:t}),!i)throw new fb(`Filter ${t} not found`,{available_filters:this.filters})}else t instanceof ws&&(i=t);if(!i)throw new fb("Invalid filter",t);const n=yield null===(e=i.endpoint)||void 0===e?void 0:e.call(this.actions,{parse:!0});if(!n)throw new fb("No page returned",{filter:i});return new Sy(this.actions,n,!0)}))}applySort(t){var e,i;return d(this,void 0,void 0,(function*(){const s=this.memo.getType(De).first();if(!s)throw new fb("No sort filter sub menu found");const n=null===(e=null==s?void 0:s.sub_menu_items)||void 0===e?void 0:e.find((e=>e.title===t));if(!n)throw new fb(`Sort filter ${t} not found`,{available_sort_filters:this.sort_filters});if(n.selected)return this;const o=yield null===(i=n.endpoint)||void 0===i?void 0:i.call(this.actions,{parse:!0});return new wy(this.actions,o,!0)}))}applyContentTypeFilter(t){var e,i,s,n;return d(this,void 0,void 0,(function*(){const o=null===(s=null===(i=null===(e=this.current_tab)||void 0===e?void 0:e.content)||void 0===i?void 0:i.as(xt).sub_menu)||void 0===s?void 0:s.as(ds);if(!o)throw new fb("Sub menu not found");const a=o.content_type_sub_menu_items.find((e=>e.title===t));if(!a)throw new fb(`Sub menu item ${t} not found`,{available_filters:this.content_type_filters});if(a.selected)return this;const r=yield null===(n=a.endpoint)||void 0===n?void 0:n.call(this.actions,{parse:!0});return new wy(this.actions,r,!0)}))}get filters(){var t,e;return(null===(e=null===(t=this.memo.getType($a))||void 0===t?void 0:t[0])||void 0===e?void 0:e.contents.filterType(ws).map((t=>t.text)))||[]}get sort_filters(){var t;const e=this.memo.getType(De).first();return(null===(t=null==e?void 0:e.sub_menu_items)||void 0===t?void 0:t.map((t=>t.title)))||[]}get content_type_filters(){var t,e,i;const s=null===(i=null===(e=null===(t=this.current_tab)||void 0===t?void 0:t.content)||void 0===e?void 0:e.as(xt).sub_menu)||void 0===i?void 0:i.as(ds);return(null==s?void 0:s.content_type_sub_menu_items.map((t=>t.title)))||[]}getHome(){return d(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("featured");return new wy(this.actions,t.page,!0)}))}getVideos(){return d(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("videos");return new wy(this.actions,t.page,!0)}))}getShorts(){return d(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("shorts");return new wy(this.actions,t.page,!0)}))}getLiveStreams(){return d(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("streams");return new wy(this.actions,t.page,!0)}))}getReleases(){return d(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("releases");return new wy(this.actions,t.page,!0)}))}getPodcasts(){return d(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("podcasts");return new wy(this.actions,t.page,!0)}))}getPlaylists(){return d(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("playlists");return new wy(this.actions,t.page,!0)}))}getCommunity(){return d(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("community");return new wy(this.actions,t.page,!0)}))}getChannels(){return d(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("channels");return new wy(this.actions,t.page,!0)}))}getAbout(){var t;return d(this,void 0,void 0,(function*(){const e=yield this.getTabByURL("about");return null===(t=e.memo.getType(Zi))||void 0===t?void 0:t[0]}))}search(t){var e,i;return d(this,void 0,void 0,(function*(){const s=null===(e=this.memo.getType(Va))||void 0===e?void 0:e[0];if(!s)throw new fb("Search tab not found",this);const n=yield null===(i=s.endpoint)||void 0===i?void 0:i.call(this.actions,{query:t,parse:!0});return new wy(this.actions,n,!0)}))}get has_home(){return this.hasTabWithURL("featured")}get has_videos(){return this.hasTabWithURL("videos")}get has_shorts(){return this.hasTabWithURL("shorts")}get has_live_streams(){return this.hasTabWithURL("streams")}get has_releases(){return this.hasTabWithURL("releases")}get has_podcasts(){return this.hasTabWithURL("podcasts")}get has_playlists(){return this.hasTabWithURL("playlists")}get has_community(){return this.hasTabWithURL("community")}get has_channels(){return this.hasTabWithURL("channels")}get has_about(){return this.hasTabWithURL("about")}get has_search(){var t;return(null===(t=this.memo.getType(Va))||void 0===t?void 0:t.length)>0}getContinuation(){const t=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return d(this,void 0,void 0,(function*(){const e=yield t.getContinuationData.call(this);if(!e)throw new fb("Could not get continuation data");return new xy(this.actions,e,!0)}))}}class xy extends my{constructor(t,e,i=!1){var s,n;super(t,e,i),this.contents=(null===(s=this.page.on_response_received_actions)||void 0===s?void 0:s.first())||(null===(n=this.page.on_response_received_endpoints)||void 0===n?void 0:n.first())}getContinuation(){const t=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return d(this,void 0,void 0,(function*(){const e=yield t.getContinuationData.call(this);if(!e)throw new fb("Could not get continuation data");return new xy(this.actions,e,!0)}))}}class Sy extends by{constructor(t,e,i=!1){super(t,e,i),this.applied_filter=this.memo.getType(ws).get({is_selected:!0}),this.page.on_response_received_actions&&this.page.on_response_received_actions.length>1&&this.page.on_response_received_actions.shift(),this.contents=this.page.on_response_received_actions.first()}applyFilter(t){const e=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return d(this,void 0,void 0,(function*(){const i=yield e.getFilteredFeed.call(this,t);return new Sy(this.actions,i.page,!0)}))}getContinuation(){const t=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return d(this,void 0,void 0,(function*(){const e=yield t.getContinuationData.call(this);if(!(null==e?void 0:e.on_response_received_actions_memo))throw new fb("Unexpected continuation data",e);return e.on_response_received_actions_memo.set("FeedFilterChipBar",this.memo.getType($a)),e.on_response_received_actions_memo.set("ChipCloudChip",this.memo.getType(ws)),new Sy(this.actions,e,!0)}))}}var Ty,Cy,Iy;class ky{constructor(t,e,i=!1){var s,n,o;Ty.set(this,void 0),Cy.set(this,void 0),Iy.set(this,void 0),f(this,Ty,i?e:lb.parseResponse(e),"f"),f(this,Cy,t,"f");const a=m(this,Ty,"f").on_response_received_endpoints;if(!a)throw new fb("Comments page did not have any content.");const r=a.at(0),l=a.at(1);this.header=null===(s=null==r?void 0:r.contents)||void 0===s?void 0:s.firstOfType(wo);const c=(null===(n=null==l?void 0:l.contents)||void 0===n?void 0:n.filterType(ko))||[];this.contents=b(c.map((t=>{var e;return null===(e=t.comment)||void 0===e||e.setActions(m(this,Cy,"f")),t.setActions(m(this,Cy,"f")),t}))),f(this,Iy,null===(o=null==l?void 0:l.contents)||void 0===o?void 0:o.firstOfType(lt),"f")}applySort(t){var e,i,s,n;return d(this,void 0,void 0,(function*(){if(!this.header)throw new fb("Page header is missing. Cannot apply sort option.");let o;if("TOP_COMMENTS"===t?o=null===(i=null===(e=this.header.sort_menu)||void 0===e?void 0:e.sub_menu_items)||void 0===i?void 0:i.at(0):"NEWEST_FIRST"===t&&(o=null===(n=null===(s=this.header.sort_menu)||void 0===s?void 0:s.sub_menu_items)||void 0===n?void 0:n.at(1)),!o)throw new fb("Could not find target button.");if(o.selected)return this;const a=yield o.endpoint.call(m(this,Cy,"f"),{parse:!0});return new ky(m(this,Cy,"f"),a,!0)}))}createComment(t){var e;return d(this,void 0,void 0,(function*(){if(!this.header)throw new fb("Page header is missing. Cannot create comment.");const i=null===(e=this.header.create_renderer)||void 0===e?void 0:e.as(So).submit_button;if(!i)throw new fb("Could not find target button. You are probably not logged in.");if(!i.endpoint)throw new fb("Button does not have an endpoint.");return yield i.endpoint.call(m(this,Cy,"f"),{commentText:t})}))}getContinuation(){return d(this,void 0,void 0,(function*(){if(!m(this,Iy,"f"))throw new fb("Continuation not found");const t=yield m(this,Iy,"f").endpoint.call(m(this,Cy,"f"),{parse:!0}),e=Object.assign({},m(this,Ty,"f"));if(!e.on_response_received_endpoints||!t.on_response_received_endpoints)throw new fb("Invalid reponse format, missing on_response_received_endpoints.");return e.on_response_received_endpoints.pop(),e.on_response_received_endpoints.push(t.on_response_received_endpoints[0]),new ky(m(this,Cy,"f"),e,!0)}))}get has_continuation(){return!!m(this,Iy,"f")}get page(){return m(this,Ty,"f")}}Ty=new WeakMap,Cy=new WeakMap,Iy=new WeakMap;const Ey=ky;var Ry;Ry=new WeakMap;const Ay=class{constructor(t){Ry.set(this,void 0),f(this,Ry,Kv(t),"f"),this.contents=m(this,Ry,"f").items.array().as(Tr,Ir)}get page(){return m(this,Ry,"f")}};class My extends my{constructor(t,e,i=!1){super(t,e,i),this.sections=this.memo.getType(ol),this.feed_actions=this.memo.getType(Ei).first()}getContinuation(){return d(this,void 0,void 0,(function*(){const t=yield this.getContinuationData();if(!t)throw new Error("No continuation data found");return new My(this.actions,t,!0)}))}}const Py=My;class Oy extends by{constructor(t,e,i=!1){super(t,e,i),this.header=this.memo.getType(Ya).first(),this.contents=this.memo.getType(fp).first()||this.page.on_response_received_actions.first()}applyFilter(t){const e=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return d(this,void 0,void 0,(function*(){const i=yield e.getFilteredFeed.call(this,t);return new Oy(this.actions,i.page,!0)}))}getContinuation(){const t=Object.create(null,{getContinuation:{get:()=>super.getContinuation}});var e;return d(this,void 0,void 0,(function*(){const i=yield t.getContinuation.call(this);return i.page.header=this.page.header,null===(e=i.page.header_memo)||void 0===e||e.set(this.header.type,[this.header]),new Oy(this.actions,i.page,!0)}))}}class Dy extends by{constructor(t,e){if(super(t,e),!this.page.contents_memo)throw new fb("Unexpected response",this.page);const i=this.page.contents_memo.getType(ym).first();if(!i.content)throw new fb("Content tab has no content",i);this.page.header&&(this.header=this.page.header.item().as(Er,ou)),this.contents=i.content.as(fp)}applyFilter(t){const e=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return d(this,void 0,void 0,(function*(){const i=yield e.getFilteredFeed.call(this,t);return new Dy(this.actions,i.page)}))}}var Ny,Ly,By;Ny=new WeakMap,Ly=new WeakMap,By=new WeakMap;const Vy=class{constructor(t,e){Ny.set(this,void 0),Ly.set(this,void 0),By.set(this,void 0),f(this,Ny,t,"f"),f(this,Ly,e,"f");const i=null==t?void 0:t.live_chat_item_context_menu_supported_renderers;if(!i||!i.is(ut))throw new fb('Response did not have a "live_chat_item_context_menu_supported_renderers" property. The call may have failed.');f(this,By,i.as(ut).items,"f")}selectItem(t){return d(this,void 0,void 0,(function*(){let e;if(t instanceof R){if(!t.endpoint)throw new fb("Item does not have an endpoint.");e=t.endpoint}else{const i=m(this,By,"f").find((e=>!!e.is(qc)&&e.as(qc).icon_type===t));if(!i||!i.is(qc))throw new fb(`Button "${t}" not found.`);e=i.endpoint}if(!e)throw new fb("Target button does not have an endpoint.");return yield e.call(m(this,Ly,"f"),{parse:!0})}))}items(){return m(this,By,"f")}page(){return m(this,Ny,"f")}};var Uy,jy;class Wy extends my{constructor(t,e,i=!1){var s,n,o,a,r;super(t,e,i),Uy.add(this);const l=this.memo.getType(Cu).first(),c=this.memo.getType(Ou).first(),h=this.memo.getType(Nu).first(),d=null===(s=this.page.alerts)||void 0===s?void 0:s.firstOfType(nt);if(d&&"ERROR"===d.alert_type)throw new fb(d.text.toString(),d);if(!c&&!h&&0===Object.keys(this.page).length)throw new fb("Got empty continuation response. This is likely the end of the playlist.");this.info=Object.assign(Object.assign({},null===(n=this.page.metadata)||void 0===n?void 0:n.item().as(Ru)),{subtitle:l?l.subtitle:null,author:null!==(a=null===(o=null==h?void 0:h.owner)||void 0===o?void 0:o.as(Lf).author)&&void 0!==a?a:null==l?void 0:l.author,thumbnails:null===(r=null==c?void 0:c.thumbnail_renderer)||void 0===r?void 0:r.as(No,Oo).thumbnail,total_items:m(this,Uy,"m",jy).call(this,0,c),views:m(this,Uy,"m",jy).call(this,1,c),last_updated:m(this,Uy,"m",jy).call(this,2,c),can_share:null==l?void 0:l.can_share,can_delete:null==l?void 0:l.can_delete,is_editable:null==l?void 0:l.is_editable,privacy:null==l?void 0:l.privacy}),this.menu=null==c?void 0:c.menu,this.endpoint=null==c?void 0:c.endpoint,this.messages=this.memo.getType(Qo)}get items(){return this.videos}getContinuation(){return d(this,void 0,void 0,(function*(){const t=yield this.getContinuationData();if(!t)throw new fb("Could not get continuation data");return new Wy(this.actions,t,!0)}))}}Uy=new WeakSet,jy=function(t,e){var i;return e&&e.stats&&(null===(i=e.stats[t])||void 0===i?void 0:i.toString())||"N/A"};const Fy=Wy;var Hy,$y;Hy=new WeakSet,$y=function(t){var e;return d(this,void 0,void 0,(function*(){if(!(null===(e=t.menu)||void 0===e?void 0:e.as(ut).hasKey("top_level_buttons")))throw new fb(`The ${t.title.text} shelf doesn't have more items`);const i=t.menu.as(ut).top_level_buttons.firstOfType(R);if(!i)throw new fb("Did not find target button.");const s=yield i.as(R).endpoint.call(this.actions,{parse:!0});switch(t.icon_type){case"LIKE":case"WATCH_LATER":return new Fy(this.actions,s,!0);case"WATCH_HISTORY":return new Py(this.actions,s,!0);case"CONTENT_CUT":return new my(this.actions,s,!0);default:throw new fb("Target shelf not implemented.")}}))};const Gy=class extends my{constructor(t,e){if(super(t,e),Hy.add(this),!this.page.contents_memo)throw new fb("Page contents not found");const i=this.page.contents_memo.getType(Zu).first(),s=this.page.contents_memo.getType(sp).first();this.profile={stats:i,user_info:s};const n=this.page.contents_memo.getType(om);this.sections=n.map((t=>{var e;return{type:t.icon_type,title:t.title,contents:(null===(e=t.content)||void 0===e?void 0:e.key("items").array())||[],getAll:()=>m(this,Hy,"m",$y).call(this,t)}}))}get history(){return this.sections.find((t=>"WATCH_HISTORY"===t.type))}get watch_later(){return this.sections.find((t=>"WATCH_LATER"===t.type))}get liked_videos(){return this.sections.find((t=>"LIKE"===t.type))}get playlists_section(){return this.sections.find((t=>"PLAYLISTS"===t.type))}get clips(){return this.sections.find((t=>"CONTENT_CUT"===t.type))}};var Yy;class Ky extends EventTarget{constructor(){super(),Yy.set(this,new Map)}emit(t,...e){const i=new mb.shim.CustomEvent(t,{detail:e});this.dispatchEvent(i)}on(t,e){const i=t=>{t instanceof mb.shim.CustomEvent?e(...t.detail):e(t)};m(this,Yy,"f").set(e,i),this.addEventListener(t,i)}once(t,e){const i=i=>{i instanceof mb.shim.CustomEvent?e(...i.detail):e(i),this.off(t,e)};m(this,Yy,"f").set(e,i),this.addEventListener(t,i)}off(t,e){const i=m(this,Yy,"f").get(e);i&&(this.removeEventListener(t,i),m(this,Yy,"f").delete(e))}}Yy=new WeakMap;const qy=Ky;var zy,Xy,Qy,Jy,Zy,tg;class eg{constructor(){this.front=[],this.back=[]}isEmpty(){return!this.front.length&&!this.back.length}clear(){this.front=[],this.back=[]}getValues(){return this.front.concat(this.back.reverse())}}zy=new WeakMap,Xy=new WeakMap,Qy=new WeakMap,Jy=new WeakMap,Zy=new WeakMap,tg=new WeakMap;const ig=class{constructor(){zy.set(this,void 0),Xy.set(this,void 0),Qy.set(this,void 0),Jy.set(this,void 0),Zy.set(this,void 0),tg.set(this,void 0),f(this,zy,null,"f"),f(this,Xy,null,"f"),f(this,Qy,null,"f"),f(this,Jy,[],"f"),f(this,Zy,null,"f"),f(this,tg,new eg,"f")}enqueueActionGroup(t){if(null!==m(this,zy,"f")){const t=Date.now()-m(this,zy,"f");m(this,tg,"f").back.push(t),5<m(this,tg,"f").front.length+m(this,tg,"f").back.length&&(m(this,tg,"f").front.length||(m(this,tg,"f").front=m(this,tg,"f").back,m(this,tg,"f").front.reverse(),m(this,tg,"f").back=[]),m(this,tg,"f").front.pop()),f(this,Xy,Math.max(...m(this,tg,"f").getValues()),"f")}f(this,zy,Date.now(),"f"),m(this,Jy,"f").push(t),null===m(this,Zy,"f")&&f(this,Zy,setTimeout(this.emitSmoothedActions.bind(this)),"f")}emitSmoothedActions(){if(f(this,Zy,null,"f"),m(this,Jy,"f").length){let t=1e4;null!==m(this,Xy,"f")&&null!==m(this,zy,"f")&&(t=m(this,Xy,"f")-Date.now()+m(this,zy,"f")),t=m(this,Jy,"f").length<t/80?1:Math.ceil(m(this,Jy,"f").length/(t/80));const e=function(t){const e=[];for(const i of t)if(Array.isArray(i))for(const t of i)e.push(t);else e.push(i);return e}(m(this,Jy,"f").splice(0,t));m(this,Qy,"f")&&m(this,Qy,"f").call(this,e),null!==m(this,Jy,"f")&&(1==t?(t=m(this,Xy,"f")/m(this,Jy,"f").length,t*=Math.random()+.5,t=Math.min(1e3,t),t=Math.max(80,t)):t=80,f(this,Zy,setTimeout(this.emitSmoothedActions.bind(this),t),"f"))}}clear(){null!==m(this,Zy,"f")&&(clearTimeout(m(this,Zy,"f")),f(this,Zy,null,"f")),f(this,Jy,[],"f")}set callback(t){f(this,Qy,t,"f")}get callback(){return m(this,Qy,"f")}get action_queue(){return m(this,Jy,"f")}get estimated_update_interval(){return m(this,Xy,"f")}get last_update_time(){return m(this,zy,"f")}get next_update_id(){return m(this,Zy,"f")}get poll_response_delay_queue(){return m(this,tg,"f")}};var sg,ng,og,ag,rg,lg,cg,hg,dg,ug,pg;ng=new WeakMap,og=new WeakMap,ag=new WeakMap,rg=new WeakMap,lg=new WeakMap,cg=new WeakMap,sg=new WeakSet,hg=function t(){(()=>{d(this,void 0,void 0,(function*(){var e,i;try{const e=yield m(this,ng,"f").execute(this.is_replay?"live_chat/get_live_chat_replay":"live_chat/get_live_chat",{continuation:m(this,rg,"f"),parse:!0}),i=e.continuation_contents;if(i||(this.emit("error",new fb("Unexpected live chat incremental continuation response",e)),this.emit("end"),this.stop()),!(i instanceof Mv))return this.stop(),void this.emit("end");f(this,rg,i.continuation.token,"f"),i.header?(this.initial_info=i,this.emit("start",i),this.running&&m(this,sg,"m",t).call(this)):this.smoothed_queue.enqueueActionGroup(i.actions),f(this,cg,0,"f")}catch(s){this.emit("error",s),f(this,cg,(i=m(this,cg,"f"),e=i++,i),"f"),e<10?(yield m(this,sg,"m",pg).call(this,2e3),m(this,sg,"m",t).call(this)):(this.emit("error",new fb("Reached retry limit for incremental continuation requests",s)),this.emit("end"),this.stop())}}))})()},dg=function(t){return d(this,void 0,void 0,(function*(){let e=t.length<125?1:Math.ceil(t.length/125);const i=1==e?(e=1e4/t.length,e*=Math.random()+.5,e=Math.min(1e3,e),e=Math.max(80,e)):e=80;for(const e of t)yield m(this,sg,"m",pg).call(this,i),this.emit("chat-update",e)}))},ug=function t(){(()=>{d(this,void 0,void 0,(function*(){var e,i,s,n,o,a,r,l,c,h,d;try{const u={videoId:m(this,og,"f")};m(this,lg,"f")&&(u.continuation=m(this,lg,"f"));const p=yield m(this,ng,"f").execute("/updated_metadata",u),v=lb.parseResponse(p.data);f(this,lg,null===(e=v.continuation)||void 0===e?void 0:e.token,"f"),this.metadata={title:(null===(i=v.actions)||void 0===i?void 0:i.array().firstOfType(Ic))||(null===(s=this.metadata)||void 0===s?void 0:s.title),description:(null===(n=v.actions)||void 0===n?void 0:n.array().firstOfType(xc))||(null===(o=this.metadata)||void 0===o?void 0:o.description),views:(null===(a=v.actions)||void 0===a?void 0:a.array().firstOfType(Ac))||(null===(r=this.metadata)||void 0===r?void 0:r.views),likes:(null===(l=v.actions)||void 0===l?void 0:l.array().firstOfType(Ec))||(null===(c=this.metadata)||void 0===c?void 0:c.likes),date:(null===(h=v.actions)||void 0===h?void 0:h.array().firstOfType(bc))||(null===(d=this.metadata)||void 0===d?void 0:d.date)},this.emit("metadata-update",this.metadata),yield m(this,sg,"m",pg).call(this,5e3),this.running&&m(this,sg,"m",t).call(this)}catch(e){yield m(this,sg,"m",pg).call(this,2e3),this.running&&m(this,sg,"m",t).call(this)}}))})()},pg=function(t){return d(this,void 0,void 0,(function*(){return new Promise((e=>setTimeout((()=>e()),t)))}))};const mg=class extends qy{constructor(t){var e,i;super(),sg.add(this),ng.set(this,void 0),og.set(this,void 0),ag.set(this,void 0),rg.set(this,void 0),lg.set(this,void 0),cg.set(this,0),this.running=!1,this.is_replay=!1,f(this,og,t.basic_info.id,"f"),f(this,ag,t.basic_info.channel_id,"f"),f(this,ng,t.actions,"f"),f(this,rg,null===(e=t.livechat)||void 0===e?void 0:e.continuation,"f"),this.is_replay=(null===(i=t.livechat)||void 0===i?void 0:i.is_replay)||!1,this.smoothed_queue=new ig,this.smoothed_queue.callback=t=>d(this,void 0,void 0,(function*(){t.length?t.length<10?yield m(this,sg,"m",dg).call(this,t):this.is_replay?(m(this,sg,"m",dg).call(this,t),yield m(this,sg,"m",pg).call(this,2e3)):m(this,sg,"m",dg).call(this,t):yield m(this,sg,"m",pg).call(this,2e3),this.running&&m(this,sg,"m",hg).call(this)}))}on(t,e){super.on(t,e)}once(t,e){super.once(t,e)}start(){this.running||(this.running=!0,m(this,sg,"m",hg).call(this),m(this,sg,"m",ug).call(this))}stop(){this.smoothed_queue.clear(),this.running=!1}sendMessage(t){return d(this,void 0,void 0,(function*(){const e=yield m(this,ng,"f").execute("/live_chat/send_message",{params:Jn(m(this,ag,"f"),m(this,og,"f")),richMessage:{textSegments:[{text:t}]},clientMessageId:mb.shim.uuidv4(),client:"ANDROID",parse:!0});if(!e.actions)throw new fb("Unexpected response from send_message",e);return e.actions.array().as(yl)}))}applyFilter(t){var e,i,s,n,o,a,r;if(!this.initial_info)throw new fb("Cannot apply filter before initial info is retrieved.");const l=null===(s=null===(i=null===(e=this.initial_info)||void 0===e?void 0:e.header)||void 0===i?void 0:i.view_selector)||void 0===s?void 0:s.sub_menu_items;if("TOP_CHAT"===t){if(null===(n=null==l?void 0:l.at(0))||void 0===n?void 0:n.selected)return;f(this,rg,null===(o=null==l?void 0:l.at(0))||void 0===o?void 0:o.continuation,"f")}else{if(null===(a=null==l?void 0:l.at(1))||void 0===a?void 0:a.selected)return;f(this,rg,null===(r=null==l?void 0:l.at(1))||void 0===r?void 0:r.continuation,"f")}}getItemMenu(t){return d(this,void 0,void 0,(function*(){if(!t.hasKey("menu_endpoint")||!t.key("menu_endpoint").isInstanceof(U))throw new fb("This item does not have a menu.",t);const e=yield t.key("menu_endpoint").instanceof(U).call(m(this,ng,"f"),{parse:!0});if(!e)throw new fb("Could not retrieve item menu.",t);return new Vy(e,m(this,ng,"f"))}))}selectButton(t){return d(this,void 0,void 0,(function*(){return yield t.endpoint.call(m(this,ng,"f"),{parse:!0})}))}};var fg,vg;class yg{constructor(t,e){fg.set(this,void 0),vg.set(this,void 0),f(this,vg,t,"f"),f(this,fg,lb.parseResponse(e.data),"f"),this.header=m(this,fg,"f").actions_memo.getType(lh).first(),this.contents=m(this,fg,"f").actions_memo.getType(eu)}getContinuation(){return d(this,void 0,void 0,(function*(){const t=m(this,fg,"f").actions_memo.getType(lt).first();if(!t)throw new fb("Continuation not found");const e=yield t.endpoint.call(m(this,vg,"f"),{parse:!1});return new yg(m(this,vg,"f"),e)}))}get page(){return m(this,fg,"f")}}fg=new WeakMap,vg=new WeakMap;const gg=yg;class _g extends my{constructor(t,e,i=!1){var s,n,o,a,r,l;super(t,e,i);const c=(null===(s=this.page.contents_memo)||void 0===s?void 0:s.getType(xt).first().contents)||(null===(n=this.page.on_response_received_commands)||void 0===n?void 0:n.first().contents);if(!c)throw new fb("No contents found in search response");this.page.header&&(this.header=this.page.header.item().as(Bp)),this.results=null===(o=c.find((t=>t.is(ol)&&t.contents&&t.contents.length>0)))||void 0===o?void 0:o.as(ol).contents,this.refinements=this.page.refinements||[],this.estimated_results=this.page.estimated_results,this.sub_menu=null===(a=this.page.contents_memo)||void 0===a?void 0:a.getType(Up).first(),this.watch_card=null===(r=this.page.contents_memo)||void 0===r?void 0:r.getType(If).first(),this.refinement_cards=null===(l=this.results)||void 0===l?void 0:l.firstOfType(Ft)}selectRefinementCard(t){var e,i;return d(this,void 0,void 0,(function*(){let s;if("string"==typeof t){if(!this.refinement_cards)throw new fb("No refinement cards found.");if(s=null===(i=null===(e=this.refinement_cards)||void 0===e?void 0:e.cards.get({query:t}))||void 0===i?void 0:i.as(It),!s)throw new fb(`Refinement card "${t}" not found`,{available_cards:this.refinement_card_queries})}else{if("SearchRefinementCard"!==t.type)throw new fb("Invalid refinement card!");s=t}const n=yield s.endpoint.call(this.actions,{parse:!0});return new _g(this.actions,n,!0)}))}get refinement_card_queries(){var t;return(null===(t=this.refinement_cards)||void 0===t?void 0:t.cards.as(It).map((t=>t.query)))||[]}getContinuation(){return d(this,void 0,void 0,(function*(){const t=yield this.getContinuationData();if(!t)throw new fb("Could not get continuation data");return new _g(this.actions,t,!0)}))}}const bg=_g;var wg,xg;class Sg{constructor(t,e){var i,s,n,o;if(wg.set(this,void 0),xg.set(this,void 0),f(this,xg,t,"f"),f(this,wg,lb.parseResponse(e.data),"f"),this.sidebar=null===(i=m(this,wg,"f").sidebar)||void 0===i?void 0:i.as(em),!m(this,wg,"f").contents)throw new fb("Page contents not found");const a=m(this,wg,"f").contents.item().as(gf).tabs.array().as(ym).get({selected:!0});if(!a)throw new fb("Target tab not found");const r=null===(s=a.content)||void 0===s?void 0:s.as(xt).contents.as(ol);this.introduction=null===(o=null===(n=null==r?void 0:r.shift())||void 0===n?void 0:n.contents)||void 0===o?void 0:o.firstOfType(ru),this.sections=null==r?void 0:r.map((t=>{var e;return{title:(null===(e=t.header)||void 0===e?void 0:e.title.toString())||null,contents:t.contents}}))}selectSidebarItem(t){return d(this,void 0,void 0,(function*(){if(!this.sidebar)throw new fb("Sidebar not available");let e;if("string"==typeof t){if(e=this.sidebar.items.get({title:t}),!e)throw new fb(`Item "${t}" not found`,{available_items:this.sidebar_items})}else{if(!(null==t?void 0:t.is(Mo)))throw new fb("Invalid item",{target_item:t});e=t}const i=yield e.endpoint.call(m(this,xg,"f"),{parse:!1});return new Sg(m(this,xg,"f"),i)}))}getSettingOption(t){var e;if(!this.sections)throw new fb("Sections not available");for(const i of this.sections)if(i.contents)for(const s of i.contents){const i=s.as(Zp).options;if(i)for(const s of i)if(s.is(Qp)&&(null===(e=s.title)||void 0===e?void 0:e.toString())===t)return s}throw new fb(`Option "${t}" not found`,{available_options:this.setting_options})}get setting_options(){if(!this.sections)throw new fb("Sections not available");let t=[];for(const e of this.sections)if(e.contents)for(const i of e.contents)i.as(Zp).options&&(t=t.concat(i.as(Zp).options));return t.map((t=>{var e;return null===(e=t.title)||void 0===e?void 0:e.toString()})).filter((t=>t))}get sidebar_items(){if(!this.sidebar)throw new fb("Sidebar not available");return this.sidebar.items.map((t=>t.title.toString()))}get page(){return m(this,wg,"f")}}wg=new WeakMap,xg=new WeakMap;const Tg=Sg;var Cg;Cg=new WeakMap;const Ig=class{constructor(t){var e;if(Cg.set(this,void 0),f(this,Cg,lb.parseResponse(t.data),"f"),!m(this,Cg,"f").contents)throw new fb("Page contents not found");const i=m(this,Cg,"f").contents.item().as(_m).tabs.get({selected:!0});if(!i)throw new fb("Could not find target tab.");this.contents=null===(e=i.content)||void 0===e?void 0:e.as(xt).contents.as(ol)}get page(){return m(this,Cg,"f")}},kg={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function Eg(t){return t.replace(/([&"<>'])/g,((t,e)=>kg[e]))}function Rg(t,e,...i){const s=i.flat().map((t=>"string"==typeof t?{type:"TEXT_ELEMENT",props:{nodeValue:t}}:t));return"function"==typeof t?t(Object.assign(Object.assign({},e),{children:s})):{type:(n=t,"mpd"===n?"MPD":"base-url"===n?"BaseURL":n.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join("")),props:Object.assign(Object.assign({},e),{children:s})};var n}function Ag(t){return d(this,void 0,void 0,(function*(){if("TEXT_ELEMENT"===t.type)return Eg("string"==typeof t.props.nodeValue?t.props.nodeValue:"");let e=`<${t.type}`;if(t.props){const i=Object.keys(t.props).filter((e=>!["children","nodeValue"].includes(e)&&void 0!==t.props[e])).map((e=>`${e}="${Eg(`${t.props[e]}`)}"`));i.length>0&&(e+=` ${i.join(" ")}`)}if(t.props.children){const i=yield Promise.all((yield Promise.all(t.props.children.flat())).flat().filter((t=>!!t)).map((t=>Ag(t))));if(i.length>0)return e+=`>${i.join("")}</${t.type}>`,e}return`${e}/>`}))}function Mg(t){return d(this,void 0,void 0,(function*(){return`<?xml version="1.0" encoding="utf-8"?>${yield Ag(yield t)}`}))}function Pg(t){return t.children}var Og;Og=new WeakMap;const Dg=class{constructor(t,e){Og.set(this,void 0),f(this,Og,new mb.shim.Cache(t,e),"f")}get cache_dir(){return m(this,Og,"f").cache_dir}get(t){return m(this,Og,"f").get(t)}set(t,e){return m(this,Og,"f").set(t,e)}remove(t){return m(this,Og,"f").remove(t)}};var Ng,Lg,Bg,Vg,Ug;Lg=new WeakMap,Bg=new WeakMap,Vg=new WeakMap,Ng=new WeakSet,Ug=function(t,e){switch("ANDROID"!==e&&"YTMUSIC_ANDROID"!==e&&"YTMUSIC_ANDROID"!==e&&"YTSTUDIO_ANDROID"!==e||(t.client.androidSdkVersion=T.ANDROID.SDK_VERSION,t.client.userAgent=T.ANDROID.USER_AGENT,t.client.osName="Android",t.client.osVersion="10",t.client.platform="MOBILE"),e){case"iOS":t.client.deviceModel=T.iOS.DEVICE_MODEL,t.client.clientVersion=T.iOS.VERSION,t.client.clientName=T.iOS.NAME,t.client.platform="MOBILE";break;case"YTMUSIC":t.client.clientVersion=T.YTMUSIC.VERSION,t.client.clientName=T.YTMUSIC.NAME;break;case"ANDROID":t.client.clientVersion=T.ANDROID.VERSION,t.client.clientFormFactor="SMALL_FORM_FACTOR",t.client.clientName=T.ANDROID.NAME;break;case"YTMUSIC_ANDROID":t.client.clientVersion=T.YTMUSIC_ANDROID.VERSION,t.client.clientFormFactor="SMALL_FORM_FACTOR",t.client.clientName=T.YTMUSIC_ANDROID.NAME;break;case"YTSTUDIO_ANDROID":t.client.clientVersion=T.YTSTUDIO_ANDROID.VERSION,t.client.clientFormFactor="SMALL_FORM_FACTOR",t.client.clientName=T.YTSTUDIO_ANDROID.NAME;break;case"TV_EMBEDDED":t.client.clientName=T.TV_EMBEDDED.NAME,t.client.clientVersion=T.TV_EMBEDDED.VERSION,t.client.clientScreen="EMBED",t.thirdParty={embedUrl:x.YT_BASE};break;case"YTKIDS":t.client.clientVersion=T.WEB_KIDS.VERSION,t.client.clientName=T.WEB_KIDS.NAME,t.client.kidsAppInfo={categorySettings:{enabledCategories:["approved_for_you","black_joy","camp","collections","earth","explore","favorites","gaming","halloween","hero","learning","move","music","reading","shared_by_parents","shows","soccer","sports","spotlight","winter"]},contentSettings:{corpusPreference:"KIDS_CORPUS_PREFERENCE_YOUNGER",kidsNoSearchMode:"YT_KIDS_NO_SEARCH_MODE_OFF"}}}};const jg=class{constructor(t,e,i){Ng.add(this),Lg.set(this,void 0),Bg.set(this,void 0),Vg.set(this,void 0),f(this,Lg,t,"f"),f(this,Bg,e,"f"),f(this,Vg,i||mb.shim.fetch,"f")}get fetch_function(){return m(this,Vg,"f")}fetch(t,e){return d(this,void 0,void 0,(function*(){const i=x.API.PRODUCTION_1+m(this,Lg,"f").api_version,s=(null==e?void 0:e.baseURL)||i,n="string"==typeof t?s.endsWith("/")||t.startsWith("/")?new URL(s+t):new URL(`${s}/${t}`):t instanceof URL?t:new URL(t.url,s),o=(null==e?void 0:e.headers)||(t instanceof mb.shim.Request?t.headers:new mb.shim.Headers)||new mb.shim.Headers,a=(null==e?void 0:e.body)||(t instanceof mb.shim.Request?t.body:void 0),r=new mb.shim.Headers(o);r.set("Accept","*/*"),r.set("Accept-Language","*"),r.set("X-Goog-Visitor-Id",m(this,Lg,"f").context.client.visitorData||""),r.set("X-Origin",n.origin),r.set("X-Youtube-Client-Version",m(this,Lg,"f").context.client.clientVersion||""),mb.shim.server&&(r.set("User-Agent",Cb("desktop")),r.set("origin",n.origin)),n.searchParams.set("key",m(this,Lg,"f").key),n.searchParams.set("prettyPrint","false"),n.searchParams.set("alt","json");const l=r.get("Content-Type");let c=a,h=!1;const u=s===i||s===x.YT_UPLOAD;if("application/json"===l&&u&&"string"==typeof a){const t=JSON.parse(a),e=Object.assign(Object.assign({},t),{context:JSON.parse(JSON.stringify(m(this,Lg,"f").context))});m(this,Ng,"m",Ug).call(this,e.context,e.client),r.set("x-youtube-client-version",e.context.client.clientVersion),delete e.client,mb.shim.server&&("ANDROID"===e.context.client.clientName||"ANDROID_MUSIC"===e.context.client.clientName?r.set("User-Agent",T.ANDROID.USER_AGENT):"iOS"===e.context.client.clientName&&r.set("User-Agent",T.iOS.USER_AGENT)),h="WEB_KIDS"===e.context.client.clientName,c=JSON.stringify(e)}if(m(this,Lg,"f").logged_in&&u&&!h){const t=m(this,Lg,"f").oauth;if(t.validateCredentials()&&(yield t.refreshIfRequired(),r.set("authorization",`Bearer ${t.credentials.access_token}`),n.searchParams.delete("key")),m(this,Bg,"f")){const t=Sb(m(this,Bg,"f"),"PAPISID=",";");t&&(r.set("authorization",yield function(t){return d(this,void 0,void 0,(function*(){const e=Math.floor((new Date).getTime()/1e3),i=[e,t,"https://www.youtube.com"].join(" ");return["SAPISIDHASH",[e,yield mb.shim.sha1Hash(i)].join("_")].join(" ")}))}(t)),r.set("x-goog-authuser",m(this,Lg,"f").account_index.toString())),r.set("cookie",m(this,Bg,"f"))}}const p=new mb.shim.Request(n,t instanceof mb.shim.Request?t:e),f=yield m(this,Vg,"f").call(this,p,{body:c,headers:r,credentials:"include",redirect:t instanceof mb.shim.Request?t.redirect:(null==e?void 0:e.redirect)||"follow"});if(f.ok)return f;throw new fb(`Request to ${f.url} failed with status ${f.status}`,yield f.text())}))}};function Wg(t,e){if(t.length>1&&1===new Set(t.map((t=>Sb(t.mime_type,'codecs="','"')))).size)return e.push("codecs"),Sb(t[0].mime_type,'codecs="','"')}function Fg(t,e,i){if(t.length>1&&1===new Set(t.map((t=>t.fps))).size)return i.push(e),Number(t[0][e])}function Hg(t,e){if(t.length>1&&1===new Set(t.map((t=>t.audio_channels||2))).size)return e.push("AudioChannelConfiguration"),t[0].audio_channels}function $g(t,e,i,s,n){const o=new URL(t.decipher(s));o.searchParams.set("cpn",n||"");const a=e(o).toString();if(t.is_type_otf){if(!i)throw new fb("Unable to get segment durations for this OTF stream without an Actions instance",{format:t});const e={is_oft:!0,getSegmentTemplate:()=>function(t,e){var i;return d(this,void 0,void 0,(function*(){const s=yield e.session.http.fetch_function(`${t}&rn=0&sq=0`,{method:"GET",headers:C,redirect:"follow"}),n=s.url.replace("&rn=0","").replace("&sq=0",""),o=yield s.text(),a=null===(i=Sb(o,"Segment-Durations-Ms:","\r\n"))||void 0===i?void 0:i.split(",");if(!a)throw new fb("Failed to extract the segment durations from this OTF stream",{url:t});const r=[];for(const t of a){const e=t.trim();if(0===e.length)continue;let i;const s=Sb(e,"(r=",")");s&&(i=parseInt(s)),r.push({duration:parseInt(e),repeat_count:i})}return{init_url:`${n}&sq=0`,media_url:`${n}&sq=$Number$`,timeline:r}}))}(a,i)};return e}if(!t.index_range||!t.init_range)throw new fb("Index and init ranges not available",{format:t});return{is_oft:!1,base_url:a,index_range:t.index_range,init_range:t.init_range}}function Gg(t){const{audio_track:e}=t;if(e)return e.audio_is_default?"main":t.is_dubbed?"dub":t.is_descriptive?"description":"alternate"}const Yg={BT709:"1",BT2020:"9"},Kg={BT709:"1",BT2020_10:"14",SMPTEST2084:"16",ARIB_STD_B67:"18"},qg={BT709:"1",BT2020_NCL:"14"};function zg(t,e,i,s){const n=function(t){var e;const i=new Map;for(const s of t.boards){const t=new URL(s.template_url).pathname.split(".").pop(),n=`image/${"jpg"===t?"jpeg":t}`;i.has(n)||i.set(n,[]),null===(e=i.get(n))||void 0===e||e.push(s)}return i}(i),o={};return Array.from(n.entries()).map((([i,n])=>({probable_mime_type:i,getMimeType:()=>function(t,e,i,s,n){return d(this,void 0,void 0,(function*(){const o=e.template_url,a=i(new URL(o.replace("$M","0"))),r=n.response?n.response:t.session.http.fetch_function(a,{method:"HEAD",headers:C});return n.response=r,(yield r).headers.get("Content-Type")||s}))}(e,n[0],s,i,o),representations:n.map((i=>function(t,e,i,s,n){const o=i.template_url,a=new URL(o.replace("$M","$Number$")),r={uid:`thumbnails_${i.thumbnail_width}x${i.thumbnail_height}`,getBitrate:()=>function(t,e,i){return d(this,void 0,void 0,(function*(){const s=e.template_url,n=[],o=Math.min(e.storyboard_count,10);for(let e=0;e<o;e++){const o=new URL(s.replace("$M",e.toString())),a=0===e&&i.response?i.response:t.session.http.fetch_function(o,{method:"HEAD",headers:C});0===e&&(i.response=a),n.push(a)}const a=yield Promise.all(n),r=[];for(const t of a)r.push(parseInt(t.headers.get("Content-Length")||"0"));return Math.ceil(Math.max(...r)/(e.rows*e.columns)*8)}))}(e,i,n),sheet_width:i.thumbnail_width*i.columns,sheet_height:i.thumbnail_height*i.rows,thumbnail_height:i.thumbnail_height,thumbnail_width:i.thumbnail_width,rows:i.rows,columns:i.columns,template_duration:t/i.storyboard_count,template_url:s(a).toString(),getURL:t=>a.toString().replace("$Number$",t.toString())};return r}(t,e,i,s,o)))})))}function Xg(t,e=(t=>t),i,s,n,o,a){if(!t)throw new fb("Streaming data not available");const r=i?t.adaptive_formats.filter((t=>!i(t))):t.adaptive_formats,l=r[0].approx_duration_ms/1e3,{groups:c,has_multiple_audio_tracks:h}=function(t){var e,i,s;const n=new Map,o=t.some((t=>!!t.audio_track));for(const o of t){if(!(o.index_range&&o.init_range||o.is_type_otf))continue;const t=`${o.mime_type.split(";")[0]}-${null===(e=Sb(o.mime_type,'codecs="','"'))||void 0===e?void 0:e.split(".")[0]}-${o.color_info?Object.values(o.color_info).join("-"):""}-${(null===(i=o.audio_track)||void 0===i?void 0:i.id)||""}`;n.has(t)||n.set(t,[]),null===(s=n.get(t))||void 0===s||s.push(o)}return{groups:Array.from(n.values()),has_multiple_audio_tracks:o}}(r),{video_groups:d,audio_groups:u}=c.reduce(((t,e)=>e[0].has_audio?(h&&!e[0].audio_track||t.audio_groups.push(e),t):(t.video_groups.push(e),t)),{video_groups:[],audio_groups:[]}),p=u.map((t=>function(t,e,i,s,n){var o;const a=t[0],{audio_track:r}=a,l=[],c={mime_type:a.mime_type.split(";")[0],language:null!==(o=a.language)&&void 0!==o?o:void 0,codecs:Wg(t,l),audio_sample_rate:Fg(t,"audio_sample_rate",l),track_name:null==r?void 0:r.display_name,track_role:Gg(a),channels:Hg(t,l),representations:t.map((t=>function(t,e,i,s,n,o){return new URL(t.decipher(n)).searchParams.set("cpn",o||""),{uid:t.audio_track?`${t.itag}-${t.audio_track.id}`:t.itag.toString(),bitrate:t.bitrate,codecs:e.includes("codecs")?void 0:Sb(t.mime_type,'codecs="','"'),audio_sample_rate:e.includes("audio_sample_rate")?void 0:t.audio_sample_rate,channels:e.includes("AudioChannelConfiguration")?void 0:t.audio_channels||2,segment_info:$g(t,i,s,n,o)}}(t,l,e,i,s,n)))};return c}(t,e,o,n,s))),m=d.map((t=>function(t,e,i,s,n){const o=t[0],a=function(t){const e=t.color_info,i=(null==e?void 0:e.primaries)?Yg[e.primaries]:void 0,s=(null==e?void 0:e.transfer_characteristics)?Kg[e.transfer_characteristics]:void 0,n=(null==e?void 0:e.matrix_coefficients)?qg[e.matrix_coefficients]:void 0;if((null==e?void 0:e.matrix_coefficients)&&!n){const i=new URL(t.url),s=JSON.parse(JSON.stringify(t));s.url="REDACTED",s.signature_cipher="REDACTED",s.cipher="REDACTED",console.warn(`YouTube.js toDash(): Unknown matrix coefficients "${e.matrix_coefficients}", the DASH manifest is still usuable without this.\nPlease report it at ${mb.shim.info.bugs_url} so we can add support for it.\nInnertube client: ${i.searchParams.get("c")}\nformat:`,s)}return{primaries:i,transfer_characteristics:s,matrix_coefficients:n}}(o),r=[],l={mime_type:o.mime_type.split(";")[0],color_info:a,codecs:Wg(t,r),fps:Fg(t,"fps",r),representations:t.map((t=>function(t,e,i,s,n,o){return{uid:t.itag.toString(),bitrate:t.bitrate,width:t.width,height:t.height,codecs:i.includes("codecs")?void 0:Sb(t.mime_type,'codecs="','"'),fps:i.includes("fps")?void 0:t.fps,segment_info:$g(t,e,n,s,o)}}(t,e,r,i,s,n)))};return l}(t,e,n,o,s)));return{duration:l,audio_sets:p,video_sets:m,image_sets:a&&o?zg(l,o,a,e):[]}}function Qg({info:t}){return d(this,void 0,void 0,(function*(){if(!t.is_oft)return null;const e=yield t.getSegmentTemplate();return Rg("segment-template",{startNumber:"1",timescale:"1000",initialization:e.init_url,media:e.media_url},Rg("segment-timeline",null,e.timeline.map((t=>Rg("s",{d:t.duration,r:t.repeat_count})))))}))}function Jg({info:t}){return t.is_oft?Rg(Qg,{info:t}):Rg(Pg,null,Rg("base-url",null,t.base_url),Rg("segment-base",{indexRange:`${t.index_range.start}-${t.index_range.end}`},Rg("initialization",{range:`${t.init_range.start}-${t.init_range.end}`})))}function Zg({streamingData:t,transformURL:e,rejectFormat:i,cpn:s,player:n,actions:o,storyboards:a}){const{duration:r,audio_sets:l,video_sets:c,image_sets:h}=Xg(t,e,i,s,n,o,a);return Rg("mpd",{xmlns:"urn:mpeg:dash:schema:mpd:2011",minBufferTime:"PT1.500S",profiles:"urn:mpeg:dash:profile:isoff-main:2011",type:"static",mediaPresentationDuration:`PT${r}S`,"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"urn:mpeg:dash:schema:mpd:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd"},Rg("period",null,l.map(((t,e)=>Rg("adaptation-set",{id:e,mimeType:t.mime_type,startWithSAP:"1",subsegmentAlignment:"true",lang:t.language,codecs:t.codecs,audioSamplingRate:t.audio_sample_rate},t.track_role&&Rg("role",{schemeIdUri:"urn:mpeg:dash:role:2011",value:t.track_role}),t.track_name&&Rg("label",{id:e},t.track_name),t.channels&&Rg("audio-channel-configuration",{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:t.channels}),t.representations.map((t=>Rg("representation",{id:t.uid,bandwidth:t.bitrate,codecs:t.codecs,audioSamplingRate:t.audio_sample_rate},t.channels&&Rg("audio-channel-configuration",{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:t.channels}),Rg(Jg,{info:t.segment_info}))))))),c.map(((t,e)=>Rg("adaptation-set",{id:e+l.length,mimeType:t.mime_type,startWithSAP:"1",subsegmentAlignment:"true",codecs:t.codecs,maxPlayoutRate:"1",frameRate:t.fps},t.color_info.primaries&&Rg("essential-property",{schemeIdUri:"urn:mpeg:mpegB:cicp:ColourPrimaries",value:t.color_info.primaries}),t.color_info.transfer_characteristics&&Rg("essential-property",{schemeIdUri:"urn:mpeg:mpegB:cicp:TransferCharacteristics",value:t.color_info.transfer_characteristics}),t.color_info.matrix_coefficients&&Rg("essential-property",{schemeIdUri:"urn:mpeg:mpegB:cicp:MatrixCoefficients",value:t.color_info.matrix_coefficients}),t.representations.map((t=>Rg("representation",{id:t.uid,bandwidth:t.bitrate,width:t.width,height:t.height,codecs:t.codecs,frameRate:t.fps},Rg(Jg,{info:t.segment_info}))))))),h.map(((t,e)=>d(this,void 0,void 0,(function*(){return Rg("adaptation-set",{id:e+l.length+c.length,mimeType:yield t.getMimeType(),contentType:"image"},t.representations.map((t=>d(this,void 0,void 0,(function*(){return Rg("representation",{id:`thumbnails_${t.thumbnail_width}x${t.thumbnail_height}`,bandwidth:yield t.getBitrate(),width:t.sheet_width,height:t.sheet_height},Rg("essential-property",{schemeIdUri:"http://dashif.org/thumbnail_tile",value:`${t.columns}x${t.rows}`}),Rg("segment-template",{media:t.template_url,duration:t.template_duration,startNumber:"0"}))})))))}))))))}function t_(t,e,i,s,n,o){return d(this,void 0,void 0,(function*(){if("UNPLAYABLE"===(null==i?void 0:i.status))throw new fb("Video is unplayable",{error_type:"UNPLAYABLE"});if("LOGIN_REQUIRED"===(null==i?void 0:i.status))throw new fb("Video is login required",{error_type:"LOGIN_REQUIRED"});if(!s)throw new fb("Streaming data not available.",{error_type:"NO_STREAMING_DATA"});const a=Object.assign({quality:"360p",type:"video+audio",format:"mp4",range:void 0},t),r=e_(a,s),l=r.decipher(n);if("video+audio"===a.type&&!t.range){const t=yield e.session.http.fetch_function(`${l}&cpn=${o}`,{method:"GET",headers:C,redirect:"follow"});if(!t.ok)throw new fb("The server responded with a non 2xx status code",{error_type:"FETCH_FAILED",response:t});const i=t.body;if(!i)throw new fb("Could not get ReadableStream from fetch Response.",{error_type:"FETCH_FAILED",response:t});return i}const c=10485760;let h,m=t.range?t.range.start:0,f=t.range?t.range.end:c,v=!1;const y=new mb.shim.ReadableStream({start(){},pull:i=>d(this,void 0,void 0,(function*(){if(!v)return(f>=(r.content_length?r.content_length:0)||t.range)&&(v=!0),new Promise(((t,s)=>d(this,void 0,void 0,(function*(){var n,a,r,d;try{h=new AbortController;const s=yield e.session.http.fetch_function(`${l}&cpn=${o}&range=${m}-${f||""}`,{method:"GET",headers:Object.assign({},C),signal:h.signal}),_=s.body;if(!_)throw new fb("Could not get ReadableStream from fetch Response.",{error_type:"FETCH_FAILED",response:s});try{for(var v,y=!0,g=p(function(t){return function(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=i.apply(t,e||[]),o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(t){n[t]&&(s[t]=function(e){return new Promise((function(i,s){o.push([t,e,i,s])>1||r(t,e)}))})}function r(t,e){try{(i=n[t](e)).value instanceof u?Promise.resolve(i.value.v).then(l,c):h(o[0][2],i)}catch(t){h(o[0][3],t)}var i}function l(t){r("next",t)}function c(t){r("throw",t)}function h(t,e){t(e),o.shift(),o.length&&r(o[0][0],o[0][1])}}(this,arguments,(function*(){const e=t.getReader();try{for(;;){const{done:t,value:i}=yield u(e.read());if(t)return yield u(void 0);yield yield u(i)}}finally{e.releaseLock()}}))}(_));!(n=(v=yield g.next()).done);y=!0){d=v.value,y=!1;const t=d;i.enqueue(t)}}catch(t){a={error:t}}finally{try{y||n||!(r=g.return)||(yield r.call(g))}finally{if(a)throw a.error}}m=f+1,f+=c,t()}catch(t){s(t)}}))));i.close()})),cancel(t){return d(this,void 0,void 0,(function*(){h.abort(t)}))}},{highWaterMark:1,size:t=>t.byteLength});return y}))}function e_(t,e){if(!e)throw new fb("Streaming data not available");const i=[...e.formats||[],...e.adaptive_formats||[]],s=!t.type||t.type.includes("audio"),n=!t.type||t.type.includes("video"),o=t.language||"original",a=t.quality||"best";let r=-1;const l=["best","bestefficiency"].includes(a),c="best"!==a;let h=i.filter((e=>!(s&&!e.has_audio||n&&!e.has_video||"any"!==t.format&&!e.mime_type.includes(t.format||"mp4")||!l&&e.quality_label!==a||(r<e.width&&(r=e.width),0))));if(!h.length)throw new fb("No matching formats found",{options:t});if(l&&n&&(h=h.filter((t=>t.width===r))),s&&!n){const t=h.filter((t=>"original"!==o?!t.has_video&&t.language===o:!t.has_video&&t.is_original));t.length>0&&(h=t)}return c?h.sort(((t,e)=>t.bitrate-e.bitrate)):h.sort(((t,e)=>e.bitrate-t.bitrate)),h[0]}var i_,s_;class n_{constructor(t,e){i_.set(this,void 0),s_.set(this,void 0),f(this,i_,lb.parseResponse(e.data),"f"),f(this,s_,t,"f"),this.transcript=m(this,i_,"f").actions_memo.getType(qe).first()}selectLanguage(t){var e,i,s,n;return d(this,void 0,void 0,(function*(){const o=null===(n=null===(s=null===(i=null===(e=this.transcript.content)||void 0===e?void 0:e.footer)||void 0===i?void 0:i.language_menu)||void 0===s?void 0:s.sub_menu_items)||void 0===n?void 0:n.find((e=>e.title.toString()===t));if(!o)throw new Error(`Language not found: ${t}`);if(o.selected)return this;const a=yield m(this,s_,"f").execute("/get_transcript",{params:o.continuation});return new n_(m(this,s_,"f"),a)}))}get languages(){var t,e,i,s;return(null===(s=null===(i=null===(e=null===(t=this.transcript.content)||void 0===t?void 0:t.footer)||void 0===e?void 0:e.language_menu)||void 0===i?void 0:i.sub_menu_items)||void 0===s?void 0:s.map((t=>t.title.toString())))||[]}get selectedLanguage(){var t,e,i,s,n;return(null===(n=null===(s=null===(i=null===(e=null===(t=this.transcript.content)||void 0===t?void 0:t.footer)||void 0===e?void 0:e.language_menu)||void 0===i?void 0:i.sub_menu_items)||void 0===s?void 0:s.find((t=>t.selected)))||void 0===n?void 0:n.title.toString())||""}get page(){return m(this,i_,"f")}}i_=new WeakMap,s_=new WeakMap;const o_=n_;var a_,r_,l_,c_;a_=new WeakMap,r_=new WeakMap,l_=new WeakMap,c_=new WeakMap;const h_=class{constructor(t,e,i){var s,n;a_.set(this,void 0),r_.set(this,void 0),l_.set(this,void 0),c_.set(this,void 0),f(this,r_,e,"f");const o=lb.parseResponse(t[0].data),a=(null===(s=null==t?void 0:t[1])||void 0===s?void 0:s.data)?lb.parseResponse(t[1].data):void 0;if(f(this,a_,[o,a],"f"),f(this,l_,i,"f"),"ERROR"===(null===(n=o.playability_status)||void 0===n?void 0:n.status))throw new fb("This video is unavailable",o.playability_status);this.streaming_data=o.streaming_data,this.playability_status=o.playability_status,f(this,c_,o.playback_tracking,"f")}toDash(t,e,i={include_thumbnails:!1}){var s;return d(this,void 0,void 0,(function*(){let n;return i.include_thumbnails&&(null===(s=m(this,a_,"f")[0].storyboards)||void 0===s?void 0:s.is(it))&&(n=m(this,a_,"f")[0].storyboards),function(t,e=(t=>t),i,s,n,o,a){if(!t)throw new fb("Streaming data not available");return Mg(Rg(Zg,{streamingData:t,transformURL:e,rejectFormat:i,cpn:s,player:n,actions:o,storyboards:a}))}(this.streaming_data,t,e,m(this,l_,"f"),m(this,r_,"f").session.player,m(this,r_,"f"),n)}))}getStreamingInfo(t,e){var i;return Xg(this.streaming_data,t,e,this.cpn,m(this,r_,"f").session.player,m(this,r_,"f"),(null===(i=m(this,a_,"f")[0].storyboards)||void 0===i?void 0:i.is(it))?m(this,a_,"f")[0].storyboards:void 0)}chooseFormat(t){return e_(t,this.streaming_data)}download(t={}){return d(this,void 0,void 0,(function*(){return t_(t,m(this,r_,"f"),this.playability_status,this.streaming_data,m(this,r_,"f").session.player,this.cpn)}))}getTranscript(){var t;return d(this,void 0,void 0,(function*(){const e=this.page[1];if(!e)throw new fb("Cannot get transcript from basic video info.");if(!e.engagement_panels)throw new fb("Engagement panels not found. Video likely has no transcript.");const i=e.engagement_panels.get({panel_identifier:"engagement-panel-searchable-transcript"});if(!i)throw new fb("Transcript panel not found. Video likely has no transcript.");const s=null===(t=i.content)||void 0===t?void 0:t.as(lt);if(!s)throw new fb("Transcript continuation not found.");const n=yield s.endpoint.call(this.actions);return new o_(this.actions,n)}))}addToWatchHistory(t=T.WEB.NAME,e=T.WEB.VERSION,i="https://www."){return d(this,void 0,void 0,(function*(){if(!m(this,c_,"f"))throw new fb("Playback tracking not available");const s={cpn:m(this,l_,"f"),fmt:251,rtn:0,rt:0},n=m(this,c_,"f").videostats_playback_url.replace("https://s.",i);return yield m(this,r_,"f").stats(n,{client_name:t,client_version:e},s)}))}get actions(){return m(this,r_,"f")}get cpn(){return m(this,l_,"f")}get page(){return m(this,a_,"f")}};var d_;class u_ extends h_{constructor(t,e,i){var s,n,o,a,r,l,c,h,d,u,p,m,v,y,g,_,b,w,x,S,T,C,I,k,E,R,A,M,P,O,D,N,L,B,V,U,j,W,F,H,$,G;super(t,e,i),d_.set(this,void 0);const[Y,K]=this.page;if(Y.microformat&&!(null===(s=Y.microformat)||void 0===s?void 0:s.is(yu,xh)))throw new fb("Invalid microformat",Y.microformat);if(this.basic_info=Object.assign(Object.assign(Object.assign({},Y.video_details),{embed:(null===(n=Y.microformat)||void 0===n?void 0:n.is(yu))?null===(o=Y.microformat)||void 0===o?void 0:o.embed:null,channel:(null===(a=Y.microformat)||void 0===a?void 0:a.is(yu))?null===(r=Y.microformat)||void 0===r?void 0:r.channel:null,is_unlisted:null===(l=Y.microformat)||void 0===l?void 0:l.is_unlisted,is_family_safe:null===(c=Y.microformat)||void 0===c?void 0:c.is_family_safe,category:(null===(h=Y.microformat)||void 0===h?void 0:h.is(yu))?null===(d=Y.microformat)||void 0===d?void 0:d.category:null,has_ypc_metadata:(null===(u=Y.microformat)||void 0===u?void 0:u.is(yu))?null===(p=Y.microformat)||void 0===p?void 0:p.has_ypc_metadata:null,start_timestamp:(null===(m=Y.microformat)||void 0===m?void 0:m.is(yu))?Y.microformat.start_timestamp:null,view_count:(null===(v=Y.microformat)||void 0===v?void 0:v.is(yu))&&isNaN(null===(y=Y.video_details)||void 0===y?void 0:y.view_count)?Y.microformat.view_count:null===(g=Y.video_details)||void 0===g?void 0:g.view_count}),{like_count:void 0,is_liked:void 0,is_disliked:void 0}),this.annotations=Y.annotations,this.storyboards=Y.storyboards,this.endscreen=Y.endscreen,this.captions=Y.captions,this.cards=Y.cards,this.streaming_data){const t=this.streaming_data.adaptive_formats.find((t=>{var e;return null===(e=t.audio_track)||void 0===e?void 0:e.audio_is_default}));if(t)this.streaming_data.formats.forEach((e=>e.language=t.language));else if(void 0!==(null===(_=this.captions)||void 0===_?void 0:_.default_audio_track_index)&&(null===(b=this.captions)||void 0===b?void 0:b.audio_tracks)&&this.captions.caption_tracks){const t=this.captions.audio_tracks[this.captions.default_audio_track_index].default_caption_track_index||0,e=this.captions.caption_tracks[t].language_code;this.streaming_data.adaptive_formats.forEach((t=>{t.has_audio&&(t.language=e)})),this.streaming_data.formats.forEach((t=>t.language=e))}}const q=null===(w=null==K?void 0:K.contents)||void 0===w?void 0:w.item().as(Tf),z=null==q?void 0:q.results,X=null==q?void 0:q.secondary_results;if(z&&X){if((null===(x=Y.microformat)||void 0===x?void 0:x.is(yu))&&"Gaming"===(null===(S=Y.microformat)||void 0===S?void 0:S.category)){const t=null===(I=null===(C=null===(T=z.firstOfType(jf))||void 0===T?void 0:T.metadata)||void 0===C?void 0:C.rows)||void 0===I?void 0:I.firstOfType(Sp);(null==t?void 0:t.is(Sp))&&(this.game_info={title:null===(E=null===(k=null==t?void 0:t.contents)||void 0===k?void 0:k.firstOfType(wp))||void 0===E?void 0:E.title,release_year:null===(A=null===(R=null==t?void 0:t.contents)||void 0===R?void 0:R.firstOfType(wp))||void 0===A?void 0:A.subtitle})}this.primary_info=z.firstOfType(Vf),this.secondary_info=z.firstOfType(jf),this.merchandise=z.firstOfType(uh),this.related_chip_cloud=null===(M=X.firstOfType(pp))||void 0===M?void 0:M.content.as(Ss),(null==q?void 0:q.playlist)&&(this.playlist=q.playlist),this.watch_next_feed=(null===(P=X.firstOfType(ol))||void 0===P?void 0:P.contents)||X,this.watch_next_feed&&Array.isArray(this.watch_next_feed)&&(null===(O=this.watch_next_feed.at(-1))||void 0===O?void 0:O.is(lt))&&f(this,d_,null===(D=this.watch_next_feed.pop())||void 0===D?void 0:D.as(lt),"f"),this.player_overlays=null===(N=null==K?void 0:K.player_overlays)||void 0===N?void 0:N.item().as(Su),(null==q?void 0:q.autoplay)&&(this.autoplay=q.autoplay);const t=null===(B=null===(L=this.primary_info)||void 0===L?void 0:L.menu)||void 0===B?void 0:B.top_level_buttons.firstOfType(Gp);(null===(V=null==t?void 0:t.like_button)||void 0===V?void 0:V.is(gi))&&(null===(U=null==t?void 0:t.dislike_button)||void 0===U?void 0:U.is(gi))&&(this.basic_info.like_count=null===(j=null==t?void 0:t.like_button)||void 0===j?void 0:j.like_count,this.basic_info.is_liked=null===(W=null==t?void 0:t.like_button)||void 0===W?void 0:W.is_toggled,this.basic_info.is_disliked=null===(F=null==t?void 0:t.dislike_button)||void 0===F?void 0:F.is_toggled);const e=null===(H=z.get({target_id:"comments-entry-point"}))||void 0===H?void 0:H.as(ol);this.comments_entry_point_header=null===($=null==e?void 0:e.contents)||void 0===$?void 0:$.firstOfType(_o),this.livechat=null===(G=null==K?void 0:K.contents_memo)||void 0===G?void 0:G.getType(cl).first()}}selectFilter(t){var e,i,s,n;return d(this,void 0,void 0,(function*(){if(!this.related_chip_cloud)throw new fb("Chip cloud not found, cannot apply filter");let o;if("string"==typeof t){const s=null===(i=null===(e=this.related_chip_cloud)||void 0===e?void 0:e.chips)||void 0===i?void 0:i.get({text:t});if(!s)throw new fb("Invalid filter",{available_filters:this.filters});o=s}else{if(!(null==t?void 0:t.is(ws)))throw new fb("Invalid cloud chip",t);o=t}if(o.is_selected)return this;const a=yield null===(s=o.endpoint)||void 0===s?void 0:s.call(this.actions,{parse:!0}),r=null===(n=null==a?void 0:a.on_response_received_endpoints)||void 0===n?void 0:n.get({target_id:"watch-next-feed"});return this.watch_next_feed=null==r?void 0:r.contents,this}))}addToWatchHistory(){const t=Object.create(null,{addToWatchHistory:{get:()=>super.addToWatchHistory}});return d(this,void 0,void 0,(function*(){return t.addToWatchHistory.call(this)}))}getWatchNextContinuation(){var t,e,i,s,n;return d(this,void 0,void 0,(function*(){if(!m(this,d_,"f"))throw new fb("Watch next feed continuation not found");const o=yield null===(t=m(this,d_,"f"))||void 0===t?void 0:t.endpoint.call(this.actions,{parse:!0}),a=null===(e=null==o?void 0:o.on_response_received_endpoints)||void 0===e?void 0:e.get({type:"appendContinuationItemsAction"});if(!a)throw new fb("AppendContinuationItemsAction not found");return this.watch_next_feed=null==a?void 0:a.contents,(null===(s=null===(i=this.watch_next_feed)||void 0===i?void 0:i.at(-1))||void 0===s?void 0:s.is(lt))?f(this,d_,null===(n=this.watch_next_feed.pop())||void 0===n?void 0:n.as(lt),"f"):f(this,d_,void 0,"f"),this}))}like(){var t,e;return d(this,void 0,void 0,(function*(){const i=null===(e=null===(t=this.primary_info)||void 0===t?void 0:t.menu)||void 0===e?void 0:e.top_level_buttons.firstOfType(Gp),s=null==i?void 0:i.like_button;if(!s)throw new fb("Like button not found",{video_id:this.basic_info.id});if(!s.is(gi))throw new fb("Like button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(s.is_toggled)throw new fb("This video is already liked",{video_id:this.basic_info.id});return yield s.endpoint.call(this.actions)}))}dislike(){var t,e;return d(this,void 0,void 0,(function*(){const i=null===(e=null===(t=this.primary_info)||void 0===t?void 0:t.menu)||void 0===e?void 0:e.top_level_buttons.firstOfType(Gp),s=null==i?void 0:i.dislike_button;if(!s)throw new fb("Dislike button not found",{video_id:this.basic_info.id});if(!s.is(gi))throw new fb("Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(s.is_toggled)throw new fb("This video is already disliked",{video_id:this.basic_info.id});return yield s.endpoint.call(this.actions)}))}removeRating(){var t,e;return d(this,void 0,void 0,(function*(){let i;const s=null===(e=null===(t=this.primary_info)||void 0===t?void 0:t.menu)||void 0===e?void 0:e.top_level_buttons.firstOfType(Gp),n=null==s?void 0:s.like_button,o=null==s?void 0:s.dislike_button;if(!(null==n?void 0:n.is(gi))||!(null==o?void 0:o.is(gi)))throw new fb("Like/Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if((null==n?void 0:n.is_toggled)?i=n:(null==o?void 0:o.is_toggled)&&(i=o),!i)throw new fb("This video is not liked/disliked",{video_id:this.basic_info.id});return yield i.toggled_endpoint.call(this.actions)}))}getLiveChat(){if(!this.livechat)throw new fb("Live Chat is not available",{video_id:this.basic_info.id});return new mg(this)}getTrailerInfo(){var t,e;if(this.has_trailer){const i=null===(e=null===(t=this.playability_status.error_screen)||void 0===t?void 0:t.as(fu).trailer)||void 0===e?void 0:e.player_response;if(i)return new u_([{data:i}],this.actions,this.cpn)}return null}get filters(){var t,e;return(null===(e=null===(t=this.related_chip_cloud)||void 0===t?void 0:t.chips)||void 0===e?void 0:e.map((t=>{var e;return null===(e=t.text)||void 0===e?void 0:e.toString()})))||[]}get wn_has_continuation(){return!!m(this,d_,"f")}get autoplay_video_endpoint(){var t,e,i;return(null===(i=null===(e=null===(t=this.autoplay)||void 0===t?void 0:t.sets)||void 0===e?void 0:e[0])||void 0===i?void 0:i.autoplay_video)||null}get has_trailer(){var t;return!!(null===(t=this.playability_status.error_screen)||void 0===t?void 0:t.is(fu))}get music_tracks(){var t,e,i,s,n,o;const a=null===(e=null===(t=this.page[1])||void 0===t?void 0:t.engagement_panels)||void 0===e?void 0:e.filter((t=>{var e;return null===(e=t.content)||void 0===e?void 0:e.is(me)}));if(void 0!==a&&a.length>0){const t=null===(n=null===(s=null===(i=a[0].content)||void 0===i?void 0:i.as(me))||void 0===s?void 0:s.items)||void 0===n?void 0:n.filterType(ae);if(void 0!==t&&t.length>0)return null===(o=t[0].carousel_lockups)||void 0===o?void 0:o.map((t=>{var e,i,s,n,o,a,r,l,c,h,d,u,p,m,f,v,y,g,_;let b,w,x,S,T,C;b=null===(i=null===(e=t.video_lockup)||void 0===e?void 0:e.title)||void 0===i?void 0:i.toString(),T=null===(s=t.video_lockup)||void 0===s?void 0:s.endpoint.payload.videoId;for(let e=0;e<t.info_rows.length;e++){const i=t.info_rows[e];if(void 0===i.info_row_expand_status_key)if(void 0===b){if(b=(null===(n=i.default_metadata)||void 0===n?void 0:n.toString())||(null===(o=i.expanded_metadata)||void 0===o?void 0:o.toString()),void 0===T){const t=(null===(a=i.default_metadata)||void 0===a?void 0:a.endpoint)||(null===(r=i.expanded_metadata)||void 0===r?void 0:r.endpoint);T=null===(l=null==t?void 0:t.payload)||void 0===l?void 0:l.videoId}}else x=(null===(c=i.default_metadata)||void 0===c?void 0:c.toString())||(null===(h=i.expanded_metadata)||void 0===h?void 0:h.toString());else{if(-1!==(null===(d=i.info_row_expand_status_key)||void 0===d?void 0:d.indexOf("structured-description-music-section-artists-row-state-id"))&&(w=(null===(u=i.default_metadata)||void 0===u?void 0:u.toString())||(null===(p=i.expanded_metadata)||void 0===p?void 0:p.toString()),void 0===C)){const t=(null===(m=i.default_metadata)||void 0===m?void 0:m.endpoint)||(null===(f=i.expanded_metadata)||void 0===f?void 0:f.endpoint);C=null===(v=null==t?void 0:t.payload)||void 0===v?void 0:v.browseId}-1!==(null===(y=i.info_row_expand_status_key)||void 0===y?void 0:y.indexOf("structured-description-music-section-licenses-row-state-id"))&&(S=(null===(g=i.default_metadata)||void 0===g?void 0:g.toString())||(null===(_=i.expanded_metadata)||void 0===_?void 0:_.toString()))}}return{song:b,artist:w,album:x,license:S,videoId:T,channelId:C}}))}return[]}}d_=new WeakMap;const p_=u_;var m_;m_=new WeakMap;const f_=class{constructor(t){var e,i,s;if(m_.set(this,void 0),f(this,m_,lb.parseResponse(t.data),"f"),this.header=null===(e=m(this,m_,"f").header)||void 0===e?void 0:e.item().as(yd),this.url=(null===(i=m(this,m_,"f").microformat)||void 0===i?void 0:i.as(xh).url_canonical)||null,!m(this,m_,"f").contents_memo)throw new Error("No contents found in the response");this.contents=null===(s=m(this,m_,"f").contents_memo.getType(Hd))||void 0===s?void 0:s.first().contents,this.sections=m(this,m_,"f").contents_memo.getType(pd)||[]}get page(){return m(this,m_,"f")}};var v_,y_;v_=new WeakMap,y_=new WeakMap;const g_=class{constructor(t,e){var i,s,n;v_.set(this,void 0),y_.set(this,void 0),f(this,v_,lb.parseResponse(t.data),"f"),f(this,y_,e,"f"),this.header=null===(i=this.page.header)||void 0===i?void 0:i.item().as(kd,Zd,Cd);const o=(null===(s=m(this,v_,"f").contents_memo)||void 0===s?void 0:s.getType(Hd))||[],a=(null===(n=m(this,v_,"f").contents_memo)||void 0===n?void 0:n.getType(pd))||[];this.sections=[...o,...a]}getAllSongs(){var t,e;return d(this,void 0,void 0,(function*(){const i=this.sections.filter((t=>"MusicShelf"===t.type));if(!i.length)throw new fb("Could not find any node of type MusicShelf.");const s=i.find((t=>"Songs"===t.title.toString()));if(!s)throw new fb("Could not find target shelf (Songs).");if(!s.endpoint)throw new fb("Target shelf (Songs) did not have an endpoint.");const n=yield s.endpoint.call(m(this,y_,"f"),{client:"YTMUSIC",parse:!0});return null===(e=null===(t=n.contents_memo)||void 0===t?void 0:t.getType(Od))||void 0===e?void 0:e.first()}))}get page(){return m(this,v_,"f")}};var __;__=new WeakMap;const b_=class{constructor(t){var e,i,s;__.set(this,void 0),f(this,__,lb.parseResponse(t.data),"f");const n=null===(e=m(this,__,"f").contents)||void 0===e?void 0:e.item().as(_m).tabs.get({selected:!0});if(!n)throw new fb("Could not find target tab.");const o=null===(i=n.content)||void 0===i?void 0:i.as(xt);if(!o)throw new fb("Target tab did not have any content.");this.top_buttons=(null===(s=o.contents.firstOfType(Xa))||void 0===s?void 0:s.items.as(Yh))||[],this.sections=o.contents.filterType(pd)}get page(){return m(this,__,"f")}};var w_,x_,S_;class T_{constructor(t,e){var i,s,n,o,a,r;w_.set(this,void 0),x_.set(this,void 0),S_.set(this,void 0),f(this,x_,e,"f"),f(this,w_,lb.parseResponse(t.data),"f");const l=null===(i=m(this,w_,"f").contents)||void 0===i?void 0:i.item().as(_m).tabs.get({selected:!0});if(!l)throw new fb("Could not find Home tab.");if(null===l.content){if(!m(this,w_,"f").continuation_contents)throw new fb("Continuation did not have any content.");return f(this,S_,m(this,w_,"f").continuation_contents.as(Cv).continuation,"f"),void(this.sections=null===(s=m(this,w_,"f").continuation_contents.as(Cv).contents)||void 0===s?void 0:s.as(pd))}this.header=null===(o=null===(n=l.content)||void 0===n?void 0:n.as(xt).header)||void 0===o?void 0:o.as(Ss),f(this,S_,null===(a=l.content)||void 0===a?void 0:a.as(xt).continuation,"f"),this.sections=null===(r=l.content)||void 0===r?void 0:r.as(xt).contents.as(pd,Qd)}getContinuation(){return d(this,void 0,void 0,(function*(){if(!m(this,S_,"f"))throw new fb("Continuation not found.");const t=yield m(this,x_,"f").execute("/browse",{client:"YTMUSIC",continuation:m(this,S_,"f")});return new T_(t,m(this,x_,"f"))}))}applyFilter(t){var e,i;return d(this,void 0,void 0,(function*(){let s;if("string"==typeof t){if(s=null===(i=null===(e=this.header)||void 0===e?void 0:e.chips)||void 0===i?void 0:i.as(ws).get({text:t}),!s)throw new fb("Could not find filter with given name.",{available_filters:this.filters})}else(null==t?void 0:t.is(ws))&&(s=t);if(!s)throw new fb("Invalid filter",{available_filters:this.filters});if(null==s?void 0:s.is_selected)return this;if(!s.endpoint)throw new fb("Selected filter does not have an endpoint.");const n=yield s.endpoint.call(m(this,x_,"f"),{client:"YTMUSIC"});return new T_(n,m(this,x_,"f"))}))}get filters(){var t,e;return(null===(e=null===(t=this.header)||void 0===t?void 0:t.chips)||void 0===e?void 0:e.as(ws).map((t=>t.text)))||[]}get has_continuation(){return!!m(this,S_,"f")}get page(){return m(this,w_,"f")}}w_=new WeakMap,x_=new WeakMap,S_=new WeakMap;const C_=T_;var I_,k_,E_,R_,A_,M_;class P_{constructor(t,e){var i,s,n,o,a;I_.set(this,void 0),k_.set(this,void 0),E_.set(this,void 0),f(this,I_,lb.parseResponse(t.data),"f"),f(this,k_,e,"f");const r=null===(i=m(this,I_,"f").contents_memo)||void 0===i?void 0:i.getType(xt).first();this.header=null===(s=null==r?void 0:r.header)||void 0===s?void 0:s.as(Gd),this.contents=null===(n=null==r?void 0:r.contents)||void 0===n?void 0:n.as(Xa,Hd),f(this,E_,null===(a=null===(o=this.contents)||void 0===o?void 0:o.find((t=>t.continuation)))||void 0===a?void 0:a.continuation,"f")}applySort(t){var e,i,s,n,o,a,r,l,c,h;return d(this,void 0,void 0,(function*(){let d;if("string"==typeof t){const s=null===(e=m(this,I_,"f").contents_memo)||void 0===e?void 0:e.getType(Kd).first(),n=null===(i=null==s?void 0:s.menu)||void 0===i?void 0:i.options.filter((t=>t instanceof ge));if(d=null==n?void 0:n.find((e=>e.title===t)),!d)throw new fb(`Sort option "${t}" not found`,{available_filters:n.map((t=>t.title))})}else t instanceof ge&&(d=t);if(!d)throw new fb("Invalid sort option");if(d.selected)return this;const u=null===(a=null===(o=null===(n=null===(s=d.endpoint)||void 0===s?void 0:s.payload)||void 0===n?void 0:n.commands)||void 0===o?void 0:o.find((t=>t.browseSectionListReloadEndpoint)))||void 0===a?void 0:a.browseSectionListReloadEndpoint;if(!u)throw new fb("Failed to find sort option command");const p=yield m(this,k_,"f").execute("/browse",{client:"YTMUSIC",continuation:u.continuation.reloadContinuationData.continuation,parse:!0}),f=null===(l=null===(r=m(this,I_,"f").contents_memo)||void 0===r?void 0:r.getType(ge))||void 0===l?void 0:l.find((t=>t.selected));return f&&(f.selected=!1),d.selected=!0,this.contents=null===(h=null===(c=p.continuation_contents)||void 0===c?void 0:c.as(Cv).contents)||void 0===h?void 0:h.as(Xa,Hd),this}))}applyFilter(t){var e,i,s,n;return d(this,void 0,void 0,(function*(){let o;const a=null===(e=m(this,I_,"f").contents_memo)||void 0===e?void 0:e.getType(Ss).first();if("string"==typeof t){if(o=null==a?void 0:a.chips.get({text:t}),!o)throw new fb(`Filter "${t}" not found`,{available_filters:this.filters})}else t instanceof ws&&(o=t);if(!o)throw new fb("Invalid filter",t);const r=new U(null===(n=null===(s=null===(i=o.endpoint)||void 0===i?void 0:i.payload)||void 0===s?void 0:s.commands)||void 0===n?void 0:n[0]),l=yield r.call(m(this,k_,"f"),{client:"YTMUSIC"});return new P_(l,m(this,k_,"f"))}))}getContinuation(){return d(this,void 0,void 0,(function*(){if(!m(this,E_,"f"))throw new fb("No continuation available");const t=yield m(this,k_,"f").execute("/browse",{client:"YTMUSIC",continuation:m(this,E_,"f")});return new O_(t,m(this,k_,"f"))}))}get has_continuation(){return!!m(this,E_,"f")}get sort_options(){var t,e;const i=null===(t=m(this,I_,"f").contents_memo)||void 0===t?void 0:t.getType(Kd).first();return(null===(e=null==i?void 0:i.menu)||void 0===e?void 0:e.options.filter((t=>t instanceof ge))).map((t=>t.title))}get filters(){var t,e;return(null===(e=null===(t=m(this,I_,"f").contents_memo)||void 0===t?void 0:t.getType(Ss))||void 0===e?void 0:e.first().chips.map((t=>t.text)))||[]}get page(){return m(this,I_,"f")}}I_=new WeakMap,k_=new WeakMap,E_=new WeakMap;class O_{constructor(t,e){if(R_.set(this,void 0),A_.set(this,void 0),M_.set(this,void 0),f(this,R_,lb.parseResponse(t.data),"f"),f(this,A_,e,"f"),!m(this,R_,"f").continuation_contents)throw new fb("No continuation contents found");this.contents=m(this,R_,"f").continuation_contents.as(kv,Ev),f(this,M_,this.contents.continuation||null,"f")}getContinuation(){return d(this,void 0,void 0,(function*(){if(!m(this,M_,"f"))throw new fb("No continuation available");const t=yield m(this,A_,"f").execute("/browse",{client:"YTMUSIC",continuation:m(this,M_,"f")});return new O_(t,m(this,A_,"f"))}))}get has_continuation(){return!!m(this,M_,"f")}get page(){return m(this,R_,"f")}}R_=new WeakMap,A_=new WeakMap,M_=new WeakMap;const D_=P_;var N_,L_,B_,V_,U_,j_,W_;class F_{constructor(t,e){var i,s,n,o,a,r,l;if(N_.add(this),L_.set(this,void 0),B_.set(this,void 0),V_.set(this,void 0),U_.set(this,void 0),j_.set(this,void 0),f(this,B_,e,"f"),f(this,L_,lb.parseResponse(t.data),"f"),f(this,U_,null,"f"),f(this,j_,null,"f"),m(this,L_,"f").continuation_contents){const t=null===(i=m(this,L_,"f").continuation_contents)||void 0===i?void 0:i.as(Iv);this.items=t.contents,f(this,V_,t.continuation,"f")}else"MusicEditablePlaylistDetailHeader"===(null===(s=m(this,L_,"f").header)||void 0===s?void 0:s.item().type)?this.header=null===(o=null===(n=m(this,L_,"f").header)||void 0===n?void 0:n.item().as(wd).header)||void 0===o?void 0:o.as(yd):this.header=null===(a=m(this,L_,"f").header)||void 0===a?void 0:a.item().as(yd),this.items=(null===(r=m(this,L_,"f").contents_memo)||void 0===r?void 0:r.getType(Od).first().contents)||null,f(this,V_,(null===(l=m(this,L_,"f").contents_memo)||void 0===l?void 0:l.getType(Od).first().continuation)||null,"f")}getContinuation(){return d(this,void 0,void 0,(function*(){if(!m(this,V_,"f"))throw new fb("Continuation not found.");const t=yield m(this,B_,"f").execute("/browse",{client:"YTMUSIC",continuation:m(this,V_,"f")});return new F_(t,m(this,B_,"f"))}))}getRelated(){var t,e,i,s,n;return d(this,void 0,void 0,(function*(){let o=null===(e=null===(t=m(this,L_,"f").contents_memo)||void 0===t?void 0:t.getType(xt))||void 0===e?void 0:e[0].continuation;for(;o;){const t=yield m(this,B_,"f").execute("/browse",{client:"YTMUSIC",continuation:o,parse:!0}),e=null===(i=t.continuation_contents)||void 0===i?void 0:i.as(Cv),a=null===(s=null==e?void 0:e.contents)||void 0===s?void 0:s.as(pd,Hd),r=null===(n=null==a?void 0:a.matchCondition((t=>t.is(pd))))||void 0===n?void 0:n.as(pd);if(r)return r;o=null==e?void 0:e.continuation}throw new fb("Target section not found.")}))}getSuggestions(t=!0){return d(this,void 0,void 0,(function*(){const e=t||!m(this,U_,"f")?m(this,N_,"m",W_).call(this):Promise.resolve(null),i=yield e;return i&&(f(this,U_,i.items,"f"),f(this,j_,i.continuation,"f")),(null==i?void 0:i.items)||m(this,U_,"f")}))}get page(){return m(this,L_,"f")}get has_continuation(){return!!m(this,V_,"f")}}L_=new WeakMap,B_=new WeakMap,V_=new WeakMap,U_=new WeakMap,j_=new WeakMap,N_=new WeakSet,W_=function(){var t,e,i,s,n;return d(this,void 0,void 0,(function*(){const o=m(this,j_,"f")||(null===(e=null===(t=m(this,L_,"f").contents_memo)||void 0===t?void 0:t.get("SectionList"))||void 0===e?void 0:e[0].as(xt).continuation);if(o){const t=yield m(this,B_,"f").execute("/browse",{client:"YTMUSIC",continuation:o,parse:!0}),e=null===(i=t.continuation_contents)||void 0===i?void 0:i.as(Cv),a=null===(s=null==e?void 0:e.contents)||void 0===s?void 0:s.as(pd,Hd),r=null===(n=null==a?void 0:a.matchCondition((t=>t.is(Hd))))||void 0===n?void 0:n.as(Hd);return{items:(null==r?void 0:r.contents)||[],continuation:(null==r?void 0:r.continuation)||null}}return{items:[],continuation:null}}))};const H_=F_;var $_,G_;$_=new WeakMap,G_=new WeakMap;const Y_=class{constructor(t,e){var i,s,n,o,a,r,l;$_.set(this,void 0),G_.set(this,void 0),f(this,$_,lb.parseResponse(t.data),"f"),f(this,G_,e,"f");const c=null===(i=m(this,$_,"f").header)||void 0===i?void 0:i.item();this.header=(null==c?void 0:c.is(Sd))?null===(o=null===(n=null===(s=m(this,$_,"f").header)||void 0===s?void 0:s.item().as(Sd).element)||void 0===n?void 0:n.model)||void 0===o?void 0:o.as(Nr):null===(a=m(this,$_,"f").header)||void 0===a?void 0:a.item().as(Cd);const h=null===(r=m(this,$_,"f").contents)||void 0===r?void 0:r.item().as(_m).tabs.firstOfType(ym);if(!h)throw new fb("Target tab not found");this.sections=null===(l=h.content)||void 0===l?void 0:l.as(xt).contents.as(ol,pd,Qo)}getPlaylist(){return d(this,void 0,void 0,(function*(){if(!this.header)throw new fb("Header not found");if(!this.header.is(Nr))throw new fb("Recap playlist not available, check back later.");const t=this.header.panels[0].text_on_tap_endpoint,e=yield t.call(m(this,G_,"f"),{client:"YTMUSIC"});return new H_(e,m(this,G_,"f"))}))}get page(){return m(this,$_,"f")}};var K_,q_,z_,X_,Q_;class J_{constructor(t,e,i){var s,n,o;if(K_.set(this,void 0),q_.set(this,void 0),z_.set(this,void 0),f(this,q_,e,"f"),f(this,K_,lb.parseResponse(t.data),"f"),!m(this,K_,"f").contents||!m(this,K_,"f").contents_memo)throw new fb("Response did not contain any contents.");const a=m(this,K_,"f").contents.item().as(Nm).tabs.get({selected:!0});if(!a)throw new fb("Could not find target tab.");const r=null===(s=a.content)||void 0===s?void 0:s.as(xt);if(!r)throw new fb("Target tab did not have any content.");this.header=null===(n=r.header)||void 0===n?void 0:n.as(Ss),this.contents=r.contents.as(Hd,jh,ol),i&&f(this,z_,null===(o=this.contents.firstOfType(Hd))||void 0===o?void 0:o.continuation,"f")}getMore(t){return d(this,void 0,void 0,(function*(){if(!t||!t.endpoint)throw new fb("Cannot retrieve more items for this shelf because it does not have an endpoint.");const e=yield t.endpoint.call(m(this,q_,"f"),{client:"YTMUSIC"});if(!e)throw new fb("Endpoint did not return any data");return new J_(e,m(this,q_,"f"),!0)}))}getContinuation(){return d(this,void 0,void 0,(function*(){if(!m(this,z_,"f"))throw new fb("Continuation not found.");const t=yield m(this,q_,"f").execute("/search",{continuation:m(this,z_,"f"),client:"YTMUSIC"});return new tb(m(this,q_,"f"),t)}))}applyFilter(t){var e,i;return d(this,void 0,void 0,(function*(){let s;if("string"==typeof t){if(s=null===(i=null===(e=this.header)||void 0===e?void 0:e.chips)||void 0===i?void 0:i.as(ws).get({text:t}),!s)throw new fb("Could not find filter with given name.",{available_filters:this.filters})}else(null==t?void 0:t.is(ws))&&(s=t);if(!s)throw new fb("Invalid filter",{available_filters:this.filters});if(null==s?void 0:s.is_selected)return this;if(!s.endpoint)throw new fb("Selected filter does not have an endpoint.");const n=yield s.endpoint.call(m(this,q_,"f"),{client:"YTMUSIC"});return new J_(n,m(this,q_,"f"),!0)}))}get filters(){var t,e;return(null===(e=null===(t=this.header)||void 0===t?void 0:t.chips)||void 0===e?void 0:e.as(ws).map((t=>t.text)))||[]}get has_continuation(){return!!m(this,z_,"f")}get did_you_mean(){var t;return null===(t=m(this,K_,"f").contents_memo)||void 0===t?void 0:t.getType(ma).first()}get showing_results_for(){var t;return null===(t=m(this,K_,"f").contents_memo)||void 0===t?void 0:t.getType(rm).first()}get message(){var t;return null===(t=m(this,K_,"f").contents_memo)||void 0===t?void 0:t.getType(Qo).first()}get songs(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(Hd).find((t=>"Songs"===t.title.toString()))}get videos(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(Hd).find((t=>"Videos"===t.title.toString()))}get albums(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(Hd).find((t=>"Albums"===t.title.toString()))}get artists(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(Hd).find((t=>"Artists"===t.title.toString()))}get playlists(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(Hd).find((t=>"Community playlists"===t.title.toString()))}get results(){var t,e;return null===(e=null===(t=this.contents)||void 0===t?void 0:t.firstOfType(Hd))||void 0===e?void 0:e.contents}get sections(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(Hd)}get page(){return m(this,K_,"f")}}K_=new WeakMap,q_=new WeakMap,z_=new WeakMap;const Z_=J_;class tb{constructor(t,e){var i,s;X_.set(this,void 0),Q_.set(this,void 0),f(this,X_,t,"f"),f(this,Q_,lb.parseResponse(e.data),"f"),this.header=null===(i=m(this,Q_,"f").header)||void 0===i?void 0:i.item().as(Cd),this.contents=null===(s=m(this,Q_,"f").continuation_contents)||void 0===s?void 0:s.as(kv)}getContinuation(){var t;return d(this,void 0,void 0,(function*(){if(!(null===(t=this.contents)||void 0===t?void 0:t.continuation))throw new fb("Continuation not found.");const e=yield m(this,X_,"f").execute("/search",{continuation:this.contents.continuation,client:"YTMUSIC"});return new tb(m(this,X_,"f"),e)}))}get has_continuation(){var t;return!!(null===(t=this.contents)||void 0===t?void 0:t.continuation)}get page(){return m(this,Q_,"f")}}X_=new WeakMap,Q_=new WeakMap;const eb=class extends h_{constructor(t,e,i){var s,n,o,a,r,l,c,h,d;super(t,e,i);const[u,p]=this.page;if(!(null===(s=u.microformat)||void 0===s?void 0:s.is(xh)))throw new fb("Invalid microformat",u.microformat);if(this.basic_info=Object.assign(Object.assign({},u.video_details),{description:null===(n=u.microformat)||void 0===n?void 0:n.description,is_unlisted:null===(o=u.microformat)||void 0===o?void 0:o.is_unlisted,is_family_safe:null===(a=u.microformat)||void 0===a?void 0:a.is_family_safe,url_canonical:null===(r=u.microformat)||void 0===r?void 0:r.url_canonical,tags:null===(l=u.microformat)||void 0===l?void 0:l.tags}),this.storyboards=u.storyboards,this.endscreen=u.endscreen,p){const t=null===(h=null===(c=p.contents_memo)||void 0===c?void 0:c.getType(Xf))||void 0===h?void 0:h[0];this.tabs=null==t?void 0:t.tabs.array().as(ym),this.current_video_endpoint=p.current_video_endpoint,this.player_overlays=null===(d=p.player_overlays)||void 0===d?void 0:d.item().as(Su)}}getTab(t){var e,i;return d(this,void 0,void 0,(function*(){if(!this.tabs)throw new fb("Could not find any tab");const s=this.tabs.get({title:t})||this.tabs.matchCondition((e=>{var i,s;return(null===(s=null===(i=e.endpoint.payload.browseEndpointContextSupportedConfigs)||void 0===i?void 0:i.browseEndpointContextMusicConfig)||void 0===s?void 0:s.pageType)===t}))||(null===(e=this.tabs)||void 0===e?void 0:e[0]);if(!s)throw new fb(`Tab "${t}" not found`,{available_tabs:this.available_tabs});if(s.content)return s.content;const n=yield s.endpoint.call(this.actions,{client:"YTMUSIC",parse:!0});if("Message"===(null===(i=n.contents)||void 0===i?void 0:i.item().type))return n.contents.item().as(Qo);if(!n.contents)throw new fb("Page contents was empty",n);return n.contents.item().as(xt).contents}))}getUpNext(t=!0){var e,i;return d(this,void 0,void 0,(function*(){const s=yield this.getTab("Up next");if(!s||!s.content)throw new fb("Music queue was empty, the video id is probably invalid.",s);const n=s.content.as(Ud);if(!n.playlist_id&&t){const t=n.contents.firstOfType(mi);if(!t)throw new fb("Automix item not found");const s=yield null===(e=t.playlist_video)||void 0===e?void 0:e.endpoint.call(this.actions,{videoId:this.basic_info.id,client:"YTMUSIC",parse:!0});if(!s||!s.contents_memo)throw new fb("Could not fetch automix");return null===(i=s.contents_memo.getType(Ud))||void 0===i?void 0:i[0]}return n}))}getRelated(){return d(this,void 0,void 0,(function*(){return yield this.getTab("MUSIC_PAGE_TYPE_TRACK_RELATED")}))}getLyrics(){return d(this,void 0,void 0,(function*(){return(yield this.getTab("MUSIC_PAGE_TYPE_TRACK_LYRICS")).firstOfType(fd)}))}addToWatchHistory(){const t=Object.create(null,{addToWatchHistory:{get:()=>super.addToWatchHistory}});return d(this,void 0,void 0,(function*(){return t.addToWatchHistory.call(this,T.YTMUSIC.NAME,T.YTMUSIC.VERSION,"https://music.")}))}get available_tabs(){return this.tabs?this.tabs.map((t=>t.title)):[]}};class ib extends my{constructor(t,e,i=!1){var s,n;super(t,e,i),this.header=null===(s=this.page.header)||void 0===s?void 0:s.item().as(Wi),this.contents=this.memo.getType(ol).first()||(null===(n=this.page.continuation_contents)||void 0===n?void 0:n.as(wv))}getContinuation(){var t;return d(this,void 0,void 0,(function*(){const e=yield this.actions.execute("/browse",{continuation:null===(t=this.contents)||void 0===t?void 0:t.continuation,client:"YTKIDS"});return new ib(this.actions,e)}))}get has_continuation(){var t;return!!(null===(t=this.contents)||void 0===t?void 0:t.continuation)}}const sb=ib;class nb extends my{constructor(t,e,i=!1){var s,n;super(t,e,i),this.header=null===(s=this.page.header)||void 0===s?void 0:s.item().as(iv),this.contents=null===(n=this.page.contents)||void 0===n?void 0:n.item().as(nv)}selectCategoryTab(t){var e;return d(this,void 0,void 0,(function*(){let i;if("string"==typeof t?i=null===(e=this.header)||void 0===e?void 0:e.category_tabs.find((e=>e.title.toString()===t)):(null==t?void 0:t.is(tv))&&(i=t),!i)throw new fb(`Tab "${t}" not found`);const s=yield i.endpoint.call(this.actions,{client:"YTKIDS",parse:!0});return s.header=this.page.header,s.header_memo=this.page.header_memo,new nb(this.actions,s,!0)}))}get categories(){var t;return(null===(t=this.header)||void 0===t?void 0:t.category_tabs.map((t=>t.title.toString())))||[]}}const ob=nb,ab=class extends my{constructor(t,e){super(t,e),this.estimated_results=this.page.estimated_results;const i=this.memo.getType(ol).first();if(!i)throw new fb("No item section found in search response.");this.contents=i.contents}},rb=class extends h_{constructor(t,e,i){var s,n,o,a,r;super(t,e,i);const[l,c]=this.page;this.basic_info=l.video_details,this.captions=l.captions;const h=null===(s=null==c?void 0:c.contents)||void 0===s?void 0:s.item().as(Tf),d=null==h?void 0:h.results,u=null==h?void 0:h.secondary_results;d&&u&&(this.slim_video_metadata=null===(o=null===(n=d.firstOfType(ol))||void 0===n?void 0:n.contents)||void 0===o?void 0:o.firstOfType(km),this.watch_next_feed=(null===(a=u.firstOfType(ol))||void 0===a?void 0:a.contents)||u,this.current_video_endpoint=null==c?void 0:c.current_video_endpoint,this.player_overlays=null===(r=null==c?void 0:c.player_overlays)||void 0===r?void 0:r.item().as(Su))}addToWatchHistory(){const t=Object.create(null,{addToWatchHistory:{get:()=>super.addToWatchHistory}});return d(this,void 0,void 0,(function*(){return t.addToWatchHistory.call(this)}))}},lb=i;var cb;cb=new WeakMap;const hb=class{constructor(t,e,i,s){var n,o,a,r,l,c,h,d,u,p,v,y,g,_,w,S,T,C,I,k,E,R,A,M,P,O,D,N,L,B,V,U,W,F,H,G,Y;cb.set(this,void 0),f(this,cb,new $(t),"f"),this.id=s||(null===(l=null===(r=null===(a=null===(o=null===(n=m(this,cb,"f"))||void 0===n?void 0:n.runs)||void 0===o?void 0:o[0])||void 0===a?void 0:a.endpoint)||void 0===r?void 0:r.payload)||void 0===l?void 0:l.browseId)||(null===(d=null===(h=null===(c=m(this,cb,"f"))||void 0===c?void 0:c.endpoint)||void 0===h?void 0:h.payload)||void 0===d?void 0:d.browseId)||"N/A",this.name=(null===(u=m(this,cb,"f"))||void 0===u?void 0:u.text)||"N/A",this.thumbnails=i?j.fromResponse(i):[],this.endpoint=(null===(y=null===(v=null===(p=m(this,cb,"f"))||void 0===p?void 0:p.runs)||void 0===v?void 0:v[0])||void 0===y?void 0:y.endpoint)||(null===(g=m(this,cb,"f"))||void 0===g?void 0:g.endpoint),this.badges=Array.isArray(e)?lb.parseArray(e):b([]),this.is_moderator=null===(_=this.badges)||void 0===_?void 0:_.some((t=>"MODERATOR"==t.icon_type)),this.is_verified=null===(w=this.badges)||void 0===w?void 0:w.some((t=>"BADGE_STYLE_TYPE_VERIFIED"==t.style)),this.is_verified_artist=null===(S=this.badges)||void 0===S?void 0:S.some((t=>"BADGE_STYLE_TYPE_VERIFIED_ARTIST"==t.style)),this.url="/browse"===(null===(E=null===(k=null===(I=null===(C=null===(T=m(this,cb,"f"))||void 0===T?void 0:T.runs)||void 0===C?void 0:C[0])||void 0===I?void 0:I.endpoint)||void 0===k?void 0:k.metadata)||void 0===E?void 0:E.api_url)&&`${x.YT_BASE}${(null===(O=null===(P=null===(M=null===(A=null===(R=m(this,cb,"f"))||void 0===R?void 0:R.runs)||void 0===A?void 0:A[0])||void 0===M?void 0:M.endpoint)||void 0===P?void 0:P.payload)||void 0===O?void 0:O.canonicalBaseUrl)||`/u/${null===(V=null===(B=null===(L=null===(N=null===(D=m(this,cb,"f"))||void 0===D?void 0:D.runs)||void 0===N?void 0:N[0])||void 0===L?void 0:L.endpoint)||void 0===B?void 0:B.payload)||void 0===V?void 0:V.browseId}`}`||`${x.YT_BASE}${(null===(F=null===(W=null===(U=m(this,cb,"f"))||void 0===U?void 0:U.endpoint)||void 0===W?void 0:W.payload)||void 0===F?void 0:F.canonicalBaseUrl)||`/u/${null===(Y=null===(G=null===(H=m(this,cb,"f"))||void 0===H?void 0:H.endpoint)||void 0===G?void 0:G.payload)||void 0===Y?void 0:Y.browseId}`}`}get best_thumbnail(){return this.thumbnails[0]}},db={desktop:["Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.3 Safari/605.1.15","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.61","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Safari/605.1.15","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36"],mobile:["Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; SM-G990U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-G998B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) FxiOS/108.1  Mobile/15E148 Safari/605.1.15","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 11_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15G77 ChannelId(73) NebulaSDK/1.8.100112 Nebula PSDType(1) AlipayDefined(nt:4G,ws:320|504|2.0) AliApp(AP/10.1.30.300) AlipayClient/10.1.30.300 Alipay Language/zh-Hans","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 13; SM-N981U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-A515F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; M2010J19SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 15_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.5 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 11; M2102J20SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1"]};var ub,pb;class mb{static load(t){f(mb,ub,t,"f",pb)}static get shim(){if(!m(mb,ub,"f",pb))throw new Error("Platform is not loaded");return m(mb,ub,"f",pb)}}ub=mb,pb={value:void 0};class fb extends Error{constructor(t,e){super(t),e&&(this.info=e),this.date=new Date,this.version=mb.shim.info.version}}class vb extends fb{}class yb extends fb{}class gb extends fb{}class _b extends Error{}class bb extends Error{}class wb extends Error{}function xb(t,e){return Reflect.ownKeys(t).some((i=>{const s=e[i]instanceof $;return s||"object"!=typeof e[i]?t[i]===(s?e[i].toString():e[i]):JSON.stringify(t[i])===JSON.stringify(e[i])}))}function Sb(t,e,i){const s=new RegExp(`${Tb(e)}(.*?)${Tb(i)}`,"s"),n=t.match(s);return n?n[1]:void 0}function Tb(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Cb(t){const e=db[t];return e[Math.floor(Math.random()*e.length)]}function Ib(t){const e=[];for(let i=0;i<t;i++)e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(Math.floor(64*Math.random())));return e.join("")}function kb(t){const e=t.split(":").map((t=>parseInt(t.replace(/\D/g,""))));switch(e.length){case 1:return e[0];case 2:return 60*e[0]+e[1];case 3:return 3600*e[0]+60*e[1]+e[2];default:throw new Error("Invalid time string")}}function Eb(t){for(const[e,i]of Object.entries(t))if(!i)throw new yb(`${e} is missing`)}function Rb(t){return btoa(String.fromCharCode.apply(null,Array.from(t)))}function Ab(t){return!("emoji"in t)}const Mb=JSON.parse('{"i8":"6.4.1","eN":{"H":"https://github.com/LuanRT/YouTube.js/issues"},"Xh":"https://github.com/LuanRT/YouTube.js#readme"}');class Pb{constructor(t,e){this.node=t,this.visitor=e}run(){}}class Ob extends Pb{run(){return this.node.elements.map((t=>this.visitor.visitNode(t)))}}const Db=(t,e)=>Object.defineProperty(e,"name",{value:t});class Nb extends Pb{run(){const{params:t,body:e}=this.node;return Db("anonymous function",(i=>{let s=0;for(const e of t)this.visitor.visitNode(e),"Identifier"===e.type?this.visitor.scope.set(e.name,i[s]):console.warn("Unhandled param type",e.type),s++;return this.visitor.visitNode(e)}))}}class Lb extends Pb{run(){const t=this.node.operator,e=this.visitor.visitNode(this.node.right);switch(t){case"=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]=e;if("Identifier"===this.node.left.type)return this.visitor.scope.set(this.node.left.name,e),this.visitor.scope.get(this.node.left.name);console.warn("Unhandled left node",this.node.left);break;case"+=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]+=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)+e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"-=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]-=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)-e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"*=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]*=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)*e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"/=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]/=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)/e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"%=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]%=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)%e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"**=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]**=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)**e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"<<=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]<<=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)<<e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case">>=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]>>=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)>>e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case">>>=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]>>>=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)>>>e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"&=":if("MemberExpression"===this.node.left.type)return this.visitor.visitNode(this.node.left.object)[this.visitor.visitNode(this.node.left.property)]&=e;if("Identifier"===this.node.left.type){const t=this.visitor.visitNode(this.node.left)&e;return this.visitor.scope.set(this.node.left.name,t),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left)}}}class Bb extends Pb{run(){const t=this.node.operator,e=this.visitor.visitNode(this.node.left),i=this.visitor.visitNode(this.node.right);switch(t){case"!=":return e!=i;case"!==":return e!==i;case"%":return e%i;case"&":return e&i;case"*":return e*i;case"**":return e**i;case"+":return e+i;case"-":return e-i;case"/":return e/i;case"<":return e<i;case"<<":return e<<i;case"<=":return e<=i;case"==":return e==i;case"===":return e===i;case">":return e>i;case">=":return e>=i;case">>":return e>>i;case">>>":return e>>>i;case"^":return e^i;case"|":return e|i;case"in":return e in i;case"instanceof":return e instanceof i}}}class Vb extends Pb{run(){for(const t of this.node.body){const e=this.visitor.visitNode(t);if("ReturnStatement"===t.type)return e;if("break"===e||"continue"===e)return e;if(("WhileStatement"===t.type||"IfStatement"===t.type||"ForStatement"===t.type||"TryStatement"===t.type)&&e)return e}}}class Ub extends Pb{run(){return"break"}}var jb,Wb,Fb=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};class Hb extends Pb{constructor(){super(...arguments),jb.add(this)}run(){let t,e;if("MemberExpression"===this.node.callee.type?(t=this.visitor.getName(this.node.callee.object),e=this.visitor.getName(this.node.callee.property)):"Identifier"===this.node.callee.type&&(e=this.node.callee.name),t&&this.visitor.listeners[t]){const e=this.visitor.listeners[t](this.node,this.visitor);if("proceed"!==e)return e}if(e&&"toString"!==e&&this.visitor.listeners[e]){const t=this.visitor.listeners[e](this.node,this.visitor);if("proceed"!==t)return t}if("MemberExpression"===this.node.callee.type){if($b.has(this.node,this.visitor))return $b.execute(this.node,this.visitor);const t=this.visitor.visitNode(this.node.callee.object),e=this.node.callee.computed?this.visitor.visitNode(this.node.callee.property):this.visitor.getName(this.node.callee.property),i=this.node.arguments.map((t=>this.visitor.visitNode(t)));return"function"!=typeof t[e]&&Fb(this,jb,"m",Wb).call(this),t[e].toString().includes("[native code]")?t[e](...i):t[e](i)}const i=this.visitor.visitNode(this.node.callee),s=this.node.arguments.map((t=>this.visitor.visitNode(t)));return"function"!=typeof i&&Fb(this,jb,"m",Wb).call(this),i(s)}}jb=new WeakSet,Wb=function(){if("MemberExpression"===this.node.callee.type)throw new Error(`${"Identifier"===this.node.callee.object.type?this.node.callee.object.name:"<object>"}.${"Identifier"===this.node.callee.property.type?this.node.callee.property.name:"?"} is not a function`);if("Identifier"===this.node.callee.type)throw new Error(`${this.node.callee.name} is not a function`);if("SequenceExpression"===this.node.callee.type){const t=[],e=[];throw t.push("("),this.node.callee.expressions.forEach((t=>{"Literal"===t.type?e.push(t.raw||""):"Identifier"===t.type?e.push(t.name):"MemberExpression"===t.type&&(t.computed?e.push(`${this.visitor.getName(t.object)}[${this.visitor.getName(t.property)||"..."}]`):e.push(`${this.visitor.getName(t.object)}.${this.visitor.getName(t.property)}`))})),t.push(e.join(", ")),t.push(")"),new Error(`${t.join("")} is not a function`)}};class $b{static has(t,e){var i;return"MemberExpression"===t.callee.type&&!!(null===(i=this.builtins)||void 0===i?void 0:i[e.getName(t.callee.property)||""])}static execute(t,e){if("MemberExpression"===t.callee.type)return this.builtins[e.getName(t.callee.property)||""](t,e)}}$b.builtins={forEach:(t,e)=>{const i=t.arguments.map((t=>e.visitNode(t)));if("MemberExpression"===t.callee.type){const s=e.visitNode(t.callee.object);i.length>1&&e.scope.set("_this",i.slice(-1)[0]);let n=0;for(const t of s)i[0]([t,n++,s])}else console.warn("Unhandled callee type:",t.callee.type)},toString:(t,e)=>{if("MemberExpression"===t.callee.type)return e.visitNode(t.callee.object).toString()}};class Gb extends Pb{run(){const{test:t,consequent:e,alternate:i}=this.node;return this.visitor.visitNode(t)?this.visitor.visitNode(e):this.visitor.visitNode(i)}}class Yb extends Pb{run(){return"continue"}}class Kb extends Pb{run(){return this.visitor.visitNode(this.node.expression)}}class qb extends Pb{run(){this.visitor.visitNode(this.node.left);const t=this.visitor.visitNode(this.node.right);for(const e of t){if("VariableDeclaration"===this.node.left.type&&"Identifier"===this.node.left.declarations[0].id.type)this.visitor.scope.set(this.node.left.declarations[0].id.name,e);else if("VariableDeclaration"===this.node.left.type&&"ObjectPattern"===this.node.left.declarations[0].id.type)for(const t of this.node.left.declarations[0].id.properties)"Property"===t.type&&"Identifier"===t.value.type&&"Identifier"===t.key.type&&this.visitor.scope.set(t.value.name,e[t.key.name]);const t=this.visitor.visitNode(this.node.body);if("break"===t)break;if("continue"!==t&&t&&"ExpressionStatement"!==this.node.body.type)return t}}}class zb extends Pb{run(){this.node.init&&this.visitor.visitNode(this.node.init);const t=()=>!this.node.test||this.visitor.visitNode(this.node.test);for(;t();){const t=this.visitor.visitNode(this.node.body);if("continue"!==t){if("break"===t)break;if(this.node.update&&this.visitor.visitNode(this.node.update),t&&"ExpressionStatement"!==this.node.body.type)return t}}}}class Xb extends Pb{run(){const{params:t,body:e}=this.node,i=this.visitor.visitNode(this.node.id),s=Db(i,(i=>{let s=0;for(const e of t)this.visitor.visitNode(e),"Identifier"===e.type?this.visitor.scope.set(e.name,i[s]):console.warn("Unhandled param type",e.type),s++;return this.visitor.visitNode(e)}));this.visitor.scope.set(i,s)}}class Qb extends Pb{run(){const{params:t,body:e}=this.node;return Db("anonymous function",(i=>{let s=0;for(const e of t)this.visitor.visitNode(e),"Identifier"===e.type?this.visitor.scope.set(e.name,i[s]):console.warn("Unhandled param type",e.type),s++;return this.visitor.visitNode(e)}))}}class Jb extends Pb{run(){if(this.visitor.listeners[this.node.name]){const t=this.visitor.listeners[this.node.name](this.node,this.visitor);if("proceed"!==t)return t}return this.visitor.scope.has(this.node.name)?this.visitor.scope.get(this.node.name):this.node.name}}class Zb extends Pb{run(){return this.visitor.visitNode(this.node.test)?this.visitor.visitNode(this.node.consequent):this.node.alternate?this.visitor.visitNode(this.node.alternate):void 0}}class tw extends Pb{run(){return this.node.value}}class ew extends Pb{run(){switch(this.node.operator){case"&&":{const t=this.visitor.visitNode(this.node.left);return!0===t?this.visitor.visitNode(this.node.right):t}case"||":return this.visitor.visitNode(this.node.left)||this.visitor.visitNode(this.node.right);case"??":{const t=this.visitor.visitNode(this.node.left);return null!=t?t:this.visitor.visitNode(this.node.right)}}}}class iw extends Pb{run(){const{object:t,property:e,computed:i}=this.node,s=this.visitor.visitNode(t),n=i?this.visitor.visitNode(e):this.visitor.getName(e);if(void 0!==n||null!==n){if(this.visitor.listeners[n]){const t=this.visitor.listeners[n](this.node,this.visitor);if("proceed"!==t)return t}return null==s?void 0:s[n]}}}class sw extends Pb{run(){return new(this.visitor.visitNode(this.node.callee))(this.node.arguments.map((t=>this.visitor.visitNode(t))))}}class nw extends Pb{run(){let t={};for(const e of this.node.properties){if("Property"!==e.type)throw new Error(`Unhandled property type: ${e.type}`);t=Object.assign(Object.assign({},t),this.visitor.visitNode(e))}return t}}var ow,aw,rw,lw,cw=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};class hw extends Pb{constructor(){super(...arguments),ow.add(this)}run(){switch(this.node.kind){case"init":return cw(this,ow,"m",aw).call(this);case"get":return cw(this,ow,"m",rw).call(this);case"set":return cw(this,ow,"m",lw).call(this);default:throw new Error(`Unhandled property kind: ${this.node.kind}`)}}}ow=new WeakSet,aw=function(){const t=this.node.computed?this.visitor.visitNode(this.node.key):this.visitor.getName(this.node.key),e=this.visitor.visitNode(this.node.value);if(t)return{[t]:e}},rw=function(){throw new TypeError("Not implemented: Property.get")},lw=function(){throw new TypeError("Not implemented: Property.set")};class dw extends Pb{run(){if(this.node.argument)return this.visitor.visitNode(this.node.argument)}}class uw extends Pb{run(){let t;for(const e of this.node.expressions)t=this.visitor.visitNode(e);return t}}class pw extends Pb{run(){for(const t of this.node.consequent){const e=this.visitor.visitNode(t);if("ContinueStatement"===t.type||"BreakStatement"===t.type)return e}}}class mw extends Pb{run(){const t=this.visitor.visitNode(this.node.discriminant);let e=!1,i=-1,s=0;for(;;){const n=this.node.cases[s];if(e){const t=this.visitor.visitNode(n);if("break"===t)break;if("continue"===t)return t;if(++s,s>=this.node.cases.length){s=0;break}}else{if(e=n&&t===this.visitor.visitNode(n.test),void 0===e&&s>this.node.cases.length)break;!n||e||n.test?n||e||-1===i?e||++s:(e=!0,s=i):(i=s,s+=1)}}}}class fw extends Pb{run(){return this.visitor.scope.get("_this")}}class vw extends Pb{run(){throw this.visitor.visitNode(this.node.argument)}}class yw extends Pb{run(){try{return this.visitor.visitNode(this.node.block)}catch(t){if(this.node.handler)return this.node.handler.param&&"Identifier"===this.node.handler.param.type&&this.visitor.scope.set(this.node.handler.param.name,t),this.visitor.visitNode(this.node.handler.body)}finally{this.visitor.visitNode(this.node.finalizer)}}}class gw extends Pb{run(){const t=this.node.operator;switch(t){case"-":return-this.visitor.visitNode(this.node.argument);case"+":return+this.visitor.visitNode(this.node.argument);case"!":return!this.visitor.visitNode(this.node.argument);case"~":return~this.visitor.visitNode(this.node.argument);case"void":return void this.visitor.visitNode(this.node.argument);case"typeof":return typeof this.visitor.visitNode(this.node.argument);case"delete":return"MemberExpression"===this.node.argument.type?delete this.visitor.visitNode(this.node.argument.object)[this.node.argument.computed?this.visitor.visitNode(this.node.argument.property):this.visitor.getName(this.node.argument.property)]:"Identifier"!==this.node.argument.type||this.visitor.scope.delete(this.node.argument.name);default:console.warn("Unhandled UnaryExpression operator",t)}}}class _w extends Pb{run(){switch(this.node.operator){case"++":if("MemberExpression"===this.node.argument.type)return this.visitor.visitNode(this.node.argument.object)[this.visitor.visitNode(this.node.argument.property)]++;if("Identifier"===this.node.argument.type){let t=this.visitor.visitNode(this.node.argument);return this.visitor.scope.set(this.node.argument.name,t+1),this.node.prefix?++t:t}break;case"--":if("MemberExpression"===this.node.argument.type)return this.visitor.visitNode(this.node.argument.object)[this.visitor.visitNode(this.node.argument.property)]--;if("Identifier"===this.node.argument.type){let t=this.visitor.visitNode(this.node.argument);return this.visitor.scope.set(this.node.argument.name,t-1),this.node.prefix?--t:t}}}}class bw extends Pb{run(){this.node.declarations.forEach((t=>{const{id:e,init:i}=t,s=this.visitor.getName(e),n=i?this.visitor.visitNode(i):void 0;s&&this.visitor.scope.set(s,n),"object"==typeof n&&null!==n&&this.visitor.scope.set("_this",n)}))}}class ww extends Pb{run(){for(;this.visitor.visitNode(this.node.test);){const t=this.visitor.visitNode(this.node.body);if("break"===t)break;if("continue"!==t&&t)return t}}}var xw,Sw;class Tw{constructor(t){xw.add(this),this.scope=new Map,this.listeners={},this.ast=t}run(){let t;for(const e of this.ast)t=this.visitNode(e);return t}visitNode(t){if(!t)return null;const e=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)}(this,xw,"m",Sw).call(this,t.type);return e?new e(t,this).run():void 0}getName(t){return"Identifier"===t.type?t.name:"Literal"===t.type?t.value:void 0}on(t,e){this.listeners[t]=e}}xw=new WeakSet,Sw=function(t){const e=h[t];return e||console.warn("[JINTER]:",`JavaScript node "${t}" not implemented!\nIf this is causing unexpected behavior, please report it at https://github.com/LuanRT/Jinter/issues/new`),e};var Cw=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],Iw=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],kw="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ew={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Rw="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Aw={5:Rw,"5module":Rw+" export import",6:Rw+" const class extends export import super"},Mw=/^in(stanceof)?$/,Pw=new RegExp("["+kw+"]"),Ow=new RegExp("["+kw+"‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･]");function Dw(t,e){for(var i=65536,s=0;s<e.length;s+=2){if((i+=e[s])>t)return!1;if((i+=e[s+1])>=t)return!0}return!1}function Nw(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&Pw.test(String.fromCharCode(t)):!1!==e&&Dw(t,Iw)))}function Lw(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&Ow.test(String.fromCharCode(t)):!1!==e&&(Dw(t,Iw)||Dw(t,Cw)))))}var Bw=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function Vw(t,e){return new Bw(t,{beforeExpr:!0,binop:e})}var Uw={beforeExpr:!0},jw={startsExpr:!0},Ww={};function Fw(t,e){return void 0===e&&(e={}),e.keyword=t,Ww[t]=new Bw(t,e)}var Hw={num:new Bw("num",jw),regexp:new Bw("regexp",jw),string:new Bw("string",jw),name:new Bw("name",jw),privateId:new Bw("privateId",jw),eof:new Bw("eof"),bracketL:new Bw("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Bw("]"),braceL:new Bw("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Bw("}"),parenL:new Bw("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Bw(")"),comma:new Bw(",",Uw),semi:new Bw(";",Uw),colon:new Bw(":",Uw),dot:new Bw("."),question:new Bw("?",Uw),questionDot:new Bw("?."),arrow:new Bw("=>",Uw),template:new Bw("template"),invalidTemplate:new Bw("invalidTemplate"),ellipsis:new Bw("...",Uw),backQuote:new Bw("`",jw),dollarBraceL:new Bw("${",{beforeExpr:!0,startsExpr:!0}),eq:new Bw("=",{beforeExpr:!0,isAssign:!0}),assign:new Bw("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Bw("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Bw("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Vw("||",1),logicalAND:Vw("&&",2),bitwiseOR:Vw("|",3),bitwiseXOR:Vw("^",4),bitwiseAND:Vw("&",5),equality:Vw("==/!=/===/!==",6),relational:Vw("</>/<=/>=",7),bitShift:Vw("<</>>/>>>",8),plusMin:new Bw("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Vw("%",10),star:Vw("*",10),slash:Vw("/",10),starstar:new Bw("**",{beforeExpr:!0}),coalesce:Vw("??",1),_break:Fw("break"),_case:Fw("case",Uw),_catch:Fw("catch"),_continue:Fw("continue"),_debugger:Fw("debugger"),_default:Fw("default",Uw),_do:Fw("do",{isLoop:!0,beforeExpr:!0}),_else:Fw("else",Uw),_finally:Fw("finally"),_for:Fw("for",{isLoop:!0}),_function:Fw("function",jw),_if:Fw("if"),_return:Fw("return",Uw),_switch:Fw("switch"),_throw:Fw("throw",Uw),_try:Fw("try"),_var:Fw("var"),_const:Fw("const"),_while:Fw("while",{isLoop:!0}),_with:Fw("with"),_new:Fw("new",{beforeExpr:!0,startsExpr:!0}),_this:Fw("this",jw),_super:Fw("super",jw),_class:Fw("class",jw),_extends:Fw("extends",Uw),_export:Fw("export"),_import:Fw("import",jw),_null:Fw("null",jw),_true:Fw("true",jw),_false:Fw("false",jw),_in:Fw("in",{beforeExpr:!0,binop:7}),_instanceof:Fw("instanceof",{beforeExpr:!0,binop:7}),_typeof:Fw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Fw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Fw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},$w=/\r\n?|\n|\u2028|\u2029/,Gw=new RegExp($w.source,"g");function Yw(t){return 10===t||13===t||8232===t||8233===t}function Kw(t,e,i){void 0===i&&(i=t.length);for(var s=e;s<i;s++){var n=t.charCodeAt(s);if(Yw(n))return s<i-1&&13===n&&10===t.charCodeAt(s+1)?s+2:s+1}return-1}var qw=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,zw=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Xw=Object.prototype,Qw=Xw.hasOwnProperty,Jw=Xw.toString,Zw=Object.hasOwn||function(t,e){return Qw.call(t,e)},tx=Array.isArray||function(t){return"[object Array]"===Jw.call(t)},ex=Object.create(null);function ix(t){return ex[t]||(ex[t]=new RegExp("^(?:"+t.replace(/ /g,"|")+")$"))}function sx(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}var nx=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,ox=function(t,e){this.line=t,this.column=e};ox.prototype.offset=function(t){return new ox(this.line,this.column+t)};var ax=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)};function rx(t,e){for(var i=1,s=0;;){var n=Kw(t,s,e);if(n<0)return new ox(i,e-s);++i,s=n}}var lx={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},cx=!1;function hx(t,e){return 2|(t?4:0)|(e?8:0)}var dx=function(t,e,i){this.options=t=function(t){var e={};for(var i in lx)e[i]=t&&Zw(t,i)?t[i]:lx[i];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!cx&&"object"==typeof console&&console.warn&&(cx=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),t&&null!=t.allowHashBang||(e.allowHashBang=e.ecmaVersion>=14),tx(e.onToken)){var s=e.onToken;e.onToken=function(t){return s.push(t)}}return tx(e.onComment)&&(e.onComment=function(t,e){return function(i,s,n,o,a,r){var l={type:i?"Block":"Line",value:s,start:n,end:o};t.locations&&(l.loc=new ax(this,a,r)),t.ranges&&(l.range=[n,o]),e.push(l)}}(e,e.onComment)),e}(t),this.sourceFile=t.sourceFile,this.keywords=ix(Aw[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var s="";!0!==t.allowReserved&&(s=Ew[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(s+=" await")),this.reservedWords=ix(s);var n=(s?s+" ":"")+Ew.strict;this.reservedWordsStrict=ix(n),this.reservedWordsStrictBind=ix(n+" "+Ew.strictBind),this.input=String(e),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split($w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Hw.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},ux={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};dx.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},ux.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},ux.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},ux.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},ux.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||256&e.flags)return!1;if(2&e.flags)return(4&e.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},ux.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(64&e)>0||i||this.options.allowSuperOutsideMethod},ux.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},ux.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},ux.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(258&e)>0||i},ux.inClassStaticBlock.get=function(){return(256&this.currentVarScope().flags)>0},dx.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i=this,s=0;s<t.length;s++)i=t[s](i);return i},dx.parse=function(t,e){return new this(e,t).parse()},dx.parseExpressionAt=function(t,e,i){var s=new this(i,t,e);return s.nextToken(),s.parseExpression()},dx.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(dx.prototype,ux);var px=dx.prototype,mx=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;px.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){zw.lastIndex=t,t+=zw.exec(this.input)[0].length;var e=mx.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){zw.lastIndex=t+e[0].length;var i=zw.exec(this.input),s=i.index+i[0].length,n=this.input.charAt(s);return";"===n||"}"===n||$w.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(n)||"!"===n&&"="===this.input.charAt(s+1))}t+=e[0].length,zw.lastIndex=t,t+=zw.exec(this.input)[0].length,";"===this.input[t]&&t++}},px.eat=function(t){return this.type===t&&(this.next(),!0)},px.isContextual=function(t){return this.type===Hw.name&&this.value===t&&!this.containsEsc},px.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},px.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},px.canInsertSemicolon=function(){return this.type===Hw.eof||this.type===Hw.braceR||$w.test(this.input.slice(this.lastTokEnd,this.start))},px.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},px.semicolon=function(){this.eat(Hw.semi)||this.insertSemicolon()||this.unexpected()},px.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},px.expect=function(t){this.eat(t)||this.unexpected()},px.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")};var fx=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};px.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,e?"Assigning to rvalue":"Parenthesized pattern")}},px.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,s=t.doubleProto;if(!e)return i>=0||s>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),s>=0&&this.raiseRecoverable(s,"Redefinition of __proto__ property")},px.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},px.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var vx=dx.prototype;vx.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==Hw.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var s=0,n=Object.keys(this.undefinedExports);s<n.length;s+=1){var o=n[s];this.raiseRecoverable(this.undefinedExports[o].start,"Export '"+o+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var yx={kind:"loop"},gx={kind:"switch"};vx.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;zw.lastIndex=this.pos;var e=zw.exec(this.input),i=this.pos+e[0].length,s=this.input.charCodeAt(i);if(91===s||92===s)return!0;if(t)return!1;if(123===s||s>55295&&s<56320)return!0;if(Nw(s,!0)){for(var n=i+1;Lw(s=this.input.charCodeAt(n),!0);)++n;if(92===s||s>55295&&s<56320)return!0;var o=this.input.slice(i,n);if(!Mw.test(o))return!0}return!1},vx.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;zw.lastIndex=this.pos;var t,e=zw.exec(this.input),i=this.pos+e[0].length;return!($w.test(this.input.slice(this.pos,i))||"function"!==this.input.slice(i,i+8)||i+8!==this.input.length&&(Lw(t=this.input.charCodeAt(i+8))||t>55295&&t<56320))},vx.parseStatement=function(t,e,i){var s,n=this.type,o=this.startNode();switch(this.isLet(t)&&(n=Hw._var,s="let"),n){case Hw._break:case Hw._continue:return this.parseBreakContinueStatement(o,n.keyword);case Hw._debugger:return this.parseDebuggerStatement(o);case Hw._do:return this.parseDoStatement(o);case Hw._for:return this.parseForStatement(o);case Hw._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1,!t);case Hw._class:return t&&this.unexpected(),this.parseClass(o,!0);case Hw._if:return this.parseIfStatement(o);case Hw._return:return this.parseReturnStatement(o);case Hw._switch:return this.parseSwitchStatement(o);case Hw._throw:return this.parseThrowStatement(o);case Hw._try:return this.parseTryStatement(o);case Hw._const:case Hw._var:return s=s||this.value,t&&"var"!==s&&this.unexpected(),this.parseVarStatement(o,s);case Hw._while:return this.parseWhileStatement(o);case Hw._with:return this.parseWithStatement(o);case Hw.braceL:return this.parseBlock(!0,o);case Hw.semi:return this.parseEmptyStatement(o);case Hw._export:case Hw._import:if(this.options.ecmaVersion>10&&n===Hw._import){zw.lastIndex=this.pos;var a=zw.exec(this.input),r=this.pos+a[0].length,l=this.input.charCodeAt(r);if(40===l||46===l)return this.parseExpressionStatement(o,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===Hw._import?this.parseImport(o):this.parseExport(o,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(o,!0,!t);var c=this.value,h=this.parseExpression();return n===Hw.name&&"Identifier"===h.type&&this.eat(Hw.colon)?this.parseLabeledStatement(o,c,h,t):this.parseExpressionStatement(o,h)}},vx.parseBreakContinueStatement=function(t,e){var i="break"===e;this.next(),this.eat(Hw.semi)||this.insertSemicolon()?t.label=null:this.type!==Hw.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var s=0;s<this.labels.length;++s){var n=this.labels[s];if(null==t.label||n.name===t.label.name){if(null!=n.kind&&(i||"loop"===n.kind))break;if(t.label&&i)break}}return s===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},vx.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},vx.parseDoStatement=function(t){return this.next(),this.labels.push(yx),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(Hw._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Hw.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},vx.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(yx),this.enterScope(0),this.expect(Hw.parenL),this.type===Hw.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===Hw._var||this.type===Hw._const||i){var s=this.startNode(),n=i?"let":this.value;return this.next(),this.parseVar(s,!0,n),this.finishNode(s,"VariableDeclaration"),(this.type===Hw._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===s.declarations.length?(this.options.ecmaVersion>=9&&(this.type===Hw._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,s)):(e>-1&&this.unexpected(e),this.parseFor(t,s))}var o=this.isContextual("let"),a=!1,r=new fx,l=this.parseExpression(!(e>-1)||"await",r);return this.type===Hw._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===Hw._in?e>-1&&this.unexpected(e):t.await=e>-1),o&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,r),this.checkLValPattern(l),this.parseForIn(t,l)):(this.checkExpressionErrors(r,!0),e>-1&&this.unexpected(e),this.parseFor(t,l))},vx.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,bx|(i?0:wx),!1,e)},vx.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(Hw._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},vx.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Hw.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},vx.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(Hw.braceL),this.labels.push(gx),this.enterScope(0);for(var i=!1;this.type!==Hw.braceR;)if(this.type===Hw._case||this.type===Hw._default){var s=this.type===Hw._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),s?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(Hw.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},vx.parseThrowStatement=function(t){return this.next(),$w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var _x=[];vx.parseCatchClauseParam=function(){var t=this.parseBindingAtom(),e="Identifier"===t.type;return this.enterScope(e?32:0),this.checkLValPattern(t,e?4:2),this.expect(Hw.parenR),t},vx.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===Hw._catch){var e=this.startNode();this.next(),this.eat(Hw.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(Hw._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},vx.parseVarStatement=function(t,e,i){return this.next(),this.parseVar(t,!1,e,i),this.semicolon(),this.finishNode(t,"VariableDeclaration")},vx.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(yx),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},vx.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},vx.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},vx.parseLabeledStatement=function(t,e,i,s){for(var n=0,o=this.labels;n<o.length;n+=1)o[n].name===e&&this.raise(i.start,"Label '"+e+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===Hw._switch?"switch":null,r=this.labels.length-1;r>=0;r--){var l=this.labels[r];if(l.statementStart!==t.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(s?-1===s.indexOf("label")?s+"label":s:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},vx.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},vx.parseBlock=function(t,e,i){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(Hw.braceL),t&&this.enterScope(0);this.type!==Hw.braceR;){var s=this.parseStatement(null);e.body.push(s)}return i&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},vx.parseFor=function(t,e){return t.init=e,this.expect(Hw.semi),t.test=this.type===Hw.semi?null:this.parseExpression(),this.expect(Hw.semi),t.update=this.type===Hw.parenR?null:this.parseExpression(),this.expect(Hw.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},vx.parseForIn=function(t,e){var i=this.type===Hw._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!i||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(Hw.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")},vx.parseVar=function(t,e,i,s){for(t.declarations=[],t.kind=i;;){var n=this.startNode();if(this.parseVarId(n,i),this.eat(Hw.eq)?n.init=this.parseMaybeAssign(e):s||"const"!==i||this.type===Hw._in||this.options.ecmaVersion>=6&&this.isContextual("of")?s||"Identifier"===n.id.type||e&&(this.type===Hw._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(Hw.comma))break}return t},vx.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?1:2,!1)};var bx=1,wx=2;function xx(t,e){var i=e.key.name,s=t[i],n="true";return"MethodDefinition"!==e.type||"get"!==e.kind&&"set"!==e.kind||(n=(e.static?"s":"i")+e.kind),"iget"===s&&"iset"===n||"iset"===s&&"iget"===n||"sget"===s&&"sset"===n||"sset"===s&&"sget"===n?(t[i]="true",!1):!!s||(t[i]=n,!1)}function Sx(t,e){var i=t.computed,s=t.key;return!i&&("Identifier"===s.type&&s.name===e||"Literal"===s.type&&s.value===e)}vx.parseFunction=function(t,e,i,s,n){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!s)&&(this.type===Hw.star&&e&wx&&this.unexpected(),t.generator=this.eat(Hw.star)),this.options.ecmaVersion>=8&&(t.async=!!s),e&bx&&(t.id=4&e&&this.type!==Hw.name?null:this.parseIdent(),!t.id||e&wx||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var o=this.yieldPos,a=this.awaitPos,r=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(hx(t.async,t.generator)),e&bx||(t.id=this.type===Hw.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1,n),this.yieldPos=o,this.awaitPos=a,this.awaitIdentPos=r,this.finishNode(t,e&bx?"FunctionDeclaration":"FunctionExpression")},vx.parseFunctionParams=function(t){this.expect(Hw.parenL),t.params=this.parseBindingList(Hw.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},vx.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var s=this.enterClassBody(),n=this.startNode(),o=!1;for(n.body=[],this.expect(Hw.braceL);this.type!==Hw.braceR;){var a=this.parseClassElement(null!==t.superClass);a&&(n.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(o&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),o=!0):a.key&&"PrivateIdentifier"===a.key.type&&xx(s,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=i,this.next(),t.body=this.finishNode(n,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},vx.parseClassElement=function(t){if(this.eat(Hw.semi))return null;var e=this.options.ecmaVersion,i=this.startNode(),s="",n=!1,o=!1,a="method",r=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(Hw.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===Hw.star?r=!0:s="static"}if(i.static=r,!s&&e>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==Hw.star||this.canInsertSemicolon()?s="async":o=!0),!s&&(e>=9||!o)&&this.eat(Hw.star)&&(n=!0),!s&&!o&&!n){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:s=l)}if(s?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=s,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),e<13||this.type===Hw.parenL||"method"!==a||n||o){var c=!i.static&&Sx(i,"constructor"),h=c&&t;c&&"method"!==a&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=c?"constructor":a,this.parseClassMethod(i,n,o,h)}else this.parseClassField(i);return i},vx.isClassElementNameStart=function(){return this.type===Hw.name||this.type===Hw.privateId||this.type===Hw.num||this.type===Hw.string||this.type===Hw.bracketL||this.type.keyword},vx.parseClassElementName=function(t){this.type===Hw.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},vx.parseClassMethod=function(t,e,i,s){var n=t.key;"constructor"===t.kind?(e&&this.raise(n.start,"Constructor can't be a generator"),i&&this.raise(n.start,"Constructor can't be an async method")):t.static&&Sx(t,"prototype")&&this.raise(n.start,"Classes may not have a static property named prototype");var o=t.value=this.parseMethod(e,i,s);return"get"===t.kind&&0!==o.params.length&&this.raiseRecoverable(o.start,"getter should have no params"),"set"===t.kind&&1!==o.params.length&&this.raiseRecoverable(o.start,"setter should have exactly one param"),"set"===t.kind&&"RestElement"===o.params[0].type&&this.raiseRecoverable(o.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")},vx.parseClassField=function(t){if(Sx(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&Sx(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(Hw.eq)){var e=this.currentThisScope(),i=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=i}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")},vx.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(320);this.type!==Hw.braceR;){var i=this.parseStatement(null);t.body.push(i)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")},vx.parseClassId=function(t,e){this.type===Hw.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},vx.parseClassSuper=function(t){t.superClass=this.eat(Hw._extends)?this.parseExprSubscripts(null,!1):null},vx.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},vx.exitClassBody=function(){var t=this.privateNameStack.pop(),e=t.declared,i=t.used;if(this.options.checkPrivateFields)for(var s=this.privateNameStack.length,n=0===s?null:this.privateNameStack[s-1],o=0;o<i.length;++o){var a=i[o];Zw(e,a.name)||(n?n.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},vx.parseExportAllDeclaration=function(t,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==Hw.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration")},vx.parseExport=function(t,e){if(this.next(),this.eat(Hw.star))return this.parseExportAllDeclaration(t,e);if(this.eat(Hw._default))return this.checkExport(e,"default",this.lastTokStart),t.declaration=this.parseExportDefaultDeclaration(),this.finishNode(t,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())t.declaration=this.parseExportDeclaration(t),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==Hw.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var i=0,s=t.specifiers;i<s.length;i+=1){var n=s[i];this.checkUnreserved(n.local),this.checkLocalExport(n.local),"Literal"===n.local.type&&this.raise(n.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},vx.parseExportDeclaration=function(t){return this.parseStatement(null)},vx.parseExportDefaultDeclaration=function(){var t;if(this.type===Hw._function||(t=this.isAsyncFunction())){var e=this.startNode();return this.next(),t&&this.next(),this.parseFunction(e,4|bx,!1,t)}if(this.type===Hw._class){var i=this.startNode();return this.parseClass(i,"nullableID")}var s=this.parseMaybeAssign();return this.semicolon(),s},vx.checkExport=function(t,e,i){t&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),Zw(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},vx.checkPatternExport=function(t,e){var i=e.type;if("Identifier"===i)this.checkExport(t,e,e.start);else if("ObjectPattern"===i)for(var s=0,n=e.properties;s<n.length;s+=1){var o=n[s];this.checkPatternExport(t,o)}else if("ArrayPattern"===i)for(var a=0,r=e.elements;a<r.length;a+=1){var l=r[a];l&&this.checkPatternExport(t,l)}else"Property"===i?this.checkPatternExport(t,e.value):"AssignmentPattern"===i?this.checkPatternExport(t,e.left):"RestElement"===i&&this.checkPatternExport(t,e.argument)},vx.checkVariableExport=function(t,e){if(t)for(var i=0,s=e;i<s.length;i+=1){var n=s[i];this.checkPatternExport(t,n.id)}},vx.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},vx.parseExportSpecifier=function(t){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(t,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")},vx.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(Hw.braceL);!this.eat(Hw.braceR);){if(i)i=!1;else if(this.expect(Hw.comma),this.afterTrailingComma(Hw.braceR))break;e.push(this.parseExportSpecifier(t))}return e},vx.parseImport=function(t){return this.next(),this.type===Hw.string?(t.specifiers=_x,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===Hw.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},vx.parseImportSpecifier=function(){var t=this.startNode();return t.imported=this.parseModuleExportName(),this.eatContextual("as")?t.local=this.parseIdent():(this.checkUnreserved(t.imported),t.local=t.imported),this.checkLValSimple(t.local,2),this.finishNode(t,"ImportSpecifier")},vx.parseImportDefaultSpecifier=function(){var t=this.startNode();return t.local=this.parseIdent(),this.checkLValSimple(t.local,2),this.finishNode(t,"ImportDefaultSpecifier")},vx.parseImportNamespaceSpecifier=function(){var t=this.startNode();return this.next(),this.expectContextual("as"),t.local=this.parseIdent(),this.checkLValSimple(t.local,2),this.finishNode(t,"ImportNamespaceSpecifier")},vx.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===Hw.name&&(t.push(this.parseImportDefaultSpecifier()),!this.eat(Hw.comma)))return t;if(this.type===Hw.star)return t.push(this.parseImportNamespaceSpecifier()),t;for(this.expect(Hw.braceL);!this.eat(Hw.braceR);){if(e)e=!1;else if(this.expect(Hw.comma),this.afterTrailingComma(Hw.braceR))break;t.push(this.parseImportSpecifier())}return t},vx.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===Hw.string){var t=this.parseLiteral(this.value);return nx.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)},vx.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},vx.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var Tx=dx.prototype;Tx.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var s=0,n=t.properties;s<n.length;s+=1){var o=n[s];this.toAssignable(o,e),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},Tx.toAssignableList=function(t,e){for(var i=t.length,s=0;s<i;s++){var n=t[s];n&&this.toAssignable(n,e)}if(i){var o=t[i-1];6===this.options.ecmaVersion&&e&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return t},Tx.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},Tx.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==Hw.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},Tx.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Hw.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(Hw.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case Hw.braceL:return this.parseObj(!0)}return this.parseIdent()},Tx.parseBindingList=function(t,e,i,s){for(var n=[],o=!0;!this.eat(t);)if(o?o=!1:this.expect(Hw.comma),e&&this.type===Hw.comma)n.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===Hw.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),n.push(a),this.type===Hw.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}n.push(this.parseAssignableListItem(s))}return n},Tx.parseAssignableListItem=function(t){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e},Tx.parseBindingListItem=function(t){return t},Tx.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Hw.eq))return i;var s=this.startNodeAt(t,e);return s.left=i,s.right=this.parseMaybeAssign(),this.finishNode(s,"AssignmentPattern")},Tx.checkLValSimple=function(t,e,i){void 0===e&&(e=0);var s=0!==e;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(s?"Binding ":"Assigning to ")+t.name+" in strict mode"),s&&(2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),i&&(Zw(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":s&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return s&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,i);default:this.raise(t.start,(s?"Binding":"Assigning to")+" rvalue")}},Tx.checkLValPattern=function(t,e,i){switch(void 0===e&&(e=0),t.type){case"ObjectPattern":for(var s=0,n=t.properties;s<n.length;s+=1){var o=n[s];this.checkLValInnerPattern(o,e,i)}break;case"ArrayPattern":for(var a=0,r=t.elements;a<r.length;a+=1){var l=r[a];l&&this.checkLValInnerPattern(l,e,i)}break;default:this.checkLValSimple(t,e,i)}},Tx.checkLValInnerPattern=function(t,e,i){switch(void 0===e&&(e=0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,i);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,i);break;case"RestElement":this.checkLValPattern(t.argument,e,i);break;default:this.checkLValPattern(t,e,i)}};var Cx=function(t,e,i,s,n){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=s,this.generator=!!n},Ix={b_stat:new Cx("{",!1),b_expr:new Cx("{",!0),b_tmpl:new Cx("${",!1),p_stat:new Cx("(",!1),p_expr:new Cx("(",!0),q_tmpl:new Cx("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new Cx("function",!1),f_expr:new Cx("function",!0),f_expr_gen:new Cx("function",!0,!1,null,!0),f_gen:new Cx("function",!1,!1,null,!0)},kx=dx.prototype;kx.initialContext=function(){return[Ix.b_stat]},kx.curContext=function(){return this.context[this.context.length-1]},kx.braceIsBlock=function(t){var e=this.curContext();return e===Ix.f_expr||e===Ix.f_stat||(t!==Hw.colon||e!==Ix.b_stat&&e!==Ix.b_expr?t===Hw._return||t===Hw.name&&this.exprAllowed?$w.test(this.input.slice(this.lastTokEnd,this.start)):t===Hw._else||t===Hw.semi||t===Hw.eof||t===Hw.parenR||t===Hw.arrow||(t===Hw.braceL?e===Ix.b_stat:t!==Hw._var&&t!==Hw._const&&t!==Hw.name&&!this.exprAllowed):!e.isExpr)},kx.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},kx.updateContext=function(t){var e,i=this.type;i.keyword&&t===Hw.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},kx.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},Hw.parenR.updateContext=Hw.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===Ix.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},Hw.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Ix.b_stat:Ix.b_expr),this.exprAllowed=!0},Hw.dollarBraceL.updateContext=function(){this.context.push(Ix.b_tmpl),this.exprAllowed=!0},Hw.parenL.updateContext=function(t){var e=t===Hw._if||t===Hw._for||t===Hw._with||t===Hw._while;this.context.push(e?Ix.p_stat:Ix.p_expr),this.exprAllowed=!0},Hw.incDec.updateContext=function(){},Hw._function.updateContext=Hw._class.updateContext=function(t){!t.beforeExpr||t===Hw._else||t===Hw.semi&&this.curContext()!==Ix.p_stat||t===Hw._return&&$w.test(this.input.slice(this.lastTokEnd,this.start))||(t===Hw.colon||t===Hw.braceL)&&this.curContext()===Ix.b_stat?this.context.push(Ix.f_stat):this.context.push(Ix.f_expr),this.exprAllowed=!1},Hw.colon.updateContext=function(){"function"===this.curContext().token&&(this.context.pop(),this.exprAllowed=!0)},Hw.backQuote.updateContext=function(){this.curContext()===Ix.q_tmpl?this.context.pop():this.context.push(Ix.q_tmpl),this.exprAllowed=!1},Hw.star.updateContext=function(t){if(t===Hw._function){var e=this.context.length-1;this.context[e]===Ix.f_expr?this.context[e]=Ix.f_expr_gen:this.context[e]=Ix.f_gen}this.exprAllowed=!0},Hw.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==Hw.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Ex=dx.prototype;function Rx(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&Rx(t.expression)}Ex.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var s,n=t.key;switch(n.type){case"Identifier":s=n.name;break;case"Literal":s=String(n.value);break;default:return}var o=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===s&&"init"===o&&(e.proto&&(i?i.doubleProto<0&&(i.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[s="$"+s];a?("init"===o?this.strict&&a.init||a.get||a.set:a.init||a[o])&&this.raiseRecoverable(n.start,"Redefinition of property"):a=e[s]={init:!1,get:!1,set:!1},a[o]=!0}}},Ex.parseExpression=function(t,e){var i=this.start,s=this.startLoc,n=this.parseMaybeAssign(t,e);if(this.type===Hw.comma){var o=this.startNodeAt(i,s);for(o.expressions=[n];this.eat(Hw.comma);)o.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(o,"SequenceExpression")}return n},Ex.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var s=!1,n=-1,o=-1,a=-1;e?(n=e.parenthesizedAssign,o=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new fx,s=!0);var r=this.start,l=this.startLoc;this.type!==Hw.parenL&&this.type!==Hw.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);var c=this.parseMaybeConditional(t,e);if(i&&(c=i.call(this,c,r,l)),this.type.isAssign){var h=this.startNodeAt(r,l);return h.operator=this.value,this.type===Hw.eq&&(c=this.toAssignable(c,!1,e)),s||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.start&&(e.shorthandAssign=-1),this.type===Hw.eq?this.checkLValPattern(c):this.checkLValSimple(c),h.left=c,this.next(),h.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(h,"AssignmentExpression")}return s&&this.checkExpressionErrors(e,!0),n>-1&&(e.parenthesizedAssign=n),o>-1&&(e.trailingComma=o),c},Ex.parseMaybeConditional=function(t,e){var i=this.start,s=this.startLoc,n=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return n;if(this.eat(Hw.question)){var o=this.startNodeAt(i,s);return o.test=n,o.consequent=this.parseMaybeAssign(),this.expect(Hw.colon),o.alternate=this.parseMaybeAssign(t),this.finishNode(o,"ConditionalExpression")}return n},Ex.parseExprOps=function(t,e){var i=this.start,s=this.startLoc,n=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||n.start===i&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,i,s,-1,t)},Ex.parseExprOp=function(t,e,i,s,n){var o=this.type.binop;if(null!=o&&(!n||this.type!==Hw._in)&&o>s){var a=this.type===Hw.logicalOR||this.type===Hw.logicalAND,r=this.type===Hw.coalesce;r&&(o=Hw.logicalAND.binop);var l=this.value;this.next();var c=this.start,h=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,n),c,h,o,n),u=this.buildBinary(e,i,t,d,l,a||r);return(a&&this.type===Hw.coalesce||r&&(this.type===Hw.logicalOR||this.type===Hw.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(u,e,i,s,n)}return t},Ex.buildBinary=function(t,e,i,s,n,o){"PrivateIdentifier"===s.type&&this.raise(s.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=i,a.operator=n,a.right=s,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")},Ex.parseMaybeUnary=function(t,e,i,s){var n,o=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)n=this.parseAwait(s),e=!0;else if(this.type.prefix){var r=this.startNode(),l=this.type===Hw.incDec;r.operator=this.value,r.prefix=!0,this.next(),r.argument=this.parseMaybeUnary(null,!0,l,s),this.checkExpressionErrors(t,!0),l?this.checkLValSimple(r.argument):this.strict&&"delete"===r.operator&&"Identifier"===r.argument.type?this.raiseRecoverable(r.start,"Deleting local variable in strict mode"):"delete"===r.operator&&Rx(r.argument)?this.raiseRecoverable(r.start,"Private fields can not be deleted"):e=!0,n=this.finishNode(r,l?"UpdateExpression":"UnaryExpression")}else if(e||this.type!==Hw.privateId){if(n=this.parseExprSubscripts(t,s),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(o,a);c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}}else(s||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),n=this.parsePrivateIdent(),this.type!==Hw._in&&this.unexpected();return i||!this.eat(Hw.starstar)?n:e?void this.unexpected(this.lastTokStart):this.buildBinary(o,a,n,this.parseMaybeUnary(null,!1,!1,s),"**",!1)},Ex.parseExprSubscripts=function(t,e){var i=this.start,s=this.startLoc,n=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return n;var o=this.parseSubscripts(n,i,s,!1,e);return t&&"MemberExpression"===o.type&&(t.parenthesizedAssign>=o.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=o.start&&(t.parenthesizedBind=-1),t.trailingComma>=o.start&&(t.trailingComma=-1)),o},Ex.parseSubscripts=function(t,e,i,s,n){for(var o=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,a=!1;;){var r=this.parseSubscript(t,e,i,s,o,a,n);if(r.optional&&(a=!0),r===t||"ArrowFunctionExpression"===r.type){if(a){var l=this.startNodeAt(e,i);l.expression=r,r=this.finishNode(l,"ChainExpression")}return r}t=r}},Ex.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(Hw.arrow)},Ex.parseSubscriptAsyncArrow=function(t,e,i,s){return this.parseArrowExpression(this.startNodeAt(t,e),i,!0,s)},Ex.parseSubscript=function(t,e,i,s,n,o,a){var r=this.options.ecmaVersion>=11,l=r&&this.eat(Hw.questionDot);s&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(Hw.bracketL);if(c||l&&this.type!==Hw.parenL&&this.type!==Hw.backQuote||this.eat(Hw.dot)){var h=this.startNodeAt(e,i);h.object=t,c?(h.property=this.parseExpression(),this.expect(Hw.bracketR)):this.type===Hw.privateId&&"Super"!==t.type?h.property=this.parsePrivateIdent():h.property=this.parseIdent("never"!==this.options.allowReserved),h.computed=!!c,r&&(h.optional=l),t=this.finishNode(h,"MemberExpression")}else if(!s&&this.eat(Hw.parenL)){var d=new fx,u=this.yieldPos,p=this.awaitPos,m=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var f=this.parseExprList(Hw.parenR,this.options.ecmaVersion>=8,!1,d);if(n&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=u,this.awaitPos=p,this.awaitIdentPos=m,this.parseSubscriptAsyncArrow(e,i,f,a);this.checkExpressionErrors(d,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=m||this.awaitIdentPos;var v=this.startNodeAt(e,i);v.callee=t,v.arguments=f,r&&(v.optional=l),t=this.finishNode(v,"CallExpression")}else if(this.type===Hw.backQuote){(l||o)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(e,i);y.tag=t,y.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(y,"TaggedTemplateExpression")}return t},Ex.parseExprAtom=function(t,e,i){this.type===Hw.slash&&this.readRegexp();var s,n=this.potentialArrowAt===this.start;switch(this.type){case Hw._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),s=this.startNode(),this.next(),this.type!==Hw.parenL||this.allowDirectSuper||this.raise(s.start,"super() call outside constructor of a subclass"),this.type!==Hw.dot&&this.type!==Hw.bracketL&&this.type!==Hw.parenL&&this.unexpected(),this.finishNode(s,"Super");case Hw._this:return s=this.startNode(),this.next(),this.finishNode(s,"ThisExpression");case Hw.name:var o=this.start,a=this.startLoc,r=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!r&&"async"===l.name&&!this.canInsertSemicolon()&&this.eat(Hw._function))return this.overrideContext(Ix.f_expr),this.parseFunction(this.startNodeAt(o,a),0,!1,!0,e);if(n&&!this.canInsertSemicolon()){if(this.eat(Hw.arrow))return this.parseArrowExpression(this.startNodeAt(o,a),[l],!1,e);if(this.options.ecmaVersion>=8&&"async"===l.name&&this.type===Hw.name&&!r&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return l=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Hw.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(o,a),[l],!0,e)}return l;case Hw.regexp:var c=this.value;return(s=this.parseLiteral(c.value)).regex={pattern:c.pattern,flags:c.flags},s;case Hw.num:case Hw.string:return this.parseLiteral(this.value);case Hw._null:case Hw._true:case Hw._false:return(s=this.startNode()).value=this.type===Hw._null?null:this.type===Hw._true,s.raw=this.type.keyword,this.next(),this.finishNode(s,"Literal");case Hw.parenL:var h=this.start,d=this.parseParenAndDistinguishExpression(n,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(t.parenthesizedAssign=h),t.parenthesizedBind<0&&(t.parenthesizedBind=h)),d;case Hw.bracketL:return s=this.startNode(),this.next(),s.elements=this.parseExprList(Hw.bracketR,!0,!0,t),this.finishNode(s,"ArrayExpression");case Hw.braceL:return this.overrideContext(Ix.b_expr),this.parseObj(!1,t);case Hw._function:return s=this.startNode(),this.next(),this.parseFunction(s,0);case Hw._class:return this.parseClass(this.startNode(),!1);case Hw._new:return this.parseNew();case Hw.backQuote:return this.parseTemplate();case Hw._import:return this.options.ecmaVersion>=11?this.parseExprImport(i):this.unexpected();default:return this.parseExprAtomDefault()}},Ex.parseExprAtomDefault=function(){this.unexpected()},Ex.parseExprImport=function(t){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var i=this.parseIdent(!0);return this.type!==Hw.parenL||t?this.type===Hw.dot?(e.meta=i,this.parseImportMeta(e)):void this.unexpected():this.parseDynamicImport(e)},Ex.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(Hw.parenR)){var e=this.start;this.eat(Hw.comma)&&this.eat(Hw.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},Ex.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},Ex.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},Ex.parseParenExpression=function(){this.expect(Hw.parenL);var t=this.parseExpression();return this.expect(Hw.parenR),t},Ex.shouldParseArrow=function(t){return!this.canInsertSemicolon()},Ex.parseParenAndDistinguishExpression=function(t,e){var i,s=this.start,n=this.startLoc,o=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,r=this.start,l=this.startLoc,c=[],h=!0,d=!1,u=new fx,p=this.yieldPos,m=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==Hw.parenR;){if(h?h=!1:this.expect(Hw.comma),o&&this.afterTrailingComma(Hw.parenR,!0)){d=!0;break}if(this.type===Hw.ellipsis){a=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===Hw.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,u,this.parseParenItem))}var f=this.lastTokEnd,v=this.lastTokEndLoc;if(this.expect(Hw.parenR),t&&this.shouldParseArrow(c)&&this.eat(Hw.arrow))return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=m,this.parseParenArrowList(s,n,c,e);c.length&&!d||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(u,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=m||this.awaitPos,c.length>1?((i=this.startNodeAt(r,l)).expressions=c,this.finishNodeAt(i,"SequenceExpression",f,v)):i=c[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(s,n);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}return i},Ex.parseParenItem=function(t){return t},Ex.parseParenArrowList=function(t,e,i,s){return this.parseArrowExpression(this.startNodeAt(t,e),i,!1,s)};var Ax=[];Ex.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===Hw.dot){var e=this.startNodeAt(t.start,t.startLoc);e.name="new",t.meta=this.finishNode(e,"Identifier"),this.next();var i=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var s=this.start,n=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),s,n,!0,!1),this.eat(Hw.parenL)?t.arguments=this.parseExprList(Hw.parenR,this.options.ecmaVersion>=8,!1):t.arguments=Ax,this.finishNode(t,"NewExpression")},Ex.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===Hw.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===Hw.backQuote,this.finishNode(i,"TemplateElement")},Ex.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var s=this.parseTemplateElement({isTagged:e});for(i.quasis=[s];!s.tail;)this.type===Hw.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Hw.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(Hw.braceR),i.quasis.push(s=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")},Ex.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===Hw.name||this.type===Hw.num||this.type===Hw.string||this.type===Hw.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Hw.star)&&!$w.test(this.input.slice(this.lastTokEnd,this.start))},Ex.parseObj=function(t,e){var i=this.startNode(),s=!0,n={};for(i.properties=[],this.next();!this.eat(Hw.braceR);){if(s)s=!1;else if(this.expect(Hw.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(Hw.braceR))break;var o=this.parseProperty(t,e);t||this.checkPropClash(o,n,e),i.properties.push(o)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},Ex.parseProperty=function(t,e){var i,s,n,o,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(Hw.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===Hw.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,e),this.type===Hw.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(n=this.start,o=this.startLoc),t||(i=this.eat(Hw.star)));var r=this.containsEsc;return this.parsePropertyName(a),!t&&!r&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(a)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(Hw.star),this.parsePropertyName(a)):s=!1,this.parsePropertyValue(a,t,i,s,n,o,e,r),this.finishNode(a,"Property")},Ex.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var e="get"===t.kind?0:1;if(t.value.params.length!==e){var i=t.value.start;"get"===t.kind?this.raiseRecoverable(i,"getter should have no params"):this.raiseRecoverable(i,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")},Ex.parsePropertyValue=function(t,e,i,s,n,o,a,r){(i||s)&&this.type===Hw.colon&&this.unexpected(),this.eat(Hw.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):this.options.ecmaVersion>=6&&this.type===Hw.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,s)):e||r||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===Hw.comma||this.type===Hw.braceR||this.type===Hw.eq?this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((i||s)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),t.kind="init",e?t.value=this.parseMaybeDefault(n,o,this.copyNode(t.key)):this.type===Hw.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(n,o,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected():((i||s)&&this.unexpected(),this.parseGetterSetter(t))},Ex.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(Hw.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(Hw.bracketR),t.key;t.computed=!1}return t.key=this.type===Hw.num||this.type===Hw.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},Ex.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},Ex.parseMethod=function(t,e,i){var s=this.startNode(),n=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(s),this.options.ecmaVersion>=6&&(s.generator=t),this.options.ecmaVersion>=8&&(s.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|hx(e,s.generator)|(i?128:0)),this.expect(Hw.parenL),s.params=this.parseBindingList(Hw.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(s,!1,!0,!1),this.yieldPos=n,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(s,"FunctionExpression")},Ex.parseArrowExpression=function(t,e,i,s){var n=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|hx(i,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,s),this.yieldPos=n,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},Ex.parseFunctionBody=function(t,e,i,s){var n=e&&this.type!==Hw.braceL,o=this.strict,a=!1;if(n)t.body=this.parseMaybeAssign(s),t.expression=!0,this.checkParams(t,!1);else{var r=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);o&&!r||(a=this.strictDirective(this.end))&&r&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!o&&!a&&!e&&!i&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,a&&!o),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=l}this.exitScope()},Ex.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1)if("Identifier"!==i[e].type)return!1;return!0},Ex.checkParams=function(t,e){for(var i=Object.create(null),s=0,n=t.params;s<n.length;s+=1){var o=n[s];this.checkLValInnerPattern(o,1,e?null:i)}},Ex.parseExprList=function(t,e,i,s){for(var n=[],o=!0;!this.eat(t);){if(o)o=!1;else if(this.expect(Hw.comma),e&&this.afterTrailingComma(t))break;var a=void 0;i&&this.type===Hw.comma?a=null:this.type===Hw.ellipsis?(a=this.parseSpread(s),s&&this.type===Hw.comma&&s.trailingComma<0&&(s.trailingComma=this.start)):a=this.parseMaybeAssign(!1,s),n.push(a)}return n},Ex.checkUnreserved=function(t){var e=t.start,i=t.end,s=t.name;this.inGenerator&&"yield"===s&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===s&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===s&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==s&&"await"!==s||this.raise(e,"Cannot use "+s+" in class static initialization block"),this.keywords.test(s)&&this.raise(e,"Unexpected keyword '"+s+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,i).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(s)&&(this.inAsync||"await"!==s||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+s+"' is reserved"))},Ex.parseIdent=function(t){var e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),"await"!==e.name||this.awaitIdentPos||(this.awaitIdentPos=e.start)),e},Ex.parseIdentNode=function(){var t=this.startNode();return this.type===Hw.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,"class"!==t.name&&"function"!==t.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop(),this.type=Hw.name):this.unexpected(),t},Ex.parsePrivateIdent=function(){var t=this.startNode();return this.type===Hw.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t},Ex.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===Hw.semi||this.canInsertSemicolon()||this.type!==Hw.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(Hw.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},Ex.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var Mx=dx.prototype;Mx.raise=function(t,e){var i=rx(this.input,t);e+=" ("+i.line+":"+i.column+")";var s=new SyntaxError(e);throw s.pos=t,s.loc=i,s.raisedAt=this.pos,s},Mx.raiseRecoverable=Mx.raise,Mx.curPosition=function(){if(this.options.locations)return new ox(this.curLine,this.pos-this.lineStart)};var Px=dx.prototype,Ox=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Px.enterScope=function(t){this.scopeStack.push(new Ox(t))},Px.exitScope=function(){this.scopeStack.pop()},Px.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},Px.declareName=function(t,e,i){var s=!1;if(2===e){var n=this.currentScope();s=n.lexical.indexOf(t)>-1||n.functions.indexOf(t)>-1||n.var.indexOf(t)>-1,n.lexical.push(t),this.inModule&&1&n.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var o=this.currentScope();s=this.treatFunctionsAsVar?o.lexical.indexOf(t)>-1:o.lexical.indexOf(t)>-1||o.var.indexOf(t)>-1,o.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var r=this.scopeStack[a];if(r.lexical.indexOf(t)>-1&&!(32&r.flags&&r.lexical[0]===t)||!this.treatFunctionsAsVarInScope(r)&&r.functions.indexOf(t)>-1){s=!0;break}if(r.var.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t],259&r.flags)break}s&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")},Px.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},Px.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Px.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags)return e}},Px.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags&&!(16&e.flags))return e}};var Dx=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new ax(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},Nx=dx.prototype;function Lx(t,e,i,s){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=s),this.options.ranges&&(t.range[1]=i),t}Nx.startNode=function(){return new Dx(this,this.start,this.startLoc)},Nx.startNodeAt=function(t,e){return new Dx(this,t,e)},Nx.finishNode=function(t,e){return Lx.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},Nx.finishNodeAt=function(t,e,i,s){return Lx.call(this,t,e,i,s)},Nx.copyNode=function(t){var e=new Dx(this,t.start,this.startLoc);for(var i in t)e[i]=t[i];return e};var Bx,Vx,Ux="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",jx=Ux+" Extended_Pictographic",Wx=jx+" EBase EComp EMod EPres ExtPict",Fx={9:Ux,10:jx,11:jx,12:Wx,13:Wx,14:Wx},Hx={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},$x="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Gx="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Yx=Gx+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Kx=Yx+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",qx=Kx+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",zx=qx+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Xx={9:Gx,10:Yx,11:Kx,12:qx,13:zx,14:zx+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz"},Qx={};for(var Jx=0,Zx=[9,10,11,12,13,14];Jx<Zx.length;Jx+=1)Vx=void 0,(Vx=Qx[Bx=Zx[Jx]]={binary:ix(Fx[Bx]+" "+$x),binaryOfStrings:ix(Hx[Bx]),nonBinary:{General_Category:ix($x),Script:ix(Xx[Bx])}}).nonBinary.Script_Extensions=Vx.nonBinary.Script,Vx.nonBinary.gc=Vx.nonBinary.General_Category,Vx.nonBinary.sc=Vx.nonBinary.Script,Vx.nonBinary.scx=Vx.nonBinary.Script_Extensions;var tS=dx.prototype,eS=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Qx[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function iS(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function sS(t){return t>=65&&t<=90||t>=97&&t<=122}function nS(t){return sS(t)||95===t}function oS(t){return nS(t)||aS(t)}function aS(t){return t>=48&&t<=57}function rS(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function lS(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function cS(t){return t>=48&&t<=55}eS.prototype.reset=function(t,e,i){var s=-1!==i.indexOf("v"),n=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,s&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=n&&this.parser.options.ecmaVersion>=9)},eS.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},eS.prototype.at=function(t,e){void 0===e&&(e=!1);var i=this.source,s=i.length;if(t>=s)return-1;var n=i.charCodeAt(t);if(!e&&!this.switchU||n<=55295||n>=57344||t+1>=s)return n;var o=i.charCodeAt(t+1);return o>=56320&&o<=57343?(n<<10)+o-56613888:n},eS.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var i=this.source,s=i.length;if(t>=s)return s;var n,o=i.charCodeAt(t);return!e&&!this.switchU||o<=55295||o>=57344||t+1>=s||(n=i.charCodeAt(t+1))<56320||n>57343?t+1:t+2},eS.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},eS.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},eS.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},eS.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},eS.prototype.eatChars=function(t,e){void 0===e&&(e=!1);for(var i=this.pos,s=0,n=t;s<n.length;s+=1){var o=n[s],a=this.at(i,e);if(-1===a||a!==o)return!1;i=this.nextIndex(i,e)}return this.pos=i,!0},tS.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,s=!1,n=!1,o=0;o<i.length;o++){var a=i.charAt(o);-1===e.indexOf(a)&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(a,o+1)>-1&&this.raise(t.start,"Duplicate regular expression flag"),"u"===a&&(s=!0),"v"===a&&(n=!0)}this.options.ecmaVersion>=15&&s&&n&&this.raise(t.start,"Invalid regular expression flag")},tS.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},tS.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var s=i[e];-1===t.groupNames.indexOf(s)&&t.raise("Invalid named capture referenced")}},tS.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},tS.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},tS.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},tS.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},tS.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},tS.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},tS.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var s=0,n=-1;if(this.regexp_eatDecimalDigits(t)&&(s=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue),t.eat(125)))return-1!==n&&n<s&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},tS.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},tS.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},tS.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},tS.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},tS.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},tS.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},tS.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!iS(e)&&(t.lastIntValue=e,t.advance(),!0)},tS.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;-1!==(i=t.current())&&!iS(i);)t.advance();return t.pos!==e},tS.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},tS.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},tS.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},tS.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=sx(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=sx(t.lastIntValue);return!0}return!1},tS.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,s=t.current(i);return t.advance(i),92===s&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(s=t.lastIntValue),function(t){return Nw(t,!0)||36===t||95===t}(s)?(t.lastIntValue=s,!0):(t.pos=e,!1)},tS.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,s=t.current(i);return t.advance(i),92===s&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(s=t.lastIntValue),function(t){return Lw(t,!0)||36===t||95===t||8204===t||8205===t}(s)?(t.lastIntValue=s,!0):(t.pos=e,!1)},tS.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},tS.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},tS.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},tS.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},tS.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},tS.regexp_eatZero=function(t){return 48===t.current()&&!aS(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},tS.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},tS.regexp_eatControlLetter=function(t){var e=t.current();return!!sS(e)&&(t.lastIntValue=e%32,t.advance(),!0)},tS.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var i,s=t.pos,n=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(n&&o>=55296&&o<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(r>=56320&&r<=57343)return t.lastIntValue=1024*(o-55296)+(r-56320)+65536,!0}t.pos=a,t.lastIntValue=o}return!0}if(n&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&(i=t.lastIntValue)>=0&&i<=1114111)return!0;n&&t.raise("Invalid unicode escape"),t.pos=s}return!1},tS.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},tS.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},tS.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),1;var i=!1;if(t.switchU&&this.options.ecmaVersion>=9&&((i=80===e)||112===e)){var s;if(t.lastIntValue=-1,t.advance(),t.eat(123)&&(s=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return i&&2===s&&t.raise("Invalid property name"),s;t.raise("Invalid property name")}return 0},tS.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var s=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,s),1}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,n)}return 0},tS.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){Zw(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")},tS.regexp_validateUnicodePropertyNameOrValue=function(t,e){return t.unicodeProperties.binary.test(e)?1:t.switchV&&t.unicodeProperties.binaryOfStrings.test(e)?2:void t.raise("Invalid property name")},tS.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";nS(e=t.current());)t.lastStringValue+=sx(e),t.advance();return""!==t.lastStringValue},tS.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";oS(e=t.current());)t.lastStringValue+=sx(e),t.advance();return""!==t.lastStringValue},tS.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},tS.regexp_eatCharacterClass=function(t){if(t.eat(91)){var e=t.eat(94),i=this.regexp_classContents(t);return t.eat(93)||t.raise("Unterminated character class"),e&&2===i&&t.raise("Negated character class may contain strings"),!0}return!1},tS.regexp_classContents=function(t){return 93===t.current()?1:t.switchV?this.regexp_classSetExpression(t):(this.regexp_nonEmptyClassRanges(t),1)},tS.regexp_nonEmptyClassRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==e&&-1!==i||t.raise("Invalid character class"),-1!==e&&-1!==i&&e>i&&t.raise("Range out of order in character class")}}},tS.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||cS(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var s=t.current();return 93!==s&&(t.lastIntValue=s,t.advance(),!0)},tS.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},tS.regexp_classSetExpression=function(t){var e,i=1;if(this.regexp_eatClassSetRange(t));else if(e=this.regexp_eatClassSetOperand(t)){2===e&&(i=2);for(var s=t.pos;t.eatChars([38,38]);)38!==t.current()&&(e=this.regexp_eatClassSetOperand(t))?2!==e&&(i=1):t.raise("Invalid character in character class");if(s!==t.pos)return i;for(;t.eatChars([45,45]);)this.regexp_eatClassSetOperand(t)||t.raise("Invalid character in character class");if(s!==t.pos)return i}else t.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(t)){if(!(e=this.regexp_eatClassSetOperand(t)))return i;2===e&&(i=2)}},tS.regexp_eatClassSetRange=function(t){var e=t.pos;if(this.regexp_eatClassSetCharacter(t)){var i=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassSetCharacter(t)){var s=t.lastIntValue;return-1!==i&&-1!==s&&i>s&&t.raise("Range out of order in character class"),!0}t.pos=e}return!1},tS.regexp_eatClassSetOperand=function(t){return this.regexp_eatClassSetCharacter(t)?1:this.regexp_eatClassStringDisjunction(t)||this.regexp_eatNestedClass(t)},tS.regexp_eatNestedClass=function(t){var e=t.pos;if(t.eat(91)){var i=t.eat(94),s=this.regexp_classContents(t);if(t.eat(93))return i&&2===s&&t.raise("Negated character class may contain strings"),s;t.pos=e}if(t.eat(92)){var n=this.regexp_eatCharacterClassEscape(t);if(n)return n;t.pos=e}return null},tS.regexp_eatClassStringDisjunction=function(t){var e=t.pos;if(t.eatChars([92,113])){if(t.eat(123)){var i=this.regexp_classStringDisjunctionContents(t);if(t.eat(125))return i}else t.raise("Invalid escape");t.pos=e}return null},tS.regexp_classStringDisjunctionContents=function(t){for(var e=this.regexp_classString(t);t.eat(124);)2===this.regexp_classString(t)&&(e=2);return e},tS.regexp_classString=function(t){for(var e=0;this.regexp_eatClassSetCharacter(t);)e++;return 1===e?1:2},tS.regexp_eatClassSetCharacter=function(t){var e=t.pos;if(t.eat(92))return!(!this.regexp_eatCharacterEscape(t)&&!this.regexp_eatClassSetReservedPunctuator(t)&&(t.eat(98)?(t.lastIntValue=8,0):(t.pos=e,1)));var i=t.current();return!(i<0||i===t.lookahead()&&function(t){return 33===t||t>=35&&t<=38||t>=42&&t<=44||46===t||t>=58&&t<=64||94===t||96===t||126===t}(i)||function(t){return 40===t||41===t||45===t||47===t||t>=91&&t<=93||t>=123&&t<=125}(i)||(t.advance(),t.lastIntValue=i,0))},tS.regexp_eatClassSetReservedPunctuator=function(t){var e=t.current();return!!function(t){return 33===t||35===t||37===t||38===t||44===t||45===t||t>=58&&t<=62||64===t||96===t||126===t}(e)&&(t.lastIntValue=e,t.advance(),!0)},tS.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!aS(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},tS.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},tS.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;aS(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},tS.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;rS(i=t.current());)t.lastIntValue=16*t.lastIntValue+lS(i),t.advance();return t.pos!==e},tS.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*i+t.lastIntValue:t.lastIntValue=8*e+i}else t.lastIntValue=e;return!0}return!1},tS.regexp_eatOctalDigit=function(t){var e=t.current();return cS(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},tS.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var s=0;s<e;++s){var n=t.current();if(!rS(n))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+lS(n),t.advance()}return!0};var hS=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new ax(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},dS=dx.prototype;function uS(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}dS.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new hS(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},dS.getToken=function(){return this.next(),new hS(this)},"undefined"!=typeof Symbol&&(dS[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===Hw.eof,value:e}}}}),dS.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(Hw.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},dS.readToken=function(t){return Nw(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},dS.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888},dS.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(var s=void 0,n=e;(s=Kw(this.input,n,this.pos))>-1;)++this.curLine,n=this.lineStart=s;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,i),e,this.pos,t,this.curPosition())},dS.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),s=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!Yw(s);)s=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())},dS.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&qw.test(String.fromCharCode(t))))break t;++this.pos}}},dS.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},dS.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(Hw.ellipsis)):(++this.pos,this.finishToken(Hw.dot))},dS.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(Hw.assign,2):this.finishOp(Hw.slash,1)},dS.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,s=42===t?Hw.star:Hw.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++i,s=Hw.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(Hw.assign,i+1):this.finishOp(s,i)},dS.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Hw.assign,3):this.finishOp(124===t?Hw.logicalOR:Hw.logicalAND,2):61===e?this.finishOp(Hw.assign,2):this.finishOp(124===t?Hw.bitwiseOR:Hw.bitwiseAND,1)},dS.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Hw.assign,2):this.finishOp(Hw.bitwiseXOR,1)},dS.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!$w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Hw.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(Hw.assign,2):this.finishOp(Hw.plusMin,1)},dS.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(Hw.assign,i+1):this.finishOp(Hw.bitShift,i)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(Hw.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},dS.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(Hw.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Hw.arrow)):this.finishOp(61===t?Hw.eq:Hw.prefix,1)},dS.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(Hw.questionDot,2)}if(63===e)return t>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Hw.assign,3):this.finishOp(Hw.coalesce,2)}return this.finishOp(Hw.question,1)},dS.readToken_numberSign=function(){var t=35;if(this.options.ecmaVersion>=13&&(++this.pos,Nw(t=this.fullCharCodeAtPos(),!0)||92===t))return this.finishToken(Hw.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+sx(t)+"'")},dS.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Hw.parenL);case 41:return++this.pos,this.finishToken(Hw.parenR);case 59:return++this.pos,this.finishToken(Hw.semi);case 44:return++this.pos,this.finishToken(Hw.comma);case 91:return++this.pos,this.finishToken(Hw.bracketL);case 93:return++this.pos,this.finishToken(Hw.bracketR);case 123:return++this.pos,this.finishToken(Hw.braceL);case 125:return++this.pos,this.finishToken(Hw.braceR);case 58:return++this.pos,this.finishToken(Hw.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Hw.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(Hw.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+sx(t)+"'")},dS.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},dS.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var s=this.input.charAt(this.pos);if($w.test(s)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++this.pos}var n=this.input.slice(i,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var r=this.regexpState||(this.regexpState=new eS(this));r.reset(i,n,a),this.validateRegExpFlags(r),this.validateRegExpPattern(r);var l=null;try{l=new RegExp(n,a)}catch(t){}return this.finishToken(Hw.regexp,{pattern:n,flags:a,value:l})},dS.readInt=function(t,e,i){for(var s=this.options.ecmaVersion>=12&&void 0===e,n=i&&48===this.input.charCodeAt(this.pos),o=this.pos,a=0,r=0,l=0,c=null==e?1/0:e;l<c;++l,++this.pos){var h=this.input.charCodeAt(this.pos),d=void 0;if(s&&95===h)n&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===r&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),r=h;else{if((d=h>=97?h-97+10:h>=65?h-65+10:h>=48&&h<=57?h-48:1/0)>=t)break;r=h,a=a*t+d}}return s&&95===r&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===o||null!=e&&this.pos-o!==e?null:a},dS.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);return null==i&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(i=uS(this.input.slice(e,this.pos)),++this.pos):Nw(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Hw.num,i)},dS.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var i=this.pos-e>=2&&48===this.input.charCodeAt(e);i&&this.strict&&this.raise(e,"Invalid number");var s=this.input.charCodeAt(this.pos);if(!i&&!t&&this.options.ecmaVersion>=11&&110===s){var n=uS(this.input.slice(e,this.pos));return++this.pos,Nw(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Hw.num,n)}i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1),46!==s||i||(++this.pos,this.readInt(10),s=this.input.charCodeAt(this.pos)),69!==s&&101!==s||i||(43!==(s=this.input.charCodeAt(++this.pos))&&45!==s||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),Nw(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o,a=(o=this.input.slice(e,this.pos),i?parseInt(o,8):parseFloat(o.replace(/_/g,"")));return this.finishToken(Hw.num,a)},dS.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},dS.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var s=this.input.charCodeAt(this.pos);if(s===t)break;92===s?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):8232===s||8233===s?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Yw(s)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(Hw.string,e)};var pS={};dS.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==pS)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},dS.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw pS;this.raise(t,e)},dS.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==Hw.template&&this.type!==Hw.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(Hw.template,t)):36===i?(this.pos+=2,this.finishToken(Hw.dollarBraceL)):(++this.pos,this.finishToken(Hw.backQuote));if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(Yw(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},dS.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(Hw.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},dS.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return sx(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var i=this.pos-1;this.invalidStringToken(i,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var s=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(s,8);return n>255&&(s=s.slice(0,-1),n=parseInt(s,8)),this.pos+=s.length-1,e=this.input.charCodeAt(this.pos),"0"===s&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-s.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return Yw(e)?"":String.fromCharCode(e)}},dS.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},dS.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,s=this.options.ecmaVersion>=6;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Lw(n,s))this.pos+=n<=65535?1:2;else{if(92!==n)break;this.containsEsc=!0,t+=this.input.slice(i,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?Nw:Lw)(a,s)||this.invalidStringToken(o,"Invalid Unicode escape"),t+=sx(a),i=this.pos}e=!1}return t+this.input.slice(i,this.pos)},dS.readWord=function(){var t=this.readWord1(),e=Hw.name;return this.keywords.test(t)&&(e=Ww[t]),this.finishToken(e,t)},dx.acorn={Parser:dx,version:"8.11.1",defaultOptions:lx,Position:ox,SourceLocation:ax,getLineInfo:rx,Node:Dx,TokenType:Bw,tokTypes:Hw,keywordTypes:Ww,TokContext:Cx,tokContexts:Ix,isIdentifierChar:Lw,isIdentifierStart:Nw,Token:hS,isNewLine:Yw,lineBreak:$w,lineBreakG:Gw,nonASCIIwhitespace:qw};var mS,fS,vS,yS,gS,_S;class bS{constructor(t){mS.set(this,void 0);const e=function(t,e){return dx.parse(t,{ecmaVersion:2020})}(t);(function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===s?n.call(t,i):n?n.value=i:e.set(t,i)})(this,mS,e.body,"f"),this.visitor=new Tw(function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)}(this,mS,"f")),this.scope=this.visitor.scope,this.scope.set("print",(t=>console.log(...t))),this.visitor.on("console",((t,e)=>{if("Identifier"===t.type)return console;if("CallExpression"===t.type&&"MemberExpression"===t.callee.type){const i=e.visitNode(t.callee.property),s=t.arguments.map((t=>e.visitNode(t))),n=console[i];return n?n(...s):"proceed"}return"proceed"})),this.visitor.on("Math",((t,e)=>{if("Identifier"===t.type)return Math;if("CallExpression"===t.type&&"MemberExpression"===t.callee.type){const i=e.visitNode(t.callee.property),s=t.arguments.map((t=>e.visitNode(t))),n=Math[i];return n?n(...s):"proceed"}return"proceed"})),this.visitor.on("String",((t,e)=>{if("Identifier"===t.type)return String;if("CallExpression"===t.type&&"MemberExpression"===t.callee.type){const i=e.visitNode(t.callee.property),s=t.arguments.map((t=>e.visitNode(t))),n=String[i];return n?n(s):"proceed"}return"proceed"})),this.visitor.on("Date",(t=>{if("Identifier"===t.type)return Date}))}interpret(){return this.visitor.run()}}mS=new WeakMap,vS=new WeakMap,fS=new WeakSet,yS=function(t){return d(this,void 0,void 0,(function*(){return{success:t.ok,status_code:t.status,data:JSON.parse(yield t.text())}}))},gS=function(t){return"on_response_received_actions"in t},_S=function(t){return["FElibrary","FEhistory","FEsubscriptions","FEmusic_listening_review","FEmusic_library_landing","SPaccount_overview","SPaccount_notifications","SPaccount_privacy","SPtime_watched"].includes(t)};const wS=class{constructor(t){fS.add(this),vS.set(this,void 0),f(this,vS,t,"f")}get session(){return m(this,vS,"f")}stats(t,e,i){return d(this,void 0,void 0,(function*(){const s=new URL(t);s.searchParams.set("ver","2"),s.searchParams.set("c",e.client_name.toLowerCase()),s.searchParams.set("cbrver",e.client_version),s.searchParams.set("cver",e.client_version);for(const t of Object.keys(i))s.searchParams.set(t,i[t]);return yield m(this,vS,"f").http.fetch(s)}))}execute(t,e){var i,s;return d(this,void 0,void 0,(function*(){let n;if(e&&!e.protobuf){if(n=Object.assign({},e),Reflect.has(n,"browseId")&&m(this,fS,"m",_S).call(this,n.browseId)&&!m(this,vS,"f").logged_in)throw new fb("You must be signed in to perform this operation.");Reflect.has(n,"override_endpoint")&&delete n.override_endpoint,Reflect.has(n,"parse")&&delete n.parse,Reflect.has(n,"request")&&delete n.request,Reflect.has(n,"clientActions")&&delete n.clientActions,Reflect.has(n,"settingItemIdForClient")&&delete n.settingItemIdForClient,Reflect.has(n,"action")&&(n.actions=[n.action],delete n.action),Reflect.has(n,"boolValue")&&(n.newValue={boolValue:n.boolValue},delete n.boolValue),Reflect.has(n,"token")&&(n.continuation=n.token,delete n.token),"YTMUSIC"===(null==n?void 0:n.client)&&(n.isAudioOnly=!0)}else e&&(n=e.serialized_data);const o=Reflect.has(e||{},"override_endpoint")?null==e?void 0:e.override_endpoint:t,a=yield m(this,vS,"f").http.fetch(o,{method:"POST",body:(null==e?void 0:e.protobuf)?n:JSON.stringify(n||{}),headers:{"Content-Type":(null==e?void 0:e.protobuf)?"application/x-protobuf":"application/json"}});if(null==e?void 0:e.parse){let t=lb.parseResponse(yield a.json());if(m(this,fS,"m",gS).call(this,t)&&"navigateAction"===(null===(s=null===(i=t.on_response_received_actions)||void 0===i?void 0:i.first())||void 0===s?void 0:s.type)){const e=t.on_response_received_actions.firstOfType(xv);e&&(t=yield e.endpoint.call(this,{parse:!0}))}return t}return m(this,fS,"m",yS).call(this,a)}))}};var xS,SS,TS,CS,IS;class kS{constructor(t,e,i,s){xS.set(this,void 0),SS.set(this,void 0),TS.set(this,void 0),CS.set(this,void 0),IS.set(this,void 0),f(this,xS,i,"f"),f(this,TS,e,"f"),f(this,CS,t,"f"),f(this,IS,s,"f"),f(this,SS,new Map,"f")}static create(t,e=mb.shim.fetch){return d(this,void 0,void 0,(function*(){const i=new URL("/iframe_api",x.YT_BASE),s=yield e(i);if(200!==s.status)throw new _b("Failed to request player id");const n=Sb(yield s.text(),"player\\/","\\/");if(!n)throw new _b("Failed to get player id");if(t){const e=yield kS.fromCache(t,n);if(e)return e}const o=new URL(`/s/player/${n}/player_ias.vflset/en_US/base.js`,x.YT_BASE),a=yield e(o,{headers:{"user-agent":Cb("desktop")}});if(!a.ok)throw new _b(`Failed to get player data: ${a.status}`);const r=yield a.text(),l=this.extractSigTimestamp(r),c=this.extractSigSourceCode(r),h=this.extractNSigSourceCode(r);return yield kS.fromSource(t,l,c,h,n)}))}decipher(t,e,i,s){if(!(t=t||e||i))throw new _b("No valid URL to decipher");const n=new URLSearchParams(t),o=new URL(n.get("url")||t);if(e||i){const t=mb.shim.eval(m(this,TS,"f"),{sig:n.get("s")});if("string"!=typeof t)throw new _b("Failed to decipher signature");const e=n.get("sp");e?o.searchParams.set(e,t):o.searchParams.set("signature",t)}const a=o.searchParams.get("n");if(a){let t;if(s&&s.has(a))t=s.get(a);else{if(t=mb.shim.eval(m(this,xS,"f"),{nsig:a}),"string"!=typeof t)throw new _b("Failed to decipher nsig");t.startsWith("enhanced_except_")?console.warn('Warning:\nCould not transform nsig, download may be throttled.\nChanging the InnerTube client to "ANDROID" might help!'):s&&s.set(a,t)}o.searchParams.set("n",t)}switch(o.searchParams.get("c")){case"WEB":o.searchParams.set("cver",T.WEB.VERSION);break;case"WEB_REMIX":o.searchParams.set("cver",T.YTMUSIC.VERSION);break;case"WEB_KIDS":o.searchParams.set("cver",T.WEB_KIDS.VERSION);break;case"ANDROID":o.searchParams.set("cver",T.ANDROID.VERSION);break;case"ANDROID_MUSIC":o.searchParams.set("cver",T.YTMUSIC_ANDROID.VERSION);break;case"TVHTML5_SIMPLY_EMBEDDED_PLAYER":o.searchParams.set("cver",T.TV_EMBEDDED.VERSION)}return o.toString()}static fromCache(t,e){return d(this,void 0,void 0,(function*(){const i=yield t.get(e);if(!i)return null;const s=new DataView(i);if(s.getUint32(0,!0)!==kS.LIBRARY_VERSION)return null;const n=s.getUint32(4,!0),o=s.getUint32(8,!0),a=i.slice(12,12+o),r=i.slice(12+o),l=new TextDecoder,c=l.decode(a),h=l.decode(r);return new kS(n,c,h,e)}))}static fromSource(t,e,i,s,n){return d(this,void 0,void 0,(function*(){const o=new kS(e,i,s,n);return yield o.cache(t),o}))}cache(t){return d(this,void 0,void 0,(function*(){if(!t)return;const e=new TextEncoder,i=e.encode(m(this,TS,"f")),s=e.encode(m(this,xS,"f")),n=new ArrayBuffer(12+i.byteLength+s.byteLength),o=new DataView(n);o.setUint32(0,kS.LIBRARY_VERSION,!0),o.setUint32(4,m(this,CS,"f"),!0),o.setUint32(8,i.byteLength,!0),new Uint8Array(n).set(i,12),new Uint8Array(n).set(s,12+i.byteLength),yield t.set(m(this,IS,"f"),new Uint8Array(n))}))}static extractSigTimestamp(t){return parseInt(Sb(t,"signatureTimestamp:",",")||"0")}static extractSigSourceCode(t){var e,i,s;const n=Sb(t,'function(a){a=a.split("")','return a.join("")}'),o=null===(s=null===(i=null===(e=null==n?void 0:n.split(/\.|\[/))||void 0===e?void 0:e[0])||void 0===i?void 0:i.replace(";",""))||void 0===s?void 0:s.trim(),a=Sb(t,`var ${o}={`,"};");return a&&n||console.warn(new _b("Failed to extract signature decipher algorithm")),`function descramble_sig(a) { a = a.split(""); let ${o}={${a}}${n} return a.join("") } descramble_sig(sig);`}static extractNSigSourceCode(t){const e=`function descramble_nsig(a) { let b=a.split("")${Sb(t,'b=a.split("")','}return b.join("")}')}} return b.join(""); } descramble_nsig(nsig)`;return e||console.warn(new _b("Failed to extract n-token decipher algorithm")),e}get url(){return new URL(`/s/player/${m(this,IS,"f")}/player_ias.vflset/en_US/base.js`,x.YT_BASE).toString()}get sts(){return m(this,CS,"f")}get nsig_sc(){return m(this,xS,"f")}get sig_sc(){return m(this,TS,"f")}static get LIBRARY_VERSION(){return 2}}xS=new WeakMap,SS=new WeakMap,TS=new WeakMap,CS=new WeakMap,IS=new WeakMap;const ES=kS;var RS,AS,MS,PS,OS,DS,NS,LS,BS,VS;AS=new WeakMap,MS=new WeakMap,PS=new WeakMap,OS=new WeakMap,RS=new WeakSet,DS=function(){var t;return d(this,void 0,void 0,(function*(){const e=yield null===(t=m(this,MS,"f").cache)||void 0===t?void 0:t.get("youtubei_oauth_credentials");if(!e)return!1;const i=new TextDecoder,s=JSON.parse(i.decode(e));return f(this,PS,{access_token:s.access_token,refresh_token:s.refresh_token,expires:new Date(s.expires)},"f"),m(this,MS,"f").emit("auth",{credentials:m(this,PS,"f"),status:"SUCCESS"}),!0}))},NS=function(){return d(this,void 0,void 0,(function*(){f(this,AS,yield m(this,RS,"m",VS).call(this),"f");const t={client_id:m(this,AS,"f").client_id,scope:S.SCOPE,device_id:mb.shim.uuidv4(),device_model:S.MODEL_NAME},e=yield m(this,MS,"f").http.fetch_function(new URL("/o/oauth2/device/code",x.YT_BASE),{body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json"}}),i=yield e.json();m(this,MS,"f").emit("auth-pending",i),f(this,OS,i.interval,"f"),m(this,RS,"m",LS).call(this,i.device_code)}))},LS=function(t){const e=setInterval((()=>d(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},m(this,AS,"f")),{code:t,grant_type:S.GRANT_TYPE});try{const t=yield m(this,MS,"f").http.fetch_function(new URL("/o/oauth2/token",x.YT_BASE),{body:JSON.stringify(i),method:"POST",headers:{"Content-Type":"application/json"}}),s=yield t.json();if(s.error){switch(s.error){case"access_denied":m(this,MS,"f").emit("auth-error",new gb("Access was denied.",{status:"ACCESS_DENIED"}));break;case"expired_token":m(this,MS,"f").emit("auth-error",new gb("The device code has expired, restarting auth flow.",{status:"DEVICE_CODE_EXPIRED"})),clearInterval(e),m(this,RS,"m",NS).call(this)}return}const n=new Date((new Date).getTime()+1e3*s.expires_in);f(this,PS,{access_token:s.access_token,refresh_token:s.refresh_token,expires:n},"f"),m(this,MS,"f").emit("auth",{credentials:m(this,PS,"f"),status:"SUCCESS"}),clearInterval(e)}catch(t){return clearInterval(e),m(this,MS,"f").emit("auth-error",new gb("Could not obtain user code.",{status:"FAILED",error:t}))}}))),1e3*m(this,OS,"f"))},BS=function(){return d(this,void 0,void 0,(function*(){if(!m(this,PS,"f"))return;f(this,AS,yield m(this,RS,"m",VS).call(this),"f");const t=Object.assign(Object.assign({},m(this,AS,"f")),{refresh_token:m(this,PS,"f").refresh_token,grant_type:"refresh_token"}),e=yield m(this,MS,"f").http.fetch_function(new URL("/o/oauth2/token",x.YT_BASE),{body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json"}}),i=yield e.json(),s=new Date((new Date).getTime()+1e3*i.expires_in);f(this,PS,{access_token:i.access_token,refresh_token:i.refresh_token||m(this,PS,"f").refresh_token,expires:s},"f"),m(this,MS,"f").emit("update-credentials",{credentials:m(this,PS,"f"),status:"SUCCESS"})}))},VS=function(){var t;return d(this,void 0,void 0,(function*(){const e=yield m(this,MS,"f").http.fetch_function(new URL("/tv",x.YT_BASE),{headers:S.HEADERS}),i=yield e.text(),s=null===(t=S.REGEX.AUTH_SCRIPT.exec(i))||void 0===t?void 0:t[1];if(!s)throw new gb("Could not obtain script url.",{status:"FAILED"});const n=yield m(this,MS,"f").http.fetch(s,{baseURL:x.YT_BASE}),o=(yield n.text()).replace(/\n/g,"").match(S.REGEX.CLIENT_IDENTITY),a=null==o?void 0:o.groups;if(!a)throw new gb("Could not obtain client identity.",{status:"FAILED"});return a}))};const US=class{constructor(t){RS.add(this),AS.set(this,void 0),MS.set(this,void 0),PS.set(this,void 0),OS.set(this,5),f(this,MS,t,"f")}init(t){return d(this,void 0,void 0,(function*(){f(this,PS,t,"f"),this.validateCredentials()?this.has_access_token_expired||m(this,MS,"f").emit("auth",{credentials:m(this,PS,"f"),status:"SUCCESS"}):(yield m(this,RS,"m",DS).call(this))||(yield m(this,RS,"m",NS).call(this))}))}cacheCredentials(){var t;return d(this,void 0,void 0,(function*(){const e=(new TextEncoder).encode(JSON.stringify(m(this,PS,"f")));yield null===(t=m(this,MS,"f").cache)||void 0===t?void 0:t.set("youtubei_oauth_credentials",e.buffer)}))}removeCache(){var t;return d(this,void 0,void 0,(function*(){yield null===(t=m(this,MS,"f").cache)||void 0===t?void 0:t.remove("youtubei_oauth_credentials")}))}refreshIfRequired(){return d(this,void 0,void 0,(function*(){this.has_access_token_expired&&(yield m(this,RS,"m",BS).call(this))}))}revokeCredentials(){return d(this,void 0,void 0,(function*(){if(m(this,PS,"f"))return yield this.removeCache(),m(this,MS,"f").http.fetch_function(new URL(`/o/oauth2/revoke?token=${encodeURIComponent(m(this,PS,"f").access_token)}`,x.YT_BASE),{method:"post"})}))}get credentials(){return m(this,PS,"f")}get has_access_token_expired(){const t=m(this,PS,"f")?new Date(m(this,PS,"f").expires).getTime():-1/0;return(new Date).getTime()>t}validateCredentials(){return m(this,PS,"f")&&Reflect.has(m(this,PS,"f"),"access_token")&&Reflect.has(m(this,PS,"f"),"refresh_token")&&Reflect.has(m(this,PS,"f"),"expires")||!1}};var jS,WS,FS,HS,$S,GS,YS,KS,qS;!function(t){t.WEB="WEB",t.KIDS="WEB_KIDS",t.MUSIC="WEB_REMIX",t.IOS="iOS",t.ANDROID="ANDROID",t.ANDROID_MUSIC="ANDROID_MUSIC",t.ANDROID_CREATOR="ANDROID_CREATOR",t.TV_EMBEDDED="TVHTML5_SIMPLY_EMBEDDED_PLAYER"}(qS||(qS={}));class zS extends qy{constructor(t,e,i,s,n,o,a,r){super(),WS.set(this,void 0),FS.set(this,void 0),HS.set(this,void 0),$S.set(this,void 0),GS.set(this,void 0),f(this,HS,t,"f"),f(this,$S,s,"f"),f(this,FS,e,"f"),f(this,WS,i,"f"),f(this,GS,n,"f"),this.http=new jg(this,o,a),this.actions=new wS(this),this.oauth=new US(this),this.logged_in=!!o,this.cache=r}on(t,e){super.on(t,e)}once(t,e){super.once(t,e)}static create(t={}){return d(this,void 0,void 0,(function*(){const{context:e,api_key:i,api_version:s,account_index:n}=yield zS.getSessionData(t.lang,t.location,t.account_index,t.visitor_data,t.enable_safety_mode,t.generate_session_locally,t.device_category,t.client_type,t.timezone,t.fetch,t.on_behalf_of_user);return new zS(e,i,s,n,!1===t.retrieve_player?void 0:yield ES.create(t.cache,t.fetch),t.cookie,t.fetch,t.cache)}))}static getSessionData(t="",e="",i=0,s="",n=!1,o=!1,a="desktop",r=qS.WEB,l=Intl.DateTimeFormat().resolvedOptions().timeZone,c=mb.shim.fetch,h){return d(this,void 0,void 0,(function*(){let d;const u={lang:t,location:e,time_zone:l,device_category:a,client_name:r,enable_safety_mode:n,visitor_data:s,on_behalf_of_user:h};if(o)d=m(this,jS,"m",KS).call(this,u);else try{d=yield m(this,jS,"m",YS).call(this,u,c)}catch(t){d=m(this,jS,"m",KS).call(this,u)}return Object.assign(Object.assign({},d),{account_index:i})}))}signIn(t){return d(this,void 0,void 0,(function*(){return new Promise(((e,i)=>d(this,void 0,void 0,(function*(){const s=t=>i(t);this.once("auth",(t=>{this.off("auth-error",s),"SUCCESS"===t.status&&(this.logged_in=!0,e()),i(t)})),this.once("auth-error",s);try{yield this.oauth.init(t),this.oauth.validateCredentials()&&(yield this.oauth.refreshIfRequired(),this.logged_in=!0,e())}catch(t){i(t)}}))))}))}signOut(){return d(this,void 0,void 0,(function*(){if(!this.logged_in)throw new fb("You must be signed in to perform this operation.");const t=yield this.oauth.revokeCredentials();return this.logged_in=!1,t}))}get key(){return m(this,FS,"f")}get api_version(){return m(this,WS,"f")}get client_version(){return m(this,HS,"f").client.clientVersion}get client_name(){return m(this,HS,"f").client.clientName}get account_index(){return m(this,$S,"f")}get context(){return m(this,HS,"f")}get player(){return m(this,GS,"f")}get lang(){return m(this,HS,"f").client.hl}}jS=zS,WS=new WeakMap,FS=new WeakMap,HS=new WeakMap,$S=new WeakMap,GS=new WeakMap,YS=function(t,e=mb.shim.fetch){return d(this,void 0,void 0,(function*(){const i=new URL("/sw.js_data",x.YT_BASE);let s=Ib(11);t.visitor_data&&(s=qn(t.visitor_data).id);const n=yield e(i,{headers:{"accept-language":t.lang||"en-US","user-agent":Cb("desktop"),accept:"*/*",referer:"https://www.youtube.com/sw.js",cookie:`PREF=tz=${t.time_zone.replace("/",".")};VISITOR_INFO1_LIVE=${s};`}});if(!n.ok)throw new bb(`Failed to retrieve session data: ${n.status}`);const o=yield n.text(),a=JSON.parse(o.replace(/^\)\]\}'/,""))[0][2],r=`v${a[0][0][6]}`,[[l],c]=a;return{context:{client:{hl:l[0],gl:t.location||l[2],remoteHost:l[3],screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:l[13],clientName:t.client_name,clientVersion:l[16],osName:l[17],osVersion:l[18],platform:t.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:l[79]||t.time_zone,browserName:l[86],browserVersion:l[87],originalUrl:x.YT_BASE,deviceMake:l[11],deviceModel:l[12],utcOffsetMinutes:-(new Date).getTimezoneOffset()},user:{enableSafetyMode:t.enable_safety_mode,lockedSafetyMode:!1,onBehalfOfUser:t.on_behalf_of_user}},api_key:c,api_version:r}}))},KS=function(t){let e=Ib(11);return t.visitor_data&&(e=qn(t.visitor_data).id),{context:{client:{hl:t.lang||"en",gl:t.location||"US",screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:Kn(e,Math.floor(Date.now()/1e3)),clientName:t.client_name,clientVersion:T.WEB.VERSION,osName:"Windows",osVersion:"10.0",platform:t.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:t.time_zone,originalUrl:x.YT_BASE,deviceMake:"",deviceModel:"",utcOffsetMinutes:-(new Date).getTimezoneOffset()},user:{enableSafetyMode:t.enable_safety_mode,lockedSafetyMode:!1,onBehalfOfUser:t.on_behalf_of_user}},api_key:T.WEB.API_KEY,api_version:T.WEB.API_VERSION}};const XS=zS,QS="/search";function JS(t){return Object.assign({query:t.query,params:t.params,continuation:t.continuation,client:t.client})}const ZS="/player";function tT(t){const e="ANDROID"===t.client||"YTMUSIC_ANDROID"===t.client||"YTSTUDIO_ANDROID"===t.client;return Object.assign({playbackContext:{contentPlaybackContext:Object.assign({vis:0,splay:!1,referer:t.playlist_id?`https://www.youtube.com/watch?v=${t.video_id}&list=${t.playlist_id}`:`https://www.youtube.com/watch?v=${t.video_id}`,currentUrl:t.playlist_id?`/watch?v=${t.video_id}&list=${t.playlist_id}`:`/watch?v=${t.video_id}`,autonavState:"STATE_ON",autoCaptionsDefaultOn:!1,html5Preference:"HTML5_PREF_WANTS",lactMilliseconds:"-1"},{signatureTimestamp:t.sts})},attestationRequest:{omitBotguardData:!0},racyCheckOk:!0,contentCheckOk:!0,videoId:t.video_id},{client:t.client,playlistId:t.playlist_id,params:e?"2AMBCgIQBg":t.params})}const eT="/next";function iT(t){return Object.assign({videoId:t.video_id,playlistId:t.playlist_id,params:t.params,playlistIndex:t.playlist_index,client:t.client,continuation:t.continuation})}const sT="/browse";function nT(t){return Object.assign({browseId:t.browse_id,params:t.params,continuation:t.continuation,client:t.client})}var oT;oT=new WeakMap;const aT=class{constructor(t){oT.set(this,void 0),f(this,oT,t,"f")}search(t){return d(this,void 0,void 0,(function*(){const e=yield m(this,oT,"f").actions.execute(QS,JS({client:"YTKIDS",query:t}));return new ab(m(this,oT,"f").actions,e)}))}getInfo(t){var e;return d(this,void 0,void 0,(function*(){const i=tT({sts:null===(e=m(this,oT,"f").player)||void 0===e?void 0:e.sts,client:"YTKIDS",video_id:t}),s=iT({video_id:t,client:"YTKIDS"}),n=m(this,oT,"f").actions.execute(ZS,i),o=m(this,oT,"f").actions.execute(eT,s),a=yield Promise.all([n,o]),r=Ib(16);return new rb(a,m(this,oT,"f").actions,r)}))}getChannel(t){return d(this,void 0,void 0,(function*(){const e=yield m(this,oT,"f").actions.execute(sT,nT({browse_id:t,client:"YTKIDS"}));return new sb(m(this,oT,"f").actions,e)}))}getHomeFeed(){return d(this,void 0,void 0,(function*(){const t=yield m(this,oT,"f").actions.execute(sT,nT({browse_id:"FEkids_home",client:"YTKIDS"}));return new ob(m(this,oT,"f").actions,t)}))}};var rT,lT,cT,hT,dT;lT=new WeakMap,cT=new WeakMap,rT=new WeakSet,hT=function(t){var e;return d(this,void 0,void 0,(function*(){const i=tT({video_id:t,sts:null===(e=m(this,lT,"f").player)||void 0===e?void 0:e.sts,client:"YTMUSIC"}),s=iT({video_id:t,client:"YTMUSIC"}),n=m(this,cT,"f").execute(ZS,i),o=m(this,cT,"f").execute(eT,s),a=yield Promise.all([n,o]),r=Ib(16);return new eb(a,m(this,cT,"f"),r)}))},dT=function(t){var e;return d(this,void 0,void 0,(function*(){if(!t)throw new fb("List item cannot be undefined");if(!t.endpoint)throw new Error("This item does not have an endpoint.");const i=t.endpoint.call(m(this,cT,"f"),{client:"YTMUSIC",playbackContext:{contentPlaybackContext:Object.assign({signatureTimestamp:null===(e=m(this,lT,"f").player)||void 0===e?void 0:e.sts})}}),s=t.endpoint.call(m(this,cT,"f"),{client:"YTMUSIC",enablePersistentPlaylistPanel:!0,override_endpoint:"/next"}),n=Ib(16),o=yield Promise.all([i,s]);return new eb(o,m(this,cT,"f"),n)}))};const uT=class{constructor(t){rT.add(this),lT.set(this,void 0),cT.set(this,void 0),f(this,lT,t,"f"),f(this,cT,t.actions,"f")}getInfo(t){if(t instanceof dd)return m(this,rT,"m",dT).call(this,t);if("string"==typeof t)return m(this,rT,"m",hT).call(this,t);throw new fb("Invalid target, expected either a video id or a valid MusicTwoRowItem",t)}search(t,e={}){return d(this,void 0,void 0,(function*(){Eb({query:t});const i=yield m(this,cT,"f").execute(QS,JS({query:t,client:"YTMUSIC",params:e.type&&"all"!==e.type?Qn(e):void 0}));return new Z_(i,m(this,cT,"f"),Reflect.has(e,"type")&&"all"!==e.type)}))}getHomeFeed(){return d(this,void 0,void 0,(function*(){const t=yield m(this,cT,"f").execute(sT,nT({browse_id:"FEmusic_home",client:"YTMUSIC"}));return new C_(t,m(this,cT,"f"))}))}getExplore(){return d(this,void 0,void 0,(function*(){const t=yield m(this,cT,"f").execute(sT,nT({client:"YTMUSIC",browse_id:"FEmusic_explore"}));return new b_(t)}))}getLibrary(){return d(this,void 0,void 0,(function*(){const t=yield m(this,cT,"f").execute(sT,nT({client:"YTMUSIC",browse_id:"FEmusic_library_landing"}));return new D_(t,m(this,cT,"f"))}))}getArtist(t){return d(this,void 0,void 0,(function*(){if(Eb({artist_id:t}),!t.startsWith("UC")&&!t.startsWith("FEmusic_library_privately_owned_artist"))throw new fb("Invalid artist id",t);const e=yield m(this,cT,"f").execute(sT,nT({client:"YTMUSIC",browse_id:t}));return new g_(e,m(this,cT,"f"))}))}getAlbum(t){return d(this,void 0,void 0,(function*(){if(Eb({album_id:t}),!t.startsWith("MPR")&&!t.startsWith("FEmusic_library_privately_owned_release"))throw new fb("Invalid album id",t);const e=yield m(this,cT,"f").execute(sT,nT({client:"YTMUSIC",browse_id:t}));return new f_(e)}))}getPlaylist(t){return d(this,void 0,void 0,(function*(){Eb({playlist_id:t}),t.startsWith("VL")||(t=`VL${t}`);const e=yield m(this,cT,"f").execute(sT,nT({client:"YTMUSIC",browse_id:t}));return new H_(e,m(this,cT,"f"))}))}getUpNext(t,e=!0){var i,s,n;return d(this,void 0,void 0,(function*(){Eb({video_id:t});const o=yield m(this,cT,"f").execute(eT,Object.assign(Object.assign({},iT({video_id:t,client:"YTMUSIC"})),{parse:!0})),a=null===(i=o.contents_memo)||void 0===i?void 0:i.getType(ym),r=null==a?void 0:a.first();if(!r)throw new fb("Could not find target tab.");const l=null===(s=r.content)||void 0===s?void 0:s.as(Wd);if(!l||!l.content)throw new fb("Music queue was empty, the given id is probably invalid.",l);const c=l.content.as(Ud);if(!c.playlist_id&&e){const e=c.contents.firstOfType(mi);if(!e)throw new fb("Automix item not found");const i=yield null===(n=e.playlist_video)||void 0===n?void 0:n.endpoint.call(m(this,cT,"f"),{videoId:t,client:"YTMUSIC",parse:!0});if(!i||!i.contents_memo)throw new fb("Could not fetch automix");return i.contents_memo.getType(Ud).first()}return c}))}getRelated(t){var e;return d(this,void 0,void 0,(function*(){Eb({video_id:t});const i=yield m(this,cT,"f").execute(eT,Object.assign(Object.assign({},iT({video_id:t,client:"YTMUSIC"})),{parse:!0})),s=null===(e=i.contents_memo)||void 0===e?void 0:e.getType(ym),n=null==s?void 0:s.matchCondition((t=>{var e,i;return"MUSIC_PAGE_TYPE_TRACK_RELATED"===(null===(i=null===(e=t.endpoint.payload.browseEndpointContextSupportedConfigs)||void 0===e?void 0:e.browseEndpointContextMusicConfig)||void 0===i?void 0:i.pageType)}));if(!n)throw new fb("Could not find target tab.");const o=yield n.endpoint.call(m(this,cT,"f"),{client:"YTMUSIC",parse:!0});if(!o.contents)throw new fb("Unexpected response",o);return o.contents.item().as(xt).contents.as(pd,fd)}))}getLyrics(t){var e;return d(this,void 0,void 0,(function*(){Eb({video_id:t});const i=yield m(this,cT,"f").execute(eT,Object.assign(Object.assign({},iT({video_id:t,client:"YTMUSIC"})),{parse:!0})),s=null===(e=i.contents_memo)||void 0===e?void 0:e.getType(ym),n=null==s?void 0:s.matchCondition((t=>{var e,i;return"MUSIC_PAGE_TYPE_TRACK_LYRICS"===(null===(i=null===(e=t.endpoint.payload.browseEndpointContextSupportedConfigs)||void 0===e?void 0:e.browseEndpointContextMusicConfig)||void 0===i?void 0:i.pageType)}));if(!n)throw new fb("Could not find target tab.");const o=yield n.endpoint.call(m(this,cT,"f"),{client:"YTMUSIC",parse:!0});if(!o.contents)throw new fb("Unexpected response",o);if("Message"===o.contents.item().type)throw new fb(o.contents.item().as(Qo).text.toString(),t);return o.contents.item().as(xt).contents.firstOfType(fd)}))}getRecap(){return d(this,void 0,void 0,(function*(){const t=yield m(this,cT,"f").execute(sT,nT({client:"YTMUSIC_ANDROID",browse_id:"FEmusic_listening_review"}));return new Y_(t,m(this,cT,"f"))}))}getSearchSuggestions(t){return d(this,void 0,void 0,(function*(){const e=yield m(this,cT,"f").execute("/music/get_search_suggestions",Object.assign(Object.assign({},(i={input:t},{input:i.input,client:"YTMUSIC"})),{parse:!0}));var i;if(!e.contents_memo)throw new fb("Unexpected response",e);return e.contents_memo.getType(Wp).first().contents}))}};var pT,mT,fT,vT,yT;mT=new WeakMap,pT=new WeakSet,fT=function(){return d(this,void 0,void 0,(function*(){const t=`innertube_android:${mb.shim.uuidv4()}:0:v=3,api=1,cf=3`,e={frontendUploadId:t,deviceDisplayName:"Pixel 6 Pro",fileId:`goog-edited-video://generated?videoFileUri=content://media/external/video/media/${mb.shim.uuidv4()}`,mp4MoovAtomRelocationStatus:"UNSUPPORTED",transcodeResult:"DISABLED",connectionType:"WIFI"},i=yield m(this,mT,"f").http.fetch("/upload/youtubei",{baseURL:x.YT_UPLOAD,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"start","x-goog-upload-protocol":"resumable"},body:JSON.stringify(e)});if(!i.ok)throw new fb("Could not get initial upload data");return{frontend_upload_id:t,upload_id:i.headers.get("x-guploader-uploadid"),upload_url:i.headers.get("x-goog-upload-url"),scotty_resource_id:i.headers.get("x-goog-upload-header-scotty-resource-id"),chunk_granularity:i.headers.get("x-goog-upload-chunk-granularity")}}))},vT=function(t,e){return d(this,void 0,void 0,(function*(){const i=yield m(this,mT,"f").http.fetch_function(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"upload, finalize","x-goog-upload-file-name":`file-${Date.now()}`,"x-goog-upload-offset":"0"},body:e});if(!i.ok)throw new fb("Could not upload video");return yield i.json()}))},yT=function(t,e,i){return d(this,void 0,void 0,(function*(){var s;return yield m(this,mT,"f").actions.execute("/upload/createvideo",(s={resource_id:{scotty_resource_id:{id:e.scottyResourceId}},frontend_upload_id:t.frontend_upload_id,initial_metadata:{title:{new_title:i.title||(new Date).toDateString()},description:{new_description:i.description||"",should_segment:!0},privacy:{new_privacy:i.privacy||"PRIVATE"},draft_state:{is_draft:i.is_draft}},client:"ANDROID"},Object.assign({resourceId:{scottyResourceId:{id:s.resource_id.scotty_resource_id.id}},frontendUploadId:s.frontend_upload_id,initialMetadata:{title:{newTitle:s.initial_metadata.title.new_title},description:{newDescription:s.initial_metadata.description.new_description,shouldSegment:s.initial_metadata.description.should_segment},privacy:{newPrivacy:s.initial_metadata.privacy.new_privacy},draftState:{isDraft:!!s.initial_metadata.draft_state.is_draft}}},{client:s.client})))}))};const gT=class{constructor(t){pT.add(this),mT.set(this,void 0),f(this,mT,t,"f")}setThumbnail(t,e){return d(this,void 0,void 0,(function*(){if(!m(this,mT,"f").logged_in)throw new fb("You must be signed in to perform this operation.");if(!t||!e)throw new yb("One or more parameters are missing.");const i=function(t,e){return Gn({context:{client:{unkparam:14,clientName:T.ANDROID.NAME,clientVersion:T.YTSTUDIO_ANDROID.VERSION}},target:t,videoThumbnail:{type:3,thumbnail:{imageData:e}}})}(t,e);return yield m(this,mT,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:i})}))}updateVideoMetadata(t,e){return d(this,void 0,void 0,(function*(){if(!m(this,mT,"f").logged_in)throw new fb("You must be signed in to perform this operation.");const i=function(t,e){const i={context:{client:{unkparam:14,clientName:T.ANDROID.NAME,clientVersion:T.YTSTUDIO_ANDROID.VERSION}},target:t};if(Reflect.has(e,"title")&&(i.title={text:e.title||""}),Reflect.has(e,"description")&&(i.description={text:e.description||""}),Reflect.has(e,"license")&&(i.license={type:e.license||""}),Reflect.has(e,"tags")&&(i.tags={list:e.tags||[]}),Reflect.has(e,"category")&&(i.category={id:e.category||0}),Reflect.has(e,"privacy"))switch(e.privacy){case"PUBLIC":i.privacy={type:1};break;case"UNLISTED":i.privacy={type:2};break;case"PRIVATE":i.privacy={type:3};break;default:throw new Error("Invalid visibility option")}return Reflect.has(e,"made_for_kids")&&(i.madeForKids={unkparam:1,choice:e.made_for_kids?1:2}),Reflect.has(e,"age_restricted")&&(i.ageRestricted={unkparam:1,choice:e.age_restricted?1:2}),Gn(i)}(t,e);return yield m(this,mT,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:i})}))}upload(t,e={}){return d(this,void 0,void 0,(function*(){if(!m(this,mT,"f").logged_in)throw new fb("You must be signed in to perform this operation.");const i=yield m(this,pT,"m",fT).call(this),s=yield m(this,pT,"m",vT).call(this,i.upload_url,t);if("STATUS_SUCCESS"!==s.status)throw new fb("Could not process video.");return yield m(this,pT,"m",yT).call(this,i,s,e)}))}};var _T;_T=new WeakMap;const bT=class{constructor(t){_T.set(this,void 0),f(this,_T,t,"f"),this.channel={editName:t=>{if(!m(this,_T,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");return m(this,_T,"f").execute("/channel/edit_name",{givenName:{given_name:t}.given_name,client:"ANDROID"})},editDescription:t=>{if(!m(this,_T,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");return m(this,_T,"f").execute("/channel/edit_description",{givenDescription:{given_description:t}.given_description,client:"ANDROID"})},getBasicAnalytics:()=>this.getAnalytics()}}getInfo(){return d(this,void 0,void 0,(function*(){if(!m(this,_T,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");const t=yield m(this,_T,"f").execute("/account/accounts_list",{client:"ANDROID"});return new ny(t)}))}getTimeWatched(){return d(this,void 0,void 0,(function*(){const t=yield m(this,_T,"f").execute(sT,nT({browse_id:"SPtime_watched",client:"ANDROID"}));return new Ig(t)}))}getSettings(){return d(this,void 0,void 0,(function*(){const t=yield m(this,_T,"f").execute(sT,nT({browse_id:"SPaccount_overview"}));return new Tg(m(this,_T,"f"),t)}))}getAnalytics(){var t;return d(this,void 0,void 0,(function*(){const e=yield this.getInfo(),i=yield m(this,_T,"f").execute(sT,nT({browse_id:"FEanalytics_screen",params:zn(null===(t=e.footers)||void 0===t?void 0:t.endpoint.payload.browseId),client:"ANDROID"}));return new ay(i)}))}},wT="/browse/edit_playlist";function xT(t){return{playlistId:t.playlist_id,actions:t.actions.map((t=>Object.assign({action:t.action},{addedVideoId:t.added_video_id,setVideoId:t.set_video_id,movedSetVideoIdPredecessor:t.moved_set_video_id_predecessor,playlistDescription:t.playlist_description,playlistName:t.playlist_name})))}}var ST;ST=new WeakMap;const TT=class{constructor(t){ST.set(this,void 0),f(this,ST,t,"f")}create(t,e){return d(this,void 0,void 0,(function*(){if(Eb({title:t,video_ids:e}),!m(this,ST,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");const i=yield m(this,ST,"f").execute("/playlist/create",(s={ids:e,title:t},{title:s.title,ids:s.ids}));var s;return{success:i.success,status_code:i.status_code,playlist_id:i.data.playlistId,data:i.data}}))}delete(t){return d(this,void 0,void 0,(function*(){if(Eb({playlist_id:t}),!m(this,ST,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");const e=yield m(this,ST,"f").execute("/playlist/delete",(i={playlist_id:t},{playlistId:i.playlist_id}));var i;return{playlist_id:t,success:e.success,status_code:e.status_code,data:e.data}}))}addVideos(t,e){return d(this,void 0,void 0,(function*(){if(Eb({playlist_id:t,video_ids:e}),!m(this,ST,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");const i=yield m(this,ST,"f").execute(wT,xT({actions:e.map((t=>({action:"ACTION_ADD_VIDEO",added_video_id:t}))),playlist_id:t}));return{playlist_id:t,action_result:i.data.actions}}))}removeVideos(t,e){return d(this,void 0,void 0,(function*(){if(Eb({playlist_id:t,video_ids:e}),!m(this,ST,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");const i=yield m(this,ST,"f").execute(sT,Object.assign(Object.assign({},nT({browse_id:`VL${t}`})),{parse:!0})),s=new Fy(m(this,ST,"f"),i,!0);if(!s.info.is_editable)throw new fb("This playlist cannot be edited.",t);const n={playlist_id:t,actions:[]},o=t=>d(this,void 0,void 0,(function*(){if(t.videos.filter((t=>e.includes(t.key("id").string()))).forEach((t=>n.actions.push({action:"ACTION_REMOVE_VIDEO",set_video_id:t.key("set_video_id").string()}))),n.actions.length<e.length){const e=yield t.getContinuation();return o(e)}}));if(yield o(s),!n.actions.length)throw new fb("Given video ids were not found in this playlist.",e);const a=yield m(this,ST,"f").execute(wT,xT(n));return{playlist_id:t,action_result:a.data.actions}}))}moveVideo(t,e,i){return d(this,void 0,void 0,(function*(){if(Eb({playlist_id:t,moved_video_id:e,predecessor_video_id:i}),!m(this,ST,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");const s=yield m(this,ST,"f").execute(sT,Object.assign(Object.assign({},nT({browse_id:`VL${t}`})),{parse:!0})),n=new Fy(m(this,ST,"f"),s,!0);if(!n.info.is_editable)throw new fb("This playlist cannot be edited.",t);const o={playlist_id:t,actions:[]};let a,r;const l=t=>d(this,void 0,void 0,(function*(){const s=t.videos.find((t=>e===t.key("id").string())),n=t.videos.find((t=>i===t.key("id").string()));if(a=a||(null==s?void 0:s.key("set_video_id").string()),r=r||(null==n?void 0:n.key("set_video_id").string()),!a||!r){const e=yield t.getContinuation();return l(e)}}));yield l(n),o.actions.push({action:"ACTION_MOVE_VIDEO_AFTER",set_video_id:a,moved_set_video_id_predecessor:r});const c=yield m(this,ST,"f").execute(wT,xT(o));return{playlist_id:t,action_result:c.data.actions}}))}setName(t,e){return d(this,void 0,void 0,(function*(){if(Eb({playlist_id:t,name:e}),!m(this,ST,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");const i={playlist_id:t,actions:[]};i.actions.push({action:"ACTION_SET_PLAYLIST_NAME",playlist_name:e});const s=yield m(this,ST,"f").execute(wT,xT(i));return{playlist_id:t,action_result:s.data.actions}}))}setDescription(t,e){return d(this,void 0,void 0,(function*(){if(Eb({playlist_id:t,description:e}),!m(this,ST,"f").session.logged_in)throw new fb("You must be signed in to perform this operation.");const i={playlist_id:t,actions:[]};i.actions.push({action:"ACTION_SET_PLAYLIST_DESCRIPTION",playlist_description:e});const s=yield m(this,ST,"f").execute(wT,xT(i));return{playlist_id:t,action_result:s.data.actions}}))}};var CT;CT=new WeakMap;const IT=class{constructor(t){CT.set(this,void 0),f(this,CT,t,"f")}like(t){return d(this,void 0,void 0,(function*(){if(Eb({video_id:t}),!m(this,CT,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");var e;return yield m(this,CT,"f").execute("/like/like",(e={client:"ANDROID",target:{video_id:t}},Object.assign({target:{videoId:e.target.video_id}},{client:e.client})))}))}dislike(t){return d(this,void 0,void 0,(function*(){if(Eb({video_id:t}),!m(this,CT,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");var e;return yield m(this,CT,"f").execute("/like/dislike",(e={client:"ANDROID",target:{video_id:t}},Object.assign({target:{videoId:e.target.video_id}},{client:e.client})))}))}removeRating(t){return d(this,void 0,void 0,(function*(){if(Eb({video_id:t}),!m(this,CT,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");var e;return yield m(this,CT,"f").execute("/like/removelike",(e={client:"ANDROID",target:{video_id:t}},Object.assign({target:{videoId:e.target.video_id}},{client:e.client})))}))}subscribe(t){return d(this,void 0,void 0,(function*(){if(Eb({channel_id:t}),!m(this,CT,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");var e;return yield m(this,CT,"f").execute("/subscription/subscribe",(e={client:"ANDROID",channel_ids:[t],params:"EgIIAhgA"},Object.assign({channelIds:e.channel_ids},{client:e.client,params:e.params})))}))}unsubscribe(t){return d(this,void 0,void 0,(function*(){if(Eb({channel_id:t}),!m(this,CT,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");var e;return yield m(this,CT,"f").execute("/subscription/unsubscribe",(e={client:"ANDROID",channel_ids:[t],params:"CgIIAhgA"},Object.assign({channelIds:e.channel_ids},{client:e.client,params:e.params})))}))}comment(t,e){return d(this,void 0,void 0,(function*(){if(Eb({video_id:t,text:e}),!m(this,CT,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");var i;return yield m(this,CT,"f").execute("/comment/create_comment",(i={comment_text:e,create_comment_params:to(t),client:"ANDROID"},Object.assign({commentText:i.comment_text,createCommentParams:i.create_comment_params},{client:i.client})))}))}translate(t,e,i={}){return d(this,void 0,void 0,(function*(){Eb({text:t,target_language:e});const s=eo(22,Object.assign({text:t,target_language:e},i)),n=yield m(this,CT,"f").execute("/comment/perform_comment_action",(o={client:"ANDROID",actions:[s]},Object.assign({actions:o.actions},{client:o.client})));var o;const a=n.data.frameworkUpdates.entityBatchUpdate.mutations[0].payload.commentEntityPayload;return{success:n.success,status_code:n.status_code,translated_content:a.translatedContent.content,data:n.data}}))}setNotificationPreferences(t,e){return d(this,void 0,void 0,(function*(){if(Eb({channel_id:t,type:e}),!m(this,CT,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");const i={PERSONALIZED:1,ALL:2,NONE:3};if(!Object.keys(i).includes(e.toUpperCase()))throw new Error(`Invalid notification preference type: ${e}`);var s;return yield m(this,CT,"f").execute("/notification/modify_channel_preference",(s={client:"WEB",params:io(t,i[e.toUpperCase()])},Object.assign({params:s.params},{client:s.client})))}))}};var kT;class ET{constructor(t){kT.set(this,void 0),f(this,kT,t,"f")}static create(t={}){return d(this,void 0,void 0,(function*(){return new ET(yield XS.create(t))}))}getInfo(t,e){var i,s,n,o,a;return d(this,void 0,void 0,(function*(){let r;if(Eb({target:t}),t instanceof U)r=iT({video_id:null===(i=t.payload)||void 0===i?void 0:i.videoId,playlist_id:null===(s=t.payload)||void 0===s?void 0:s.playlistId,params:null===(n=t.payload)||void 0===n?void 0:n.params,playlist_index:null===(o=t.payload)||void 0===o?void 0:o.index});else{if("string"!=typeof t)throw new fb("Invalid target, expected either a video id or a valid NavigationEndpoint",t);r=iT({video_id:t})}if(!r.videoId)throw new fb("Video id cannot be empty",r);const l=tT({video_id:r.videoId,playlist_id:null==r?void 0:r.playlistId,client:e,sts:null===(a=m(this,kT,"f").player)||void 0===a?void 0:a.sts}),c=this.actions.execute(ZS,l),h=this.actions.execute(eT,r),d=yield Promise.all([c,h]),u=Ib(16);return new p_(d,this.actions,u)}))}getBasicInfo(t,e){var i;return d(this,void 0,void 0,(function*(){Eb({video_id:t});const s=yield this.actions.execute(ZS,tT({video_id:t,client:e,sts:null===(i=m(this,kT,"f").player)||void 0===i?void 0:i.sts})),n=Ib(16);return new p_([s],this.actions,n)}))}search(t,e={}){return d(this,void 0,void 0,(function*(){Eb({query:t});const i=yield this.actions.execute(QS,JS({query:t,params:e?Xn(e):void 0}));return new bg(this.actions,i)}))}getSearchSuggestions(t){return d(this,void 0,void 0,(function*(){Eb({query:t});const e=new URL(`${x.YT_SUGGESTIONS}search`);e.searchParams.set("q",t),e.searchParams.set("hl",m(this,kT,"f").context.client.hl),e.searchParams.set("gl",m(this,kT,"f").context.client.gl),e.searchParams.set("ds","yt"),e.searchParams.set("client","youtube"),e.searchParams.set("xssi","t"),e.searchParams.set("oe","UTF");const i=yield m(this,kT,"f").http.fetch(e),s=yield i.text();return JSON.parse(s.replace(")]}'",""))[1].map((t=>t[0]))}))}getComments(t,e){return d(this,void 0,void 0,(function*(){Eb({video_id:t});const i=yield this.actions.execute(eT,iT({continuation:Zn(t,{sort_by:e||"TOP_COMMENTS"})}));return new Ey(this.actions,i.data)}))}getHomeFeed(){return d(this,void 0,void 0,(function*(){const t=yield this.actions.execute(sT,nT({browse_id:"FEwhat_to_watch"}));return new Oy(this.actions,t)}))}getGuide(){return d(this,void 0,void 0,(function*(){const t=yield this.actions.execute("/guide");return new Ay(t.data)}))}getLibrary(){return d(this,void 0,void 0,(function*(){const t=yield this.actions.execute(sT,nT({browse_id:"FElibrary"}));return new Gy(this.actions,t)}))}getHistory(){return d(this,void 0,void 0,(function*(){const t=yield this.actions.execute(sT,nT({browse_id:"FEhistory"}));return new Py(this.actions,t)}))}getTrending(){return d(this,void 0,void 0,(function*(){const t=yield this.actions.execute(sT,Object.assign(Object.assign({},nT({browse_id:"FEtrending"})),{parse:!0}));return new gy(this.actions,t)}))}getSubscriptionsFeed(){return d(this,void 0,void 0,(function*(){const t=yield this.actions.execute(sT,Object.assign(Object.assign({},nT({browse_id:"FEsubscriptions"})),{parse:!0}));return new my(this.actions,t)}))}getChannel(t){return d(this,void 0,void 0,(function*(){Eb({id:t});const e=yield this.actions.execute(sT,nT({browse_id:t}));return new wy(this.actions,e)}))}getNotifications(){return d(this,void 0,void 0,(function*(){const t=yield this.actions.execute("/notification/get_notification_menu",(e={notifications_menu_request_type:"NOTIFICATIONS_MENU_REQUEST_TYPE_INBOX"},Object.assign({notificationsMenuRequestType:e.notifications_menu_request_type})));var e;return new gg(this.actions,t)}))}getUnseenNotificationsCount(){var t,e,i,s;return d(this,void 0,void 0,(function*(){const n=yield this.actions.execute("/notification/get_unseen_count");return(null===(t=n.data)||void 0===t?void 0:t.unseenCount)||(null===(s=null===(i=null===(e=n.data)||void 0===e?void 0:e.actions)||void 0===i?void 0:i[0].updateNotificationsUnseenCountAction)||void 0===s?void 0:s.unseenCount)||0}))}getPlaylist(t){return d(this,void 0,void 0,(function*(){Eb({id:t}),t.startsWith("VL")||(t=`VL${t}`);const e=yield this.actions.execute(sT,nT({browse_id:t}));return new Fy(this.actions,e)}))}getHashtag(t){return d(this,void 0,void 0,(function*(){Eb({hashtag:t});const e=yield this.actions.execute(sT,nT({browse_id:"FEhashtag",params:so(t)}));return new Dy(this.actions,e)}))}getStreamingData(t,e={}){return d(this,void 0,void 0,(function*(){return(yield this.getBasicInfo(t)).chooseFormat(e)}))}download(t,e){return d(this,void 0,void 0,(function*(){return(yield this.getBasicInfo(t,null==e?void 0:e.client)).download(e)}))}resolveURL(t){return d(this,void 0,void 0,(function*(){var e;return(yield this.actions.execute("/navigation/resolve_url",Object.assign(Object.assign({},(e={url:t},Object.assign({url:e.url}))),{parse:!0}))).endpoint}))}call(t,e){return t.call(this.actions,e)}get music(){return new uT(m(this,kT,"f"))}get studio(){return new gT(m(this,kT,"f"))}get kids(){return new aT(m(this,kT,"f"))}get account(){return new bT(m(this,kT,"f").actions)}get playlist(){return new TT(m(this,kT,"f").actions)}get interact(){return new IT(m(this,kT,"f").actions)}get actions(){return m(this,kT,"f").actions}get session(){return m(this,kT,"f")}}kT=new WeakMap;const RT=ET;var AT,MT,PT,OT;MT=new WeakMap,PT=new WeakMap,AT=new WeakSet,OT=function(){const t=Reflect.get(globalThis,"indexedDB")||Reflect.get(globalThis,"webkitIndexedDB")||Reflect.get(globalThis,"mozIndexedDB")||Reflect.get(globalThis,"msIndexedDB");return t?new Promise(((e,i)=>{const s=t.open("youtubei.js",1);s.onsuccess=function(){e(this.result)},s.onerror=function(t){i("indexedDB request error"),console.error(t)},s.onupgradeneeded=function(){this.result.createObjectStore("kv-store",{keyPath:"k"}).transaction.oncomplete=function(){e(this.db)}}})):console.log("IndexedDB is not supported. No cache will be used.")},mb.load({runtime:"browser",server:!1,info:{version:Mb.i8,bugs_url:Mb.eN.H,repo_url:Mb.Xh.split("#")[0]},Cache:class{constructor(t=!1,e){AT.add(this),MT.set(this,void 0),PT.set(this,void 0),f(this,MT,e||"","f"),f(this,PT,t,"f")}get cache_dir(){return m(this,PT,"f")?m(this,MT,"f"):""}get(t){return d(this,void 0,void 0,(function*(){const e=yield m(this,AT,"m",OT).call(this);if(e)return new Promise(((i,s)=>{const n=e.transaction("kv-store","readonly").objectStore("kv-store").get(t);n.onerror=s,n.onsuccess=function(){var t;const e=null===(t=this.result)||void 0===t?void 0:t.v;i(e?e.buffer:void 0)}}))}))}set(t,e){return d(this,void 0,void 0,(function*(){const i=yield m(this,AT,"m",OT).call(this);if(i)return new Promise(((s,n)=>{const o=i.transaction("kv-store","readwrite").objectStore("kv-store").put({k:t,v:e});o.onerror=n,o.onsuccess=()=>s()}))}))}remove(t){return d(this,void 0,void 0,(function*(){const e=yield m(this,AT,"m",OT).call(this);if(e)return new Promise(((i,s)=>{const n=e.transaction("kv-store","readwrite").objectStore("kv-store").delete(t);n.onerror=s,n.onsuccess=()=>i()}))}))}},sha1Hash:function(t){return d(this,void 0,void 0,(function*(){const e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];return function(t){const i=new Uint8Array(t),s=[];for(let t=0;t<i.length;++t)s.push(e[i[t]]);return s.join("")}(yield crypto.subtle.digest("SHA-1",(new TextEncoder).encode(t)))}))},uuidv4(){var t;return(null===(t=globalThis.crypto)||void 0===t?void 0:t.randomUUID())?globalThis.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(t=>{const e=parseInt(t);return(e^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},eval:function(t,e){const i=new bS(t);for(const[t,s]of Object.entries(e))i.scope.set(t,s);return i.interpret()},fetch:globalThis.fetch,Request:globalThis.Request,Response:globalThis.Response,Headers:globalThis.Headers,FormData:globalThis.FormData,File:globalThis.File,ReadableStream:globalThis.ReadableStream,CustomEvent:globalThis.CustomEvent}),new class{#t=null;#e=null;constructor(t){this.#t=t}async init(){this.#e=await RT.create({cache:new Dg(!1),generate_session_locally:!0,fetch:async(t,e)=>{const i="string"==typeof t?new URL(t):t instanceof URL?t:new URL(t.url);i.searchParams.set("__host",i.host),i.host="localhost:4000",i.protocol="http",i.pathname="/proxy";const s=e?.headers?new Headers(e.headers):t instanceof Request?t.headers:new Headers;i.searchParams.set("__headers",JSON.stringify([...s])),t instanceof Request&&(t.duplex="half");const n=new Request(i,t instanceof Request?t:void 0);return s.delete("user-agent"),fetch(n,e?{...e,headers:s}:{headers:s})}})}}("your_video_id").init().then((()=>{})).catch((t=>{console.error("Error initializing Youtube:",t)}))})();
//# sourceMappingURL=bundle.js.map